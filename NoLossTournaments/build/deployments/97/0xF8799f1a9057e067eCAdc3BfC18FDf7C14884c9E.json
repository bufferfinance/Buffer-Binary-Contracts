{"allSourcePaths": {"21": "contracts/Libraries/OptionFeeCalculator.sol", "22": "contracts/Libraries/OptionMath.sol", "25": "contracts/Pool/BufferEpocPoolV2Unintialized.sol", "13": "/home/lenovo/.brownie/packages/OpenZeppelin/openzeppelin-contracts@4.3.2/contracts/utils/Context.sol", "4": "/home/lenovo/.brownie/packages/OpenZeppelin/openzeppelin-contracts@4.3.2/contracts/token/ERC20/ERC20.sol", "5": "/home/lenovo/.brownie/packages/OpenZeppelin/openzeppelin-contracts@4.3.2/contracts/token/ERC20/IERC20.sol", "6": "/home/lenovo/.brownie/packages/OpenZeppelin/openzeppelin-contracts@4.3.2/contracts/token/ERC20/extensions/IERC20Metadata.sol", "24": "contracts/OptionsUtils/OptionConfigUnintialized.sol"}, "bytecode": "610cab61003a600b82828239805160001a60731461002d57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600436106100775760003560e01c8063351f62a01461007c5780634fe8c640146100af578063934ce3d6146100d0578063c04a1afe146100e3578063d69bde77146100f6578063dbfa5dd614610109578063fbef1d551461011c575b600080fd5b61008f61008a366004610b14565b61012f565b604080519384526020840192909252908201526060015b60405180910390f35b6100c26100bd366004610a24565b61022f565b6040519081526020016100a6565b61008f6100de366004610a94565b61037c565b61008f6100f1366004610b14565b6103b9565b6100c2610104366004610a53565b6104b4565b61008f610117366004610941565b6105eb565b61008f61012a366004610b14565b610626565b60008060008073__OptionMath____________________________632c607c3b61015a8c888a6104b4565b8b8a8f60028e600281111561017f57634e487b7160e01b600052602160045260246000fd5b146040518663ffffffff1660e01b81526004016101a0959493929190610b88565b60206040518083038186803b1580156101b857600080fd5b505af41580156101cc573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101f09190610a0c565b90506101fc8a876106f4565b9250866102098b83610c11565b6102139190610bf1565b915061021f8284610bd9565b9350509750975097945050505050565b600080826001600160a01b031663d9ac10d96040518163ffffffff1660e01b815260040160206040518083038186803b15801561026b57600080fd5b505afa15801561027f573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102a39190610a0c565b9050600081116102de5760405162461bcd60e51b815260206004820152600260248201526109e760f31b604482015260640160405180910390fd5b8084846001600160a01b0316636ab28bc86040518163ffffffff1660e01b815260040160206040518083038186803b15801561031957600080fd5b505afa15801561032d573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906103519190610a0c565b61035b9190610bd9565b61036a906402540be400610c11565b6103749190610bf1565b949350505050565b60008060006103918a85878c8f8b8e8e610784565b905061039d8a866106f4565b91506103a98183610bd9565b9250985098509895505050505050565b60008060008073__OptionMath____________________________632c607c3b6103e48c888a6104b4565b8b8a8f60028e600281111561040957634e487b7160e01b600052602160045260246000fd5b146040518663ffffffff1660e01b815260040161042a959493929190610b88565b60206040518083038186803b15801561044257600080fd5b505af4158015610456573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061047a9190610a0c565b9050868a6104888284610bd9565b6104929190610c11565b61049c9190610bf1565b91506104a88a876106f4565b925061021f8284610bd9565b6000816001600160a01b03166318f88e5b6040518163ffffffff1660e01b815260040160206040518083038186803b1580156104ef57600080fd5b505afa158015610503573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906105279190610a0c565b90506000610535858561022f565b905063ee6b28008111156105e357826001600160a01b0316636c321c8a6040518163ffffffff1660e01b815260040160206040518083038186803b15801561057c57600080fd5b505afa158015610590573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906105b49190610a0c565b6105c263ee6b280083610c30565b6105cc9084610c11565b6105d69190610bf1565b6105e09083610bd9565b91505b509392505050565b60008060006105fd8885878a8a610847565b905061060d8860200151866106f4565b91506106198183610bd9565b9250955095509592505050565b60008060008073__OptionMath____________________________632c607c3b6106518c888a6104b4565b8b8a8f60028e600281111561067657634e487b7160e01b600052602160045260246000fd5b146040518663ffffffff1660e01b8152600401610697959493929190610b88565b60206040518083038186803b1580156106af57600080fd5b505af41580156106c3573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906106e79190610a0c565b9050866104928b83610c11565b60006064826001600160a01b031663f3fa34956040518163ffffffff1660e01b815260040160206040518083038186803b15801561073157600080fd5b505afa158015610745573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107699190610a0c565b6107739085610c11565b61077d9190610bf1565b9392505050565b60008073__OptionMath____________________________63d573d6156107ac8c8c8c6104b4565b89888a89896040518763ffffffff1660e01b81526004016107d296959493929190610bad565b60206040518083038186803b1580156107ea57600080fd5b505af41580156107fe573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108229190610a0c565b90508461082f8b83610c11565b6108399190610bf1565b9a9950505050505050505050565b60008073__OptionMath____________________________63d573d615610873896020015189896104b4565b6040808b01518b5160608d015160808e015193516001600160e01b031960e088901b1681526108a995948b939291600401610bad565b60206040518083038186803b1580156108c157600080fd5b505af41580156108d5573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108f99190610a0c565b90508387602001518261090c9190610c11565b6109169190610bf1565b979650505050505050565b8035801515811461093157600080fd5b919050565b803561093181610c5d565b600080600080600085870361012081121561095a578182fd5b60a0811215610967578182fd5b5060405160a081016001600160401b038111828210171561099657634e487b7160e01b83526041600452602483fd5b80604052508635815260208701356020820152604087013560408201526109bf60608801610921565b60608201526109d060808801610921565b6080820152945060a0860135935060c086013592506109f160e08701610936565b9150610a006101008701610936565b90509295509295909350565b600060208284031215610a1d578081fd5b5051919050565b60008060408385031215610a36578182fd5b823591506020830135610a4881610c5d565b809150509250929050565b600080600060608486031215610a67578283fd5b833592506020840135610a7981610c5d565b91506040840135610a8981610c5d565b809150509250925092565b600080600080600080600080610100898b031215610ab0578283fd5b883597506020890135965060408901359550610ace60608a01610921565b9450610adc60808a01610921565b935060a0890135925060c0890135610af381610c5d565b915060e0890135610b0381610c5d565b809150509295985092959890939650565b600080600080600080600060e0888a031215610b2e578283fd5b873596506020880135955060408801359450606088013560038110610b51578384fd5b93506080880135925060a0880135610b6881610c5d565b915060c0880135610b7881610c5d565b8091505092959891949750929550565b9485526020850193909352604084019190915260608301521515608082015260a00190565b95865260208601949094526040850192909252606084015215156080830152151560a082015260c00190565b60008219821115610bec57610bec610c47565b500190565b600082610c0c57634e487b7160e01b81526012600452602481fd5b500490565b6000816000190483118215151615610c2b57610c2b610c47565b500290565b600082821015610c4257610c42610c47565b500390565b634e487b7160e01b600052601160045260246000fd5b6001600160a01b0381168114610c7257600080fd5b5056fea2646970667358221220c4466dd2885f329dd275a6d421589e06c89790f8ccc6b332eafddc9a4fb748ed64736f6c63430008040033", "bytecodeSha1": "26468bde6da781b6e3a7d1ca8c851b346eaf6126", "coverageMap": {"statements": {"21": {"FeeCalculator.feesUsd": {"0": [6498, 6546], "1": [6556, 6602], "2": [6612, 6643]}, "FeeCalculator.getNewUtilisation": {"3": [1128, 1158], "4": [1169, 1237]}, "FeeCalculator.feesBinary": {"5": [7803, 7997], "6": [8007, 8055], "7": [8065, 8096]}, "FeeCalculator.feesSuccessOptions": {"8": [4915, 4978], "9": [4988, 5036], "10": [5046, 5077]}, "FeeCalculator.currentImpliedVolatility": {"11": [1759, 1787], "12": [1898, 1958]}, "FeeCalculator.feesKPIBinary": {"13": [9008, 9152], "14": [9162, 9224], "15": [9234, 9265]}, "FeeCalculator.fees": {"16": [3362, 3408]}, "FeeCalculator.getSettlementFee": {"17": [9559, 9615]}, "FeeCalculator.getPremium": {"18": [10240, 10286]}, "FeeCalculator.getPremiumBinary": {"19": [10973, 11033]}}, "22": {}, "25": {}, "13": {}, "4": {}, "5": {}, "6": {}, "24": {}}, "branches": {"21": {"FeeCalculator.getNewUtilisation": {"20": [1136, 1151, true]}, "FeeCalculator.currentImpliedVolatility": {"21": [1864, 1882, false]}}, "22": {}, "25": {}, "13": {}, "4": {}, "5": {}, "6": {}, "24": {}}}, "dependencies": ["ABDKMath64x64", "BufferEpocPoolV2Unintialized", "OpenZeppelin/openzeppelin-contracts@4.3.2/Context", "OpenZeppelin/openzeppelin-contracts@4.3.2/ERC20", "OpenZeppelin/openzeppelin-contracts@4.3.2/IERC20", "OpenZeppelin/openzeppelin-contracts@4.3.2/IERC20Metadata", "OptionConfigUnintialized", "OptionMath"], "offset": [697, 11042], "type": "library", "abi": [{"inputs": [{"internalType": "uint256", "name": "amount", "type": "uint256"}, {"internalType": "contract BufferEpocPoolV2Unintialized", "name": "pool", "type": "BufferEpocPoolV2Unintialized"}, {"internalType": "contract OptionConfigUnintialized", "name": "config", "type": "OptionConfigUnintialized"}], "name": "currentImpliedVolatility", "outputs": [{"internalType": "uint256", "name": "iv", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "period", "type": "uint256"}, {"internalType": "uint256", "name": "amount", "type": "uint256"}, {"internalType": "uint256", "name": "strike", "type": "uint256"}, {"internalType": "enum IBufferOptions.OptionType", "name": "optionType", "type": "IBufferOptions.OptionType"}, {"internalType": "uint256", "name": "currentPrice", "type": "uint256"}, {"internalType": "contract OptionConfigUnintialized", "name": "config", "type": "OptionConfigUnintialized"}, {"internalType": "contract BufferEpocPoolV2Unintialized", "name": "pool", "type": "BufferEpocPoolV2Unintialized"}], "name": "fees", "outputs": [{"internalType": "uint256", "name": "total", "type": "uint256"}, {"internalType": "uint256", "name": "settlementFee", "type": "uint256"}, {"internalType": "uint256", "name": "premium", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "period", "type": "uint256"}, {"internalType": "uint256", "name": "amount", "type": "uint256"}, {"internalType": "uint256", "name": "strike", "type": "uint256"}, {"internalType": "bool", "name": "isYes", "type": "bool"}, {"internalType": "bool", "name": "isAbove", "type": "bool"}, {"internalType": "uint256", "name": "currentPrice", "type": "uint256"}, {"internalType": "contract OptionConfigUnintialized", "name": "config", "type": "OptionConfigUnintialized"}, {"internalType": "contract BufferEpocPoolV2Unintialized", "name": "pool", "type": "BufferEpocPoolV2Unintialized"}], "name": "feesBinary", "outputs": [{"internalType": "uint256", "name": "total", "type": "uint256"}, {"internalType": "uint256", "name": "settlementFee", "type": "uint256"}, {"internalType": "uint256", "name": "premium", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"components": [{"internalType": "uint256", "name": "period", "type": "uint256"}, {"internalType": "uint256", "name": "amount", "type": "uint256"}, {"internalType": "uint256", "name": "strike", "type": "uint256"}, {"internalType": "bool", "name": "isYes", "type": "bool"}, {"internalType": "bool", "name": "isAbove", "type": "bool"}], "internalType": "struct IBufferOptions.OptionDetails", "name": "optionDetails", "type": "tuple"}, {"internalType": "uint256", "name": "currentPrice", "type": "uint256"}, {"internalType": "uint256", "name": "KPI", "type": "uint256"}, {"internalType": "contract OptionConfigUnintialized", "name": "config", "type": "OptionConfigUnintialized"}, {"internalType": "contract BufferEpocPoolV2Unintialized", "name": "pool", "type": "BufferEpocPoolV2Unintialized"}], "name": "feesKPIBinary", "outputs": [{"internalType": "uint256", "name": "total", "type": "uint256"}, {"internalType": "uint256", "name": "settlementFee", "type": "uint256"}, {"internalType": "uint256", "name": "premium", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "period", "type": "uint256"}, {"internalType": "uint256", "name": "amount", "type": "uint256"}, {"internalType": "uint256", "name": "strike", "type": "uint256"}, {"internalType": "enum IBufferOptions.OptionType", "name": "optionType", "type": "IBufferOptions.OptionType"}, {"internalType": "uint256", "name": "currentPrice", "type": "uint256"}, {"internalType": "contract OptionConfigUnintialized", "name": "config", "type": "OptionConfigUnintialized"}, {"internalType": "contract BufferEpocPoolV2Unintialized", "name": "pool", "type": "BufferEpocPoolV2Unintialized"}], "name": "feesSuccessOptions", "outputs": [{"internalType": "uint256", "name": "total", "type": "uint256"}, {"internalType": "uint256", "name": "settlementFee", "type": "uint256"}, {"internalType": "uint256", "name": "premium", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "period", "type": "uint256"}, {"internalType": "uint256", "name": "amount", "type": "uint256"}, {"internalType": "uint256", "name": "strike", "type": "uint256"}, {"internalType": "enum IBufferOptions.OptionType", "name": "optionType", "type": "IBufferOptions.OptionType"}, {"internalType": "uint256", "name": "currentPrice", "type": "uint256"}, {"internalType": "contract OptionConfigUnintialized", "name": "config", "type": "OptionConfigUnintialized"}, {"internalType": "contract BufferEpocPoolV2Unintialized", "name": "pool", "type": "BufferEpocPoolV2Unintialized"}], "name": "feesUsd", "outputs": [{"internalType": "uint256", "name": "total", "type": "uint256"}, {"internalType": "uint256", "name": "settlementFee", "type": "uint256"}, {"internalType": "uint256", "name": "premium", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "amount", "type": "uint256"}, {"internalType": "contract BufferEpocPoolV2Unintialized", "name": "pool", "type": "BufferEpocPoolV2Unintialized"}], "name": "getNewUtilisation", "outputs": [{"internalType": "uint256", "name": "utilization", "type": "uint256"}], "stateMutability": "view", "type": "function"}], "ast": {"absolutePath": "contracts/Libraries/OptionFeeCalculator.sol", "exportedSymbols": {"ABDKMath64x64": [16627], "AccessControl": [17435], "AggregatorV3Interface": [13551], "BufferEpocPoolV2Unintialized": [7540], "Context": [13020], "ERC165": [19278], "ERC20": [4597], "FeeCalculator": [5123], "IAccessControl": [19051], "IBufferOptions": [13411], "IERC165": [19748], "IERC20": [13098], "IERC20Metadata": [13123], "ILiquidityPool": [13255], "INFTCore": [13651], "INFTReceiver": [13427], "IOptionWindowCreator": [13500], "IOptionsConfig": [13480], "IPancakePair": [13135], "IPriceProvider": [13590], "ISlidingWindowOracle": [13712], "ISlidingWindowOracleV1": [13693], "ITwapPriceProvider": [13732], "OptionConfigUnintialized": [6326], "OptionMath": [17128], "Ownable": [4011], "Strings": [19254]}, "id": 5124, "license": "BUSL-1.1", "nodeType": "SourceUnit", "nodes": [{"id": 4599, "literals": ["solidity", "^", "0.8", ".0"], "nodeType": "PragmaDirective", "src": "38:23:21"}, {"absolutePath": "contracts/Libraries/OptionMath.sol", "file": "../Libraries/OptionMath.sol", "id": 4600, "nameLocation": "-1:-1:-1", "nodeType": "ImportDirective", "scope": 5124, "sourceUnit": 17129, "src": "513:37:21", "symbolAliases": [], "unitAlias": ""}, {"absolutePath": "contracts/OptionsUtils/OptionConfigUnintialized.sol", "file": "../OptionsUtils/OptionConfigUnintialized.sol", "id": 4601, "nameLocation": "-1:-1:-1", "nodeType": "ImportDirective", "scope": 5124, "sourceUnit": 6327, "src": "551:54:21", "symbolAliases": [], "unitAlias": ""}, {"absolutePath": "contracts/Interfaces/Interfaces.sol", "file": "../Interfaces/Interfaces.sol", "id": 4602, "nameLocation": "-1:-1:-1", "nodeType": "ImportDirective", "scope": 5124, "sourceUnit": 13733, "src": "606:38:21", "symbolAliases": [], "unitAlias": ""}, {"absolutePath": "contracts/Pool/BufferEpocPoolV2Unintialized.sol", "file": "../Pool/BufferEpocPoolV2Unintialized.sol", "id": 4603, "nameLocation": "-1:-1:-1", "nodeType": "ImportDirective", "scope": 5124, "sourceUnit": 7541, "src": "645:50:21", "symbolAliases": [], "unitAlias": ""}, {"abstract": false, "baseContracts": [], "contractDependencies": [], "contractKind": "library", "fullyImplemented": true, "id": 5123, "linearizedBaseContracts": [5123], "name": "FeeCalculator", "nameLocation": "705:13:21", "nodeType": "ContractDefinition", "nodes": [{"body": {"id": 4641, "nodeType": "Block", "src": "1061:183:21", "statements": [{"assignments": [4615], "declarations": [{"constant": false, "id": 4615, "mutability": "mutable", "name": "poolBalance", "nameLocation": "1079:11:21", "nodeType": "VariableDeclaration", "scope": 4641, "src": "1071:19:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4614, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "1071:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "id": 4619, "initialValue": {"arguments": [], "expression": {"argumentTypes": [], "expression": {"id": 4616, "name": "pool", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4609, "src": "1093:4:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7540", "typeString": "contract BufferEpocPoolV2Unintialized"}}, "id": 4617, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "totalTokenXBalance", "nodeType": "MemberAccess", "referencedDeclaration": 7503, "src": "1093:23:21", "typeDescriptions": {"typeIdentifier": "t_function_external_view$__$returns$_t_uint256_$", "typeString": "function () view external returns (uint256)"}}, "id": 4618, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "1093:25:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "VariableDeclarationStatement", "src": "1071:47:21"}, {"expression": {"arguments": [{"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4623, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4621, "name": "poolBalance", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4615, "src": "1136:11:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": ">", "rightExpression": {"hexValue": "30", "id": 4622, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "1150:1:21", "typeDescriptions": {"typeIdentifier": "t_rational_0_by_1", "typeString": "int_const 0"}, "value": "0"}, "src": "1136:15:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}, {"hexValue": "4f38", "id": 4624, "isConstant": false, "isLValue": false, "isPure": true, "kind": "string", "lValueRequested": false, "nodeType": "Literal", "src": "1153:4:21", "typeDescriptions": {"typeIdentifier": "t_stringliteral_694eb040654db27d285bc1da6a2956b58ad679956ab6c2a13bdd9499d1faacb7", "typeString": "literal_string \"O8\""}, "value": "O8"}], "expression": {"argumentTypes": [{"typeIdentifier": "t_bool", "typeString": "bool"}, {"typeIdentifier": "t_stringliteral_694eb040654db27d285bc1da6a2956b58ad679956ab6c2a13bdd9499d1faacb7", "typeString": "literal_string \"O8\""}], "id": 4620, "name": "require", "nodeType": "Identifier", "overloadedDeclarations": [-18, -18], "referencedDeclaration": -18, "src": "1128:7:21", "typeDescriptions": {"typeIdentifier": "t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$", "typeString": "function (bool,string memory) pure"}}, "id": 4625, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "1128:30:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_tuple$__$", "typeString": "tuple()"}}, "id": 4626, "nodeType": "ExpressionStatement", "src": "1128:30:21"}, {"expression": {"id": 4639, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4627, "name": "utilization", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4612, "src": "1169:11:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4638, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"components": [{"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4635, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"components": [{"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4632, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"arguments": [], "expression": {"argumentTypes": [], "expression": {"id": 4628, "name": "pool", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4609, "src": "1185:4:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7540", "typeString": "contract BufferEpocPoolV2Unintialized"}}, "id": 4629, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "lockedAmount", "nodeType": "MemberAccess", "referencedDeclaration": 6352, "src": "1185:17:21", "typeDescriptions": {"typeIdentifier": "t_function_external_view$__$returns$_t_uint256_$", "typeString": "function () view external returns (uint256)"}}, "id": 4630, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "1185:19:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "+", "rightExpression": {"id": 4631, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4606, "src": "1207:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "1185:28:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "id": 4633, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "1184:30:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "*", "rightExpression": {"hexValue": "3130306538", "id": 4634, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "1217:5:21", "typeDescriptions": {"typeIdentifier": "t_rational_10000000000_by_1", "typeString": "int_const 10000000000"}, "value": "100e8"}, "src": "1184:38:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "id": 4636, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "1183:40:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "/", "rightExpression": {"id": 4637, "name": "poolBalance", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4615, "src": "1226:11:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "1183:54:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "1169:68:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4640, "nodeType": "ExpressionStatement", "src": "1169:68:21"}]}, "documentation": {"id": 4604, "nodeType": "StructuredDocumentation", "src": "725:189:21", "text": " @notice Calculate the current Utilisation\n @param amount Option amount\n @param pool The pool selling the option\n @return utilization Current utilization"}, "functionSelector": "4fe8c640", "id": 4642, "implemented": true, "kind": "function", "modifiers": [], "name": "getNewUtilisation", "nameLocation": "928:17:21", "nodeType": "FunctionDefinition", "parameters": {"id": 4610, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4606, "mutability": "mutable", "name": "amount", "nameLocation": "963:6:21", "nodeType": "VariableDeclaration", "scope": 4642, "src": "955:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4605, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "955:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4609, "mutability": "mutable", "name": "pool", "nameLocation": "1008:4:21", "nodeType": "VariableDeclaration", "scope": 4642, "src": "979:33:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7540", "typeString": "contract BufferEpocPoolV2Unintialized"}, "typeName": {"id": 4608, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4607, "name": "BufferEpocPoolV2Unintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 7540, "src": "979:28:21"}, "referencedDeclaration": 7540, "src": "979:28:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7540", "typeString": "contract BufferEpocPoolV2Unintialized"}}, "visibility": "internal"}], "src": "945:73:21"}, "returnParameters": {"id": 4613, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4612, "mutability": "mutable", "name": "utilization", "nameLocation": "1048:11:21", "nodeType": "VariableDeclaration", "scope": 4642, "src": "1040:19:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4611, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "1040:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "src": "1039:21:21"}, "scope": 5123, "src": "919:325:21", "stateMutability": "view", "virtual": false, "visibility": "public"}, {"body": {"id": 4688, "nodeType": "Block", "src": "1749:226:21", "statements": [{"expression": {"id": 4660, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4656, "name": "iv", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4654, "src": "1759:2:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"arguments": [], "expression": {"argumentTypes": [], "expression": {"id": 4657, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4651, "src": "1764:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}}, "id": 4658, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "impliedVolRate", "nodeType": "MemberAccess", "referencedDeclaration": 6023, "src": "1764:21:21", "typeDescriptions": {"typeIdentifier": "t_function_external_view$__$returns$_t_uint256_$", "typeString": "function () view external returns (uint256)"}}, "id": 4659, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "1764:23:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "1759:28:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4661, "nodeType": "ExpressionStatement", "src": "1759:28:21"}, {"assignments": [4663], "declarations": [{"constant": false, "id": 4663, "mutability": "mutable", "name": "utilization", "nameLocation": "1805:11:21", "nodeType": "VariableDeclaration", "scope": 4688, "src": "1797:19:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4662, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "1797:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "id": 4668, "initialValue": {"arguments": [{"id": 4665, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4645, "src": "1837:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4666, "name": "pool", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4648, "src": "1845:4:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7540", "typeString": "contract BufferEpocPoolV2Unintialized"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7540", "typeString": "contract BufferEpocPoolV2Unintialized"}], "id": 4664, "name": "getNewUtilisation", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4642, "src": "1819:17:21", "typeDescriptions": {"typeIdentifier": "t_function_internal_view$_t_uint256_$_t_contract$_BufferEpocPoolV2Unintialized_$7540_$returns$_t_uint256_$", "typeString": "function (uint256,contract BufferEpocPoolV2Unintialized) view returns (uint256)"}}, "id": 4667, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "1819:31:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "VariableDeclarationStatement", "src": "1797:53:21"}, {"condition": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4671, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4669, "name": "utilization", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4663, "src": "1864:11:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": ">", "rightExpression": {"hexValue": "34306538", "id": 4670, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "1878:4:21", "typeDescriptions": {"typeIdentifier": "t_rational_4000000000_by_1", "typeString": "int_const 4000000000"}, "value": "40e8"}, "src": "1864:18:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}, "id": 4687, "nodeType": "IfStatement", "src": "1860:109:21", "trueBody": {"id": 4686, "nodeType": "Block", "src": "1884:85:21", "statements": [{"expression": {"id": 4684, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4672, "name": "iv", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4654, "src": "1898:2:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "+=", "rightHandSide": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4683, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"components": [{"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4678, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4673, "name": "iv", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4654, "src": "1905:2:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "*", "rightExpression": {"components": [{"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4676, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4674, "name": "utilization", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4663, "src": "1911:11:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "-", "rightExpression": {"hexValue": "34306538", "id": 4675, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "1925:4:21", "typeDescriptions": {"typeIdentifier": "t_rational_4000000000_by_1", "typeString": "int_const 4000000000"}, "value": "40e8"}, "src": "1911:18:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "id": 4677, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "1910:20:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "1905:25:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "id": 4679, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "1904:27:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "/", "rightExpression": {"arguments": [], "expression": {"argumentTypes": [], "expression": {"id": 4680, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4651, "src": "1934:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}}, "id": 4681, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "utilizationRate", "nodeType": "MemberAccess", "referencedDeclaration": 6038, "src": "1934:22:21", "typeDescriptions": {"typeIdentifier": "t_function_external_view$__$returns$_t_uint256_$", "typeString": "function () view external returns (uint256)"}}, "id": 4682, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "1934:24:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "1904:54:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "1898:60:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4685, "nodeType": "ExpressionStatement", "src": "1898:60:21"}]}}]}, "documentation": {"id": 4643, "nodeType": "StructuredDocumentation", "src": "1250:313:21", "text": " @notice Calculate the Utilisation adjusted ImpliedVol for the pool according to https://www.desmos.com/calculator/xdmhn97opd\n @param amount Option amount\n @param pool The pool selling the option\n @param config The option configuration\n @return iv The adjusted ImpliedVol"}, "functionSelector": "d69bde77", "id": 4689, "implemented": true, "kind": "function", "modifiers": [], "name": "currentImpliedVolatility", "nameLocation": "1577:24:21", "nodeType": "FunctionDefinition", "parameters": {"id": 4652, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4645, "mutability": "mutable", "name": "amount", "nameLocation": "1619:6:21", "nodeType": "VariableDeclaration", "scope": 4689, "src": "1611:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4644, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "1611:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4648, "mutability": "mutable", "name": "pool", "nameLocation": "1664:4:21", "nodeType": "VariableDeclaration", "scope": 4689, "src": "1635:33:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7540", "typeString": "contract BufferEpocPoolV2Unintialized"}, "typeName": {"id": 4647, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4646, "name": "BufferEpocPoolV2Unintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 7540, "src": "1635:28:21"}, "referencedDeclaration": 7540, "src": "1635:28:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7540", "typeString": "contract BufferEpocPoolV2Unintialized"}}, "visibility": "internal"}, {"constant": false, "id": 4651, "mutability": "mutable", "name": "config", "nameLocation": "1703:6:21", "nodeType": "VariableDeclaration", "scope": 4689, "src": "1678:31:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}, "typeName": {"id": 4650, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4649, "name": "OptionConfigUnintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 6326, "src": "1678:24:21"}, "referencedDeclaration": 6326, "src": "1678:24:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}}, "visibility": "internal"}], "src": "1601:114:21"}, "returnParameters": {"id": 4655, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4654, "mutability": "mutable", "name": "iv", "nameLocation": "1745:2:21", "nodeType": "VariableDeclaration", "scope": 4689, "src": "1737:10:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4653, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "1737:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "src": "1736:12:21"}, "scope": 5123, "src": "1568:407:21", "stateMutability": "view", "virtual": false, "visibility": "public"}, {"body": {"id": 4757, "nodeType": "Block", "src": "3032:482:21", "statements": [{"assignments": [4717], "declarations": [{"constant": false, "id": 4717, "mutability": "mutable", "name": "usdPremium", "nameLocation": "3117:10:21", "nodeType": "VariableDeclaration", "scope": 4757, "src": "3109:18:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4716, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "3109:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "id": 4734, "initialValue": {"arguments": [{"arguments": [{"id": 4721, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4694, "src": "3197:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4722, "name": "pool", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4707, "src": "3205:4:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7540", "typeString": "contract BufferEpocPoolV2Unintialized"}}, {"id": 4723, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4704, "src": "3211:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7540", "typeString": "contract BufferEpocPoolV2Unintialized"}, {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}], "id": 4720, "name": "currentImpliedVolatility", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4689, "src": "3172:24:21", "typeDescriptions": {"typeIdentifier": "t_function_internal_view$_t_uint256_$_t_contract$_BufferEpocPoolV2Unintialized_$7540_$_t_contract$_OptionConfigUnintialized_$6326_$returns$_t_uint256_$", "typeString": "function (uint256,contract BufferEpocPoolV2Unintialized,contract OptionConfigUnintialized) view returns (uint256)"}}, "id": 4724, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "3172:46:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4725, "name": "strike", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4696, "src": "3232:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4726, "name": "currentPrice", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4701, "src": "3252:12:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4727, "name": "period", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4692, "src": "3278:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"commonType": {"typeIdentifier": "t_enum$_OptionType_$13306", "typeString": "enum IBufferOptions.OptionType"}, "id": 4732, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4728, "name": "optionType", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4699, "src": "3298:10:21", "typeDescriptions": {"typeIdentifier": "t_enum$_OptionType_$13306", "typeString": "enum IBufferOptions.OptionType"}}, "nodeType": "BinaryOperation", "operator": "==", "rightExpression": {"expression": {"expression": {"id": 4729, "name": "IBufferOptions", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 13411, "src": "3312:14:21", "typeDescriptions": {"typeIdentifier": "t_type$_t_contract$_IBufferOptions_$13411_$", "typeString": "type(contract IBufferOptions)"}}, "id": 4730, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "OptionType", "nodeType": "MemberAccess", "referencedDeclaration": 13306, "src": "3312:25:21", "typeDescriptions": {"typeIdentifier": "t_type$_t_enum$_OptionType_$13306_$", "typeString": "type(enum IBufferOptions.OptionType)"}}, "id": 4731, "isConstant": false, "isLValue": false, "isPure": true, "lValueRequested": false, "memberName": "Call", "nodeType": "MemberAccess", "referencedDeclaration": 13305, "src": "3312:30:21", "typeDescriptions": {"typeIdentifier": "t_enum$_OptionType_$13306", "typeString": "enum IBufferOptions.OptionType"}}, "src": "3298:44:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_bool", "typeString": "bool"}], "expression": {"id": 4718, "name": "OptionMath", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 17128, "src": "3130:10:21", "typeDescriptions": {"typeIdentifier": "t_type$_t_contract$_OptionMath_$17128_$", "typeString": "type(library OptionMath)"}}, "id": 4719, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "blackScholesPrice", "nodeType": "MemberAccess", "referencedDeclaration": 16832, "src": "3130:28:21", "typeDescriptions": {"typeIdentifier": "t_function_delegatecall_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_bool_$returns$_t_uint256_$", "typeString": "function (uint256,uint256,uint256,uint256,bool) pure returns (uint256)"}}, "id": 4733, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "3130:222:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "VariableDeclarationStatement", "src": "3109:243:21"}, {"expression": {"id": 4742, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4735, "name": "premium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4714, "src": "3362:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4741, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"components": [{"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4738, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4736, "name": "usdPremium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4717, "src": "3373:10:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "*", "rightExpression": {"id": 4737, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4694, "src": "3386:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "3373:19:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "id": 4739, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "3372:21:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "/", "rightExpression": {"id": 4740, "name": "currentPrice", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4701, "src": "3396:12:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "3372:36:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "3362:46:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4743, "nodeType": "ExpressionStatement", "src": "3362:46:21"}, {"expression": {"id": 4749, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4744, "name": "settlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4712, "src": "3418:13:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"arguments": [{"id": 4746, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4694, "src": "3451:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4747, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4704, "src": "3459:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}], "id": 4745, "name": "getSettlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5023, "src": "3434:16:21", "typeDescriptions": {"typeIdentifier": "t_function_internal_view$_t_uint256_$_t_contract$_OptionConfigUnintialized_$6326_$returns$_t_uint256_$", "typeString": "function (uint256,contract OptionConfigUnintialized) view returns (uint256)"}}, "id": 4748, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "3434:32:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "3418:48:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4750, "nodeType": "ExpressionStatement", "src": "3418:48:21"}, {"expression": {"id": 4755, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4751, "name": "total", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4710, "src": "3476:5:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4754, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4752, "name": "settlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4712, "src": "3484:13:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "+", "rightExpression": {"id": 4753, "name": "premium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4714, "src": "3500:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "3484:23:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "3476:31:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4756, "nodeType": "ExpressionStatement", "src": "3476:31:21"}]}, "documentation": {"id": 4690, "nodeType": "StructuredDocumentation", "src": "1981:644:21", "text": " @notice Used for getting the price for Options in tokenX\n @param period Option period in seconds (1 days <= period <= 4 weeks)\n @param amount Option amount\n @param strike Strike price of the option\n @param optionType Type of the Option\n @param currentPrice Current price of the underlying asset\n @param config The option configuration\n @param pool The pool selling the option\n @return total Total price to be paid\n @return settlementFee Amount to be distributed to the Buffer token holders\n @return premium Amount that covers the price difference in the ITM options"}, "functionSelector": "fbef1d55", "id": 4758, "implemented": true, "kind": "function", "modifiers": [], "name": "fees", "nameLocation": "2639:4:21", "nodeType": "FunctionDefinition", "parameters": {"id": 4708, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4692, "mutability": "mutable", "name": "period", "nameLocation": "2661:6:21", "nodeType": "VariableDeclaration", "scope": 4758, "src": "2653:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4691, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "2653:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4694, "mutability": "mutable", "name": "amount", "nameLocation": "2685:6:21", "nodeType": "VariableDeclaration", "scope": 4758, "src": "2677:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4693, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "2677:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4696, "mutability": "mutable", "name": "strike", "nameLocation": "2709:6:21", "nodeType": "VariableDeclaration", "scope": 4758, "src": "2701:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4695, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "2701:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4699, "mutability": "mutable", "name": "optionType", "nameLocation": "2751:10:21", "nodeType": "VariableDeclaration", "scope": 4758, "src": "2725:36:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_enum$_OptionType_$13306", "typeString": "enum IBufferOptions.OptionType"}, "typeName": {"id": 4698, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4697, "name": "IBufferOptions.OptionType", "nodeType": "IdentifierPath", "referencedDeclaration": 13306, "src": "2725:25:21"}, "referencedDeclaration": 13306, "src": "2725:25:21", "typeDescriptions": {"typeIdentifier": "t_enum$_OptionType_$13306", "typeString": "enum IBufferOptions.OptionType"}}, "visibility": "internal"}, {"constant": false, "id": 4701, "mutability": "mutable", "name": "currentPrice", "nameLocation": "2779:12:21", "nodeType": "VariableDeclaration", "scope": 4758, "src": "2771:20:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4700, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "2771:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4704, "mutability": "mutable", "name": "config", "nameLocation": "2826:6:21", "nodeType": "VariableDeclaration", "scope": 4758, "src": "2801:31:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}, "typeName": {"id": 4703, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4702, "name": "OptionConfigUnintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 6326, "src": "2801:24:21"}, "referencedDeclaration": 6326, "src": "2801:24:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}}, "visibility": "internal"}, {"constant": false, "id": 4707, "mutability": "mutable", "name": "pool", "nameLocation": "2871:4:21", "nodeType": "VariableDeclaration", "scope": 4758, "src": "2842:33:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7540", "typeString": "contract BufferEpocPoolV2Unintialized"}, "typeName": {"id": 4706, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4705, "name": "BufferEpocPoolV2Unintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 7540, "src": "2842:28:21"}, "referencedDeclaration": 7540, "src": "2842:28:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7540", "typeString": "contract BufferEpocPoolV2Unintialized"}}, "visibility": "internal"}], "src": "2643:238:21"}, "returnParameters": {"id": 4715, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4710, "mutability": "mutable", "name": "total", "nameLocation": "2948:5:21", "nodeType": "VariableDeclaration", "scope": 4758, "src": "2940:13:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4709, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "2940:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4712, "mutability": "mutable", "name": "settlementFee", "nameLocation": "2975:13:21", "nodeType": "VariableDeclaration", "scope": 4758, "src": "2967:21:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4711, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "2967:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4714, "mutability": "mutable", "name": "premium", "nameLocation": "3010:7:21", "nodeType": "VariableDeclaration", "scope": 4758, "src": "3002:15:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4713, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "3002:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "src": "2926:101:21"}, "scope": 5123, "src": "2630:884:21", "stateMutability": "view", "virtual": false, "visibility": "public"}, {"body": {"id": 4829, "nodeType": "Block", "src": "4585:499:21", "statements": [{"assignments": [4786], "declarations": [{"constant": false, "id": 4786, "mutability": "mutable", "name": "usdPremium", "nameLocation": "4670:10:21", "nodeType": "VariableDeclaration", "scope": 4829, "src": "4662:18:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4785, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4662:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "id": 4803, "initialValue": {"arguments": [{"arguments": [{"id": 4790, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4763, "src": "4750:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4791, "name": "pool", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4776, "src": "4758:4:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7540", "typeString": "contract BufferEpocPoolV2Unintialized"}}, {"id": 4792, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4773, "src": "4764:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7540", "typeString": "contract BufferEpocPoolV2Unintialized"}, {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}], "id": 4789, "name": "currentImpliedVolatility", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4689, "src": "4725:24:21", "typeDescriptions": {"typeIdentifier": "t_function_internal_view$_t_uint256_$_t_contract$_BufferEpocPoolV2Unintialized_$7540_$_t_contract$_OptionConfigUnintialized_$6326_$returns$_t_uint256_$", "typeString": "function (uint256,contract BufferEpocPoolV2Unintialized,contract OptionConfigUnintialized) view returns (uint256)"}}, "id": 4793, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "4725:46:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4794, "name": "strike", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4765, "src": "4785:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4795, "name": "currentPrice", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4770, "src": "4805:12:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4796, "name": "period", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4761, "src": "4831:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"commonType": {"typeIdentifier": "t_enum$_OptionType_$13306", "typeString": "enum IBufferOptions.OptionType"}, "id": 4801, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4797, "name": "optionType", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4768, "src": "4851:10:21", "typeDescriptions": {"typeIdentifier": "t_enum$_OptionType_$13306", "typeString": "enum IBufferOptions.OptionType"}}, "nodeType": "BinaryOperation", "operator": "==", "rightExpression": {"expression": {"expression": {"id": 4798, "name": "IBufferOptions", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 13411, "src": "4865:14:21", "typeDescriptions": {"typeIdentifier": "t_type$_t_contract$_IBufferOptions_$13411_$", "typeString": "type(contract IBufferOptions)"}}, "id": 4799, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "OptionType", "nodeType": "MemberAccess", "referencedDeclaration": 13306, "src": "4865:25:21", "typeDescriptions": {"typeIdentifier": "t_type$_t_enum$_OptionType_$13306_$", "typeString": "type(enum IBufferOptions.OptionType)"}}, "id": 4800, "isConstant": false, "isLValue": false, "isPure": true, "lValueRequested": false, "memberName": "Call", "nodeType": "MemberAccess", "referencedDeclaration": 13305, "src": "4865:30:21", "typeDescriptions": {"typeIdentifier": "t_enum$_OptionType_$13306", "typeString": "enum IBufferOptions.OptionType"}}, "src": "4851:44:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_bool", "typeString": "bool"}], "expression": {"id": 4787, "name": "OptionMath", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 17128, "src": "4683:10:21", "typeDescriptions": {"typeIdentifier": "t_type$_t_contract$_OptionMath_$17128_$", "typeString": "type(library OptionMath)"}}, "id": 4788, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "blackScholesPrice", "nodeType": "MemberAccess", "referencedDeclaration": 16832, "src": "4683:28:21", "typeDescriptions": {"typeIdentifier": "t_function_delegatecall_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_bool_$returns$_t_uint256_$", "typeString": "function (uint256,uint256,uint256,uint256,bool) pure returns (uint256)"}}, "id": 4802, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "4683:222:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "VariableDeclarationStatement", "src": "4662:243:21"}, {"expression": {"id": 4814, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4804, "name": "premium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4783, "src": "4915:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4813, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"components": [{"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4810, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"components": [{"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4807, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4805, "name": "usdPremium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4786, "src": "4927:10:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "+", "rightExpression": {"id": 4806, "name": "currentPrice", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4770, "src": "4940:12:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "4927:25:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "id": 4808, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "4926:27:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "*", "rightExpression": {"id": 4809, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4763, "src": "4956:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "4926:36:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "id": 4811, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "4925:38:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "/", "rightExpression": {"id": 4812, "name": "currentPrice", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4770, "src": "4966:12:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "4925:53:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "4915:63:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4815, "nodeType": "ExpressionStatement", "src": "4915:63:21"}, {"expression": {"id": 4821, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4816, "name": "settlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4781, "src": "4988:13:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"arguments": [{"id": 4818, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4763, "src": "5021:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4819, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4773, "src": "5029:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}], "id": 4817, "name": "getSettlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5023, "src": "5004:16:21", "typeDescriptions": {"typeIdentifier": "t_function_internal_view$_t_uint256_$_t_contract$_OptionConfigUnintialized_$6326_$returns$_t_uint256_$", "typeString": "function (uint256,contract OptionConfigUnintialized) view returns (uint256)"}}, "id": 4820, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "5004:32:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "4988:48:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4822, "nodeType": "ExpressionStatement", "src": "4988:48:21"}, {"expression": {"id": 4827, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4823, "name": "total", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4779, "src": "5046:5:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4826, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4824, "name": "settlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4781, "src": "5054:13:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "+", "rightExpression": {"id": 4825, "name": "premium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4783, "src": "5070:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "5054:23:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "5046:31:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4828, "nodeType": "ExpressionStatement", "src": "5046:31:21"}]}, "documentation": {"id": 4759, "nodeType": "StructuredDocumentation", "src": "3520:644:21", "text": " @notice Used for getting the price for Options in tokenX\n @param period Option period in seconds (1 days <= period <= 4 weeks)\n @param amount Option amount\n @param strike Strike price of the option\n @param optionType Type of the Option\n @param currentPrice Current price of the underlying asset\n @param config The option configuration\n @param pool The pool selling the option\n @return total Total price to be paid\n @return settlementFee Amount to be distributed to the Buffer token holders\n @return premium Amount that covers the price difference in the ITM options"}, "functionSelector": "c04a1afe", "id": 4830, "implemented": true, "kind": "function", "modifiers": [], "name": "feesSuccessOptions", "nameLocation": "4178:18:21", "nodeType": "FunctionDefinition", "parameters": {"id": 4777, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4761, "mutability": "mutable", "name": "period", "nameLocation": "4214:6:21", "nodeType": "VariableDeclaration", "scope": 4830, "src": "4206:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4760, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4206:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4763, "mutability": "mutable", "name": "amount", "nameLocation": "4238:6:21", "nodeType": "VariableDeclaration", "scope": 4830, "src": "4230:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4762, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4230:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4765, "mutability": "mutable", "name": "strike", "nameLocation": "4262:6:21", "nodeType": "VariableDeclaration", "scope": 4830, "src": "4254:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4764, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4254:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4768, "mutability": "mutable", "name": "optionType", "nameLocation": "4304:10:21", "nodeType": "VariableDeclaration", "scope": 4830, "src": "4278:36:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_enum$_OptionType_$13306", "typeString": "enum IBufferOptions.OptionType"}, "typeName": {"id": 4767, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4766, "name": "IBufferOptions.OptionType", "nodeType": "IdentifierPath", "referencedDeclaration": 13306, "src": "4278:25:21"}, "referencedDeclaration": 13306, "src": "4278:25:21", "typeDescriptions": {"typeIdentifier": "t_enum$_OptionType_$13306", "typeString": "enum IBufferOptions.OptionType"}}, "visibility": "internal"}, {"constant": false, "id": 4770, "mutability": "mutable", "name": "currentPrice", "nameLocation": "4332:12:21", "nodeType": "VariableDeclaration", "scope": 4830, "src": "4324:20:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4769, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4324:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4773, "mutability": "mutable", "name": "config", "nameLocation": "4379:6:21", "nodeType": "VariableDeclaration", "scope": 4830, "src": "4354:31:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}, "typeName": {"id": 4772, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4771, "name": "OptionConfigUnintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 6326, "src": "4354:24:21"}, "referencedDeclaration": 6326, "src": "4354:24:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}}, "visibility": "internal"}, {"constant": false, "id": 4776, "mutability": "mutable", "name": "pool", "nameLocation": "4424:4:21", "nodeType": "VariableDeclaration", "scope": 4830, "src": "4395:33:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7540", "typeString": "contract BufferEpocPoolV2Unintialized"}, "typeName": {"id": 4775, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4774, "name": "BufferEpocPoolV2Unintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 7540, "src": "4395:28:21"}, "referencedDeclaration": 7540, "src": "4395:28:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7540", "typeString": "contract BufferEpocPoolV2Unintialized"}}, "visibility": "internal"}], "src": "4196:238:21"}, "returnParameters": {"id": 4784, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4779, "mutability": "mutable", "name": "total", "nameLocation": "4501:5:21", "nodeType": "VariableDeclaration", "scope": 4830, "src": "4493:13:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4778, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4493:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4781, "mutability": "mutable", "name": "settlementFee", "nameLocation": "4528:13:21", "nodeType": "VariableDeclaration", "scope": 4830, "src": "4520:21:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4780, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4520:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4783, "mutability": "mutable", "name": "premium", "nameLocation": "4563:7:21", "nodeType": "VariableDeclaration", "scope": 4830, "src": "4555:15:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4782, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4555:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "src": "4479:101:21"}, "scope": 5123, "src": "4169:915:21", "stateMutability": "view", "virtual": false, "visibility": "public"}, {"body": {"id": 4898, "nodeType": "Block", "src": "6162:488:21", "statements": [{"assignments": [4858], "declarations": [{"constant": false, "id": 4858, "mutability": "mutable", "name": "usdPremium", "nameLocation": "6253:10:21", "nodeType": "VariableDeclaration", "scope": 4898, "src": "6245:18:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4857, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "6245:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "id": 4875, "initialValue": {"arguments": [{"arguments": [{"id": 4862, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4835, "src": "6333:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4863, "name": "pool", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4848, "src": "6341:4:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7540", "typeString": "contract BufferEpocPoolV2Unintialized"}}, {"id": 4864, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4845, "src": "6347:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7540", "typeString": "contract BufferEpocPoolV2Unintialized"}, {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}], "id": 4861, "name": "currentImpliedVolatility", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4689, "src": "6308:24:21", "typeDescriptions": {"typeIdentifier": "t_function_internal_view$_t_uint256_$_t_contract$_BufferEpocPoolV2Unintialized_$7540_$_t_contract$_OptionConfigUnintialized_$6326_$returns$_t_uint256_$", "typeString": "function (uint256,contract BufferEpocPoolV2Unintialized,contract OptionConfigUnintialized) view returns (uint256)"}}, "id": 4865, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "6308:46:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4866, "name": "strike", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4837, "src": "6368:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4867, "name": "currentPrice", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4842, "src": "6388:12:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4868, "name": "period", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4833, "src": "6414:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"commonType": {"typeIdentifier": "t_enum$_OptionType_$13306", "typeString": "enum IBufferOptions.OptionType"}, "id": 4873, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4869, "name": "optionType", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4840, "src": "6434:10:21", "typeDescriptions": {"typeIdentifier": "t_enum$_OptionType_$13306", "typeString": "enum IBufferOptions.OptionType"}}, "nodeType": "BinaryOperation", "operator": "==", "rightExpression": {"expression": {"expression": {"id": 4870, "name": "IBufferOptions", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 13411, "src": "6448:14:21", "typeDescriptions": {"typeIdentifier": "t_type$_t_contract$_IBufferOptions_$13411_$", "typeString": "type(contract IBufferOptions)"}}, "id": 4871, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "OptionType", "nodeType": "MemberAccess", "referencedDeclaration": 13306, "src": "6448:25:21", "typeDescriptions": {"typeIdentifier": "t_type$_t_enum$_OptionType_$13306_$", "typeString": "type(enum IBufferOptions.OptionType)"}}, "id": 4872, "isConstant": false, "isLValue": false, "isPure": true, "lValueRequested": false, "memberName": "Call", "nodeType": "MemberAccess", "referencedDeclaration": 13305, "src": "6448:30:21", "typeDescriptions": {"typeIdentifier": "t_enum$_OptionType_$13306", "typeString": "enum IBufferOptions.OptionType"}}, "src": "6434:44:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_bool", "typeString": "bool"}], "expression": {"id": 4859, "name": "OptionMath", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 17128, "src": "6266:10:21", "typeDescriptions": {"typeIdentifier": "t_type$_t_contract$_OptionMath_$17128_$", "typeString": "type(library OptionMath)"}}, "id": 4860, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "blackScholesPrice", "nodeType": "MemberAccess", "referencedDeclaration": 16832, "src": "6266:28:21", "typeDescriptions": {"typeIdentifier": "t_function_delegatecall_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_bool_$returns$_t_uint256_$", "typeString": "function (uint256,uint256,uint256,uint256,bool) pure returns (uint256)"}}, "id": 4874, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "6266:222:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "VariableDeclarationStatement", "src": "6245:243:21"}, {"expression": {"id": 4881, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4876, "name": "settlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4853, "src": "6498:13:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"arguments": [{"id": 4878, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4835, "src": "6531:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4879, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4845, "src": "6539:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}], "id": 4877, "name": "getSettlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5023, "src": "6514:16:21", "typeDescriptions": {"typeIdentifier": "t_function_internal_view$_t_uint256_$_t_contract$_OptionConfigUnintialized_$6326_$returns$_t_uint256_$", "typeString": "function (uint256,contract OptionConfigUnintialized) view returns (uint256)"}}, "id": 4880, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "6514:32:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "6498:48:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4882, "nodeType": "ExpressionStatement", "src": "6498:48:21"}, {"expression": {"id": 4890, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4883, "name": "premium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4855, "src": "6556:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4889, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"components": [{"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4886, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4884, "name": "usdPremium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4858, "src": "6567:10:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "*", "rightExpression": {"id": 4885, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4835, "src": "6580:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "6567:19:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "id": 4887, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "6566:21:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "/", "rightExpression": {"id": 4888, "name": "currentPrice", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4842, "src": "6590:12:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "6566:36:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "6556:46:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4891, "nodeType": "ExpressionStatement", "src": "6556:46:21"}, {"expression": {"id": 4896, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4892, "name": "total", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4851, "src": "6612:5:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4895, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4893, "name": "settlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4853, "src": "6620:13:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "+", "rightExpression": {"id": 4894, "name": "premium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4855, "src": "6636:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "6620:23:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "6612:31:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4897, "nodeType": "ExpressionStatement", "src": "6612:31:21"}]}, "documentation": {"id": 4831, "nodeType": "StructuredDocumentation", "src": "5090:662:21", "text": " @notice Used for getting the price for Options in USD\n @param period Option period in seconds (1 days <= period <= 4 weeks)\n @param amount Option amount\n @param strike Strike price of the option\n @param optionType Type of the Option\n @param currentPrice Current price of the underlying asset\n @param config The option configuration\n @param pool The pool selling the option\n @return total Total price to be paid in USD\n @return settlementFee Amount to be distributed to the Buffer token holders in USD\n @return premium Amount that covers the price difference in the ITM options in USD"}, "functionSelector": "351f62a0", "id": 4899, "implemented": true, "kind": "function", "modifiers": [], "name": "feesUsd", "nameLocation": "5766:7:21", "nodeType": "FunctionDefinition", "parameters": {"id": 4849, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4833, "mutability": "mutable", "name": "period", "nameLocation": "5791:6:21", "nodeType": "VariableDeclaration", "scope": 4899, "src": "5783:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4832, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "5783:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4835, "mutability": "mutable", "name": "amount", "nameLocation": "5815:6:21", "nodeType": "VariableDeclaration", "scope": 4899, "src": "5807:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4834, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "5807:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4837, "mutability": "mutable", "name": "strike", "nameLocation": "5839:6:21", "nodeType": "VariableDeclaration", "scope": 4899, "src": "5831:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4836, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "5831:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4840, "mutability": "mutable", "name": "optionType", "nameLocation": "5881:10:21", "nodeType": "VariableDeclaration", "scope": 4899, "src": "5855:36:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_enum$_OptionType_$13306", "typeString": "enum IBufferOptions.OptionType"}, "typeName": {"id": 4839, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4838, "name": "IBufferOptions.OptionType", "nodeType": "IdentifierPath", "referencedDeclaration": 13306, "src": "5855:25:21"}, "referencedDeclaration": 13306, "src": "5855:25:21", "typeDescriptions": {"typeIdentifier": "t_enum$_OptionType_$13306", "typeString": "enum IBufferOptions.OptionType"}}, "visibility": "internal"}, {"constant": false, "id": 4842, "mutability": "mutable", "name": "currentPrice", "nameLocation": "5909:12:21", "nodeType": "VariableDeclaration", "scope": 4899, "src": "5901:20:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4841, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "5901:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4845, "mutability": "mutable", "name": "config", "nameLocation": "5956:6:21", "nodeType": "VariableDeclaration", "scope": 4899, "src": "5931:31:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}, "typeName": {"id": 4844, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4843, "name": "OptionConfigUnintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 6326, "src": "5931:24:21"}, "referencedDeclaration": 6326, "src": "5931:24:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}}, "visibility": "internal"}, {"constant": false, "id": 4848, "mutability": "mutable", "name": "pool", "nameLocation": "6001:4:21", "nodeType": "VariableDeclaration", "scope": 4899, "src": "5972:33:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7540", "typeString": "contract BufferEpocPoolV2Unintialized"}, "typeName": {"id": 4847, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4846, "name": "BufferEpocPoolV2Unintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 7540, "src": "5972:28:21"}, "referencedDeclaration": 7540, "src": "5972:28:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7540", "typeString": "contract BufferEpocPoolV2Unintialized"}}, "visibility": "internal"}], "src": "5773:238:21"}, "returnParameters": {"id": 4856, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4851, "mutability": "mutable", "name": "total", "nameLocation": "6078:5:21", "nodeType": "VariableDeclaration", "scope": 4899, "src": "6070:13:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4850, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "6070:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4853, "mutability": "mutable", "name": "settlementFee", "nameLocation": "6105:13:21", "nodeType": "VariableDeclaration", "scope": 4899, "src": "6097:21:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4852, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "6097:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4855, "mutability": "mutable", "name": "premium", "nameLocation": "6140:7:21", "nodeType": "VariableDeclaration", "scope": 4899, "src": "6132:15:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4854, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "6132:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "src": "6056:101:21"}, "scope": 5123, "src": "5757:893:21", "stateMutability": "view", "virtual": false, "visibility": "public"}, {"body": {"id": 4953, "nodeType": "Block", "src": "7793:310:21", "statements": [{"expression": {"id": 4938, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4927, "name": "premium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4925, "src": "7803:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"arguments": [{"id": 4929, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4904, "src": "7837:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4930, "name": "pool", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4918, "src": "7857:4:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7540", "typeString": "contract BufferEpocPoolV2Unintialized"}}, {"id": 4931, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4915, "src": "7875:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}}, {"id": 4932, "name": "strike", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4906, "src": "7895:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4933, "name": "period", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4902, "src": "7915:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4934, "name": "currentPrice", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4912, "src": "7935:12:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4935, "name": "isYes", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4908, "src": "7961:5:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}, {"id": 4936, "name": "isAbove", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4910, "src": "7980:7:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7540", "typeString": "contract BufferEpocPoolV2Unintialized"}, {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_bool", "typeString": "bool"}, {"typeIdentifier": "t_bool", "typeString": "bool"}], "id": 4928, "name": "getPremium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5072, "src": "7813:10:21", "typeDescriptions": {"typeIdentifier": "t_function_internal_view$_t_uint256_$_t_contract$_BufferEpocPoolV2Unintialized_$7540_$_t_contract$_OptionConfigUnintialized_$6326_$_t_uint256_$_t_uint256_$_t_uint256_$_t_bool_$_t_bool_$returns$_t_uint256_$", "typeString": "function (uint256,contract BufferEpocPoolV2Unintialized,contract OptionConfigUnintialized,uint256,uint256,uint256,bool,bool) view returns (uint256)"}}, "id": 4937, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "7813:184:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "7803:194:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4939, "nodeType": "ExpressionStatement", "src": "7803:194:21"}, {"expression": {"id": 4945, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4940, "name": "settlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4923, "src": "8007:13:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"arguments": [{"id": 4942, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4904, "src": "8040:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4943, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4915, "src": "8048:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}], "id": 4941, "name": "getSettlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5023, "src": "8023:16:21", "typeDescriptions": {"typeIdentifier": "t_function_internal_view$_t_uint256_$_t_contract$_OptionConfigUnintialized_$6326_$returns$_t_uint256_$", "typeString": "function (uint256,contract OptionConfigUnintialized) view returns (uint256)"}}, "id": 4944, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "8023:32:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "8007:48:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4946, "nodeType": "ExpressionStatement", "src": "8007:48:21"}, {"expression": {"id": 4951, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4947, "name": "total", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4921, "src": "8065:5:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4950, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4948, "name": "settlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4923, "src": "8073:13:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "+", "rightExpression": {"id": 4949, "name": "premium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4925, "src": "8089:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "8073:23:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "8065:31:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4952, "nodeType": "ExpressionStatement", "src": "8065:31:21"}]}, "documentation": {"id": 4900, "nodeType": "StructuredDocumentation", "src": "6656:726:21", "text": " @notice Used for getting the price for Binary Options\n @param period Option period in seconds (1 days <= period <= 4 weeks)\n @param amount Option amount\n @param strike Strike price of the option\n @param isYes whether the option isAbove or not\n @param isAbove whether the price will stay above this strike or not\n @param currentPrice Current price of the underlying asset\n @param config The option configuration\n @param pool The pool selling the option\n @return total Total price to be paid\n @return settlementFee Amount to be distributed to the Buffer token holders\n @return premium Amount that covers the price difference in the ITM options"}, "functionSelector": "934ce3d6", "id": 4954, "implemented": true, "kind": "function", "modifiers": [], "name": "feesBinary", "nameLocation": "7396:10:21", "nodeType": "FunctionDefinition", "parameters": {"id": 4919, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4902, "mutability": "mutable", "name": "period", "nameLocation": "7424:6:21", "nodeType": "VariableDeclaration", "scope": 4954, "src": "7416:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4901, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "7416:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4904, "mutability": "mutable", "name": "amount", "nameLocation": "7448:6:21", "nodeType": "VariableDeclaration", "scope": 4954, "src": "7440:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4903, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "7440:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4906, "mutability": "mutable", "name": "strike", "nameLocation": "7472:6:21", "nodeType": "VariableDeclaration", "scope": 4954, "src": "7464:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4905, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "7464:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4908, "mutability": "mutable", "name": "isYes", "nameLocation": "7493:5:21", "nodeType": "VariableDeclaration", "scope": 4954, "src": "7488:10:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}, "typeName": {"id": 4907, "name": "bool", "nodeType": "ElementaryTypeName", "src": "7488:4:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}, "visibility": "internal"}, {"constant": false, "id": 4910, "mutability": "mutable", "name": "isAbove", "nameLocation": "7513:7:21", "nodeType": "VariableDeclaration", "scope": 4954, "src": "7508:12:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}, "typeName": {"id": 4909, "name": "bool", "nodeType": "ElementaryTypeName", "src": "7508:4:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}, "visibility": "internal"}, {"constant": false, "id": 4912, "mutability": "mutable", "name": "currentPrice", "nameLocation": "7538:12:21", "nodeType": "VariableDeclaration", "scope": 4954, "src": "7530:20:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4911, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "7530:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4915, "mutability": "mutable", "name": "config", "nameLocation": "7585:6:21", "nodeType": "VariableDeclaration", "scope": 4954, "src": "7560:31:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}, "typeName": {"id": 4914, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4913, "name": "OptionConfigUnintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 6326, "src": "7560:24:21"}, "referencedDeclaration": 6326, "src": "7560:24:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}}, "visibility": "internal"}, {"constant": false, "id": 4918, "mutability": "mutable", "name": "pool", "nameLocation": "7630:4:21", "nodeType": "VariableDeclaration", "scope": 4954, "src": "7601:33:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7540", "typeString": "contract BufferEpocPoolV2Unintialized"}, "typeName": {"id": 4917, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4916, "name": "BufferEpocPoolV2Unintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 7540, "src": "7601:28:21"}, "referencedDeclaration": 7540, "src": "7601:28:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7540", "typeString": "contract BufferEpocPoolV2Unintialized"}}, "visibility": "internal"}], "src": "7406:234:21"}, "returnParameters": {"id": 4926, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4921, "mutability": "mutable", "name": "total", "nameLocation": "7709:5:21", "nodeType": "VariableDeclaration", "scope": 4954, "src": "7701:13:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4920, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "7701:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4923, "mutability": "mutable", "name": "settlementFee", "nameLocation": "7736:13:21", "nodeType": "VariableDeclaration", "scope": 4954, "src": "7728:21:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4922, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "7728:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4925, "mutability": "mutable", "name": "premium", "nameLocation": "7771:7:21", "nodeType": "VariableDeclaration", "scope": 4954, "src": "7763:15:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4924, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "7763:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "src": "7687:101:21"}, "scope": 5123, "src": "7387:716:21", "stateMutability": "view", "virtual": false, "visibility": "external"}, {"body": {"id": 5001, "nodeType": "Block", "src": "8998:274:21", "statements": [{"expression": {"id": 4985, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4977, "name": "premium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4975, "src": "9008:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"arguments": [{"id": 4979, "name": "optionDetails", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4958, "src": "9048:13:21", "typeDescriptions": {"typeIdentifier": "t_struct$_OptionDetails_$13370_memory_ptr", "typeString": "struct IBufferOptions.OptionDetails memory"}}, {"id": 4980, "name": "pool", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4968, "src": "9075:4:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7540", "typeString": "contract BufferEpocPoolV2Unintialized"}}, {"id": 4981, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4965, "src": "9093:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}}, {"id": 4982, "name": "currentPrice", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4960, "src": "9113:12:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4983, "name": "KPI", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4962, "src": "9139:3:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_struct$_OptionDetails_$13370_memory_ptr", "typeString": "struct IBufferOptions.OptionDetails memory"}, {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7540", "typeString": "contract BufferEpocPoolV2Unintialized"}, {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}], "id": 4978, "name": "getPremiumBinary", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5122, "src": "9018:16:21", "typeDescriptions": {"typeIdentifier": "t_function_internal_view$_t_struct$_OptionDetails_$13370_memory_ptr_$_t_contract$_BufferEpocPoolV2Unintialized_$7540_$_t_contract$_OptionConfigUnintialized_$6326_$_t_uint256_$_t_uint256_$returns$_t_uint256_$", "typeString": "function (struct IBufferOptions.OptionDetails memory,contract BufferEpocPoolV2Unintialized,contract OptionConfigUnintialized,uint256,uint256) view returns (uint256)"}}, "id": 4984, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "9018:134:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "9008:144:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4986, "nodeType": "ExpressionStatement", "src": "9008:144:21"}, {"expression": {"id": 4993, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4987, "name": "settlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4973, "src": "9162:13:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"arguments": [{"expression": {"id": 4989, "name": "optionDetails", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4958, "src": "9195:13:21", "typeDescriptions": {"typeIdentifier": "t_struct$_OptionDetails_$13370_memory_ptr", "typeString": "struct IBufferOptions.OptionDetails memory"}}, "id": 4990, "isConstant": false, "isLValue": true, "isPure": false, "lValueRequested": false, "memberName": "amount", "nodeType": "MemberAccess", "referencedDeclaration": 13363, "src": "9195:20:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4991, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4965, "src": "9217:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}], "id": 4988, "name": "getSettlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5023, "src": "9178:16:21", "typeDescriptions": {"typeIdentifier": "t_function_internal_view$_t_uint256_$_t_contract$_OptionConfigUnintialized_$6326_$returns$_t_uint256_$", "typeString": "function (uint256,contract OptionConfigUnintialized) view returns (uint256)"}}, "id": 4992, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "9178:46:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "9162:62:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4994, "nodeType": "ExpressionStatement", "src": "9162:62:21"}, {"expression": {"id": 4999, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4995, "name": "total", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4971, "src": "9234:5:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4998, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4996, "name": "settlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4973, "src": "9242:13:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "+", "rightExpression": {"id": 4997, "name": "premium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4975, "src": "9258:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "9242:23:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "9234:31:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 5000, "nodeType": "ExpressionStatement", "src": "9234:31:21"}]}, "documentation": {"id": 4955, "nodeType": "StructuredDocumentation", "src": "8109:509:21", "text": " @notice Used for getting the price for Binary KPI Options\n @param optionDetails Details of the option to be priced\n @param currentPrice Current price of the tokenX\n @param KPI KPI value for option\n @param config Option config\n @param pool pool contract\n @return total Total price to be paid\n @return settlementFee Amount to be distributed to the Buffer token holders\n @return premium Amount that covers the price difference in the ITM options"}, "functionSelector": "dbfa5dd6", "id": 5002, "implemented": true, "kind": "function", "modifiers": [], "name": "feesKPIBinary", "nameLocation": "8632:13:21", "nodeType": "FunctionDefinition", "parameters": {"id": 4969, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4958, "mutability": "mutable", "name": "optionDetails", "nameLocation": "8691:13:21", "nodeType": "VariableDeclaration", "scope": 5002, "src": "8655:49:21", "stateVariable": false, "storageLocation": "memory", "typeDescriptions": {"typeIdentifier": "t_struct$_OptionDetails_$13370_memory_ptr", "typeString": "struct IBufferOptions.OptionDetails"}, "typeName": {"id": 4957, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4956, "name": "IBufferOptions.OptionDetails", "nodeType": "IdentifierPath", "referencedDeclaration": 13370, "src": "8655:28:21"}, "referencedDeclaration": 13370, "src": "8655:28:21", "typeDescriptions": {"typeIdentifier": "t_struct$_OptionDetails_$13370_storage_ptr", "typeString": "struct IBufferOptions.OptionDetails"}}, "visibility": "internal"}, {"constant": false, "id": 4960, "mutability": "mutable", "name": "currentPrice", "nameLocation": "8722:12:21", "nodeType": "VariableDeclaration", "scope": 5002, "src": "8714:20:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4959, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "8714:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4962, "mutability": "mutable", "name": "KPI", "nameLocation": "8752:3:21", "nodeType": "VariableDeclaration", "scope": 5002, "src": "8744:11:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4961, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "8744:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4965, "mutability": "mutable", "name": "config", "nameLocation": "8790:6:21", "nodeType": "VariableDeclaration", "scope": 5002, "src": "8765:31:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}, "typeName": {"id": 4964, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4963, "name": "OptionConfigUnintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 6326, "src": "8765:24:21"}, "referencedDeclaration": 6326, "src": "8765:24:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}}, "visibility": "internal"}, {"constant": false, "id": 4968, "mutability": "mutable", "name": "pool", "nameLocation": "8835:4:21", "nodeType": "VariableDeclaration", "scope": 5002, "src": "8806:33:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7540", "typeString": "contract BufferEpocPoolV2Unintialized"}, "typeName": {"id": 4967, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4966, "name": "BufferEpocPoolV2Unintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 7540, "src": "8806:28:21"}, "referencedDeclaration": 7540, "src": "8806:28:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7540", "typeString": "contract BufferEpocPoolV2Unintialized"}}, "visibility": "internal"}], "src": "8645:200:21"}, "returnParameters": {"id": 4976, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4971, "mutability": "mutable", "name": "total", "nameLocation": "8914:5:21", "nodeType": "VariableDeclaration", "scope": 5002, "src": "8906:13:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4970, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "8906:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4973, "mutability": "mutable", "name": "settlementFee", "nameLocation": "8941:13:21", "nodeType": "VariableDeclaration", "scope": 5002, "src": "8933:21:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4972, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "8933:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4975, "mutability": "mutable", "name": "premium", "nameLocation": "8976:7:21", "nodeType": "VariableDeclaration", "scope": 5002, "src": "8968:15:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4974, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "8968:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "src": "8892:101:21"}, "scope": 5123, "src": "8623:649:21", "stateMutability": "view", "virtual": false, "visibility": "external"}, {"body": {"id": 5022, "nodeType": "Block", "src": "9549:73:21", "statements": [{"expression": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 5020, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"components": [{"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 5017, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 5013, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5005, "src": "9567:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "*", "rightExpression": {"arguments": [], "expression": {"argumentTypes": [], "expression": {"id": 5014, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5008, "src": "9576:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}}, "id": 5015, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "settlementFeePercentage", "nodeType": "MemberAccess", "referencedDeclaration": 6029, "src": "9576:30:21", "typeDescriptions": {"typeIdentifier": "t_function_external_view$__$returns$_t_uint256_$", "typeString": "function () view external returns (uint256)"}}, "id": 5016, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "9576:32:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "9567:41:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "id": 5018, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "9566:43:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "/", "rightExpression": {"hexValue": "313030", "id": 5019, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "9612:3:21", "typeDescriptions": {"typeIdentifier": "t_rational_100_by_1", "typeString": "int_const 100"}, "value": "100"}, "src": "9566:49:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "functionReturnParameters": 5012, "id": 5021, "nodeType": "Return", "src": "9559:56:21"}]}, "documentation": {"id": 5003, "nodeType": "StructuredDocumentation", "src": "9278:127:21", "text": " @notice Calculates settlementFee\n @param amount Option amount\n @return fee Settlement fee amount"}, "id": 5023, "implemented": true, "kind": "function", "modifiers": [], "name": "getSettlementFee", "nameLocation": "9419:16:21", "nodeType": "FunctionDefinition", "parameters": {"id": 5009, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 5005, "mutability": "mutable", "name": "amount", "nameLocation": "9444:6:21", "nodeType": "VariableDeclaration", "scope": 5023, "src": "9436:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 5004, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "9436:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 5008, "mutability": "mutable", "name": "config", "nameLocation": "9477:6:21", "nodeType": "VariableDeclaration", "scope": 5023, "src": "9452:31:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}, "typeName": {"id": 5007, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 5006, "name": "OptionConfigUnintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 6326, "src": "9452:24:21"}, "referencedDeclaration": 6326, "src": "9452:24:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}}, "visibility": "internal"}], "src": "9435:49:21"}, "returnParameters": {"id": 5012, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 5011, "mutability": "mutable", "name": "fee", "nameLocation": "9540:3:21", "nodeType": "VariableDeclaration", "scope": 5023, "src": "9532:11:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 5010, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "9532:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "src": "9531:13:21"}, "scope": 5123, "src": "9410:212:21", "stateMutability": "view", "virtual": false, "visibility": "internal"}, {"body": {"id": 5071, "nodeType": "Block", "src": "9922:371:21", "statements": [{"assignments": [5047], "declarations": [{"constant": false, "id": 5047, "mutability": "mutable", "name": "usdPremium", "nameLocation": "10007:10:21", "nodeType": "VariableDeclaration", "scope": 5071, "src": "9999:18:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 5046, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "9999:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "id": 5061, "initialValue": {"arguments": [{"arguments": [{"id": 5051, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5025, "src": "10093:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 5052, "name": "pool", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5028, "src": "10101:4:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7540", "typeString": "contract BufferEpocPoolV2Unintialized"}}, {"id": 5053, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5031, "src": "10107:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7540", "typeString": "contract BufferEpocPoolV2Unintialized"}, {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}], "id": 5050, "name": "currentImpliedVolatility", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4689, "src": "10068:24:21", "typeDescriptions": {"typeIdentifier": "t_function_internal_view$_t_uint256_$_t_contract$_BufferEpocPoolV2Unintialized_$7540_$_t_contract$_OptionConfigUnintialized_$6326_$returns$_t_uint256_$", "typeString": "function (uint256,contract BufferEpocPoolV2Unintialized,contract OptionConfigUnintialized) view returns (uint256)"}}, "id": 5054, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "10068:46:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 5055, "name": "strike", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5033, "src": "10128:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 5056, "name": "currentPrice", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5037, "src": "10148:12:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 5057, "name": "period", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5035, "src": "10174:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 5058, "name": "isYes", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5039, "src": "10194:5:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}, {"id": 5059, "name": "isAbove", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5041, "src": "10213:7:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_bool", "typeString": "bool"}, {"typeIdentifier": "t_bool", "typeString": "bool"}], "expression": {"id": 5048, "name": "OptionMath", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 17128, "src": "10020:10:21", "typeDescriptions": {"typeIdentifier": "t_type$_t_contract$_OptionMath_$17128_$", "typeString": "type(library OptionMath)"}}, "id": 5049, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "blackScholesPriceBinary", "nodeType": "MemberAccess", "referencedDeclaration": 17029, "src": "10020:34:21", "typeDescriptions": {"typeIdentifier": "t_function_delegatecall_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_bool_$_t_bool_$returns$_t_uint256_$", "typeString": "function (uint256,uint256,uint256,uint256,bool,bool) pure returns (uint256)"}}, "id": 5060, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "10020:210:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "VariableDeclarationStatement", "src": "9999:231:21"}, {"expression": {"id": 5069, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 5062, "name": "premium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5044, "src": "10240:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 5068, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"components": [{"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 5065, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 5063, "name": "usdPremium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5047, "src": "10251:10:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "*", "rightExpression": {"id": 5064, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5025, "src": "10264:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "10251:19:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "id": 5066, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "10250:21:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "/", "rightExpression": {"id": 5067, "name": "currentPrice", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5037, "src": "10274:12:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "10250:36:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "10240:46:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 5070, "nodeType": "ExpressionStatement", "src": "10240:46:21"}]}, "id": 5072, "implemented": true, "kind": "function", "modifiers": [], "name": "getPremium", "nameLocation": "9637:10:21", "nodeType": "FunctionDefinition", "parameters": {"id": 5042, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 5025, "mutability": "mutable", "name": "amount", "nameLocation": "9665:6:21", "nodeType": "VariableDeclaration", "scope": 5072, "src": "9657:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 5024, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "9657:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 5028, "mutability": "mutable", "name": "pool", "nameLocation": "9710:4:21", "nodeType": "VariableDeclaration", "scope": 5072, "src": "9681:33:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7540", "typeString": "contract BufferEpocPoolV2Unintialized"}, "typeName": {"id": 5027, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 5026, "name": "BufferEpocPoolV2Unintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 7540, "src": "9681:28:21"}, "referencedDeclaration": 7540, "src": "9681:28:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7540", "typeString": "contract BufferEpocPoolV2Unintialized"}}, "visibility": "internal"}, {"constant": false, "id": 5031, "mutability": "mutable", "name": "config", "nameLocation": "9749:6:21", "nodeType": "VariableDeclaration", "scope": 5072, "src": "9724:31:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}, "typeName": {"id": 5030, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 5029, "name": "OptionConfigUnintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 6326, "src": "9724:24:21"}, "referencedDeclaration": 6326, "src": "9724:24:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}}, "visibility": "internal"}, {"constant": false, "id": 5033, "mutability": "mutable", "name": "strike", "nameLocation": "9773:6:21", "nodeType": "VariableDeclaration", "scope": 5072, "src": "9765:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 5032, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "9765:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 5035, "mutability": "mutable", "name": "period", "nameLocation": "9797:6:21", "nodeType": "VariableDeclaration", "scope": 5072, "src": "9789:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 5034, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "9789:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 5037, "mutability": "mutable", "name": "currentPrice", "nameLocation": "9821:12:21", "nodeType": "VariableDeclaration", "scope": 5072, "src": "9813:20:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 5036, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "9813:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 5039, "mutability": "mutable", "name": "isYes", "nameLocation": "9848:5:21", "nodeType": "VariableDeclaration", "scope": 5072, "src": "9843:10:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}, "typeName": {"id": 5038, "name": "bool", "nodeType": "ElementaryTypeName", "src": "9843:4:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}, "visibility": "internal"}, {"constant": false, "id": 5041, "mutability": "mutable", "name": "isAbove", "nameLocation": "9868:7:21", "nodeType": "VariableDeclaration", "scope": 5072, "src": "9863:12:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}, "typeName": {"id": 5040, "name": "bool", "nodeType": "ElementaryTypeName", "src": "9863:4:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}, "visibility": "internal"}], "src": "9647:234:21"}, "returnParameters": {"id": 5045, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 5044, "mutability": "mutable", "name": "premium", "nameLocation": "9913:7:21", "nodeType": "VariableDeclaration", "scope": 5072, "src": "9905:15:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 5043, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "9905:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "src": "9904:17:21"}, "scope": 5123, "src": "9628:665:21", "stateMutability": "view", "virtual": false, "visibility": "internal"}, {"body": {"id": 5121, "nodeType": "Block", "src": "10565:475:21", "statements": [{"assignments": [5091], "declarations": [{"constant": false, "id": 5091, "mutability": "mutable", "name": "usdPremium", "nameLocation": "10679:10:21", "nodeType": "VariableDeclaration", "scope": 5121, "src": "10671:18:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 5090, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "10671:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "id": 5110, "initialValue": {"arguments": [{"arguments": [{"expression": {"id": 5095, "name": "optionDetails", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5075, "src": "10765:13:21", "typeDescriptions": {"typeIdentifier": "t_struct$_OptionDetails_$13370_memory_ptr", "typeString": "struct IBufferOptions.OptionDetails memory"}}, "id": 5096, "isConstant": false, "isLValue": true, "isPure": false, "lValueRequested": false, "memberName": "amount", "nodeType": "MemberAccess", "referencedDeclaration": 13363, "src": "10765:20:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 5097, "name": "pool", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5078, "src": "10787:4:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7540", "typeString": "contract BufferEpocPoolV2Unintialized"}}, {"id": 5098, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5081, "src": "10793:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7540", "typeString": "contract BufferEpocPoolV2Unintialized"}, {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}], "id": 5094, "name": "currentImpliedVolatility", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4689, "src": "10740:24:21", "typeDescriptions": {"typeIdentifier": "t_function_internal_view$_t_uint256_$_t_contract$_BufferEpocPoolV2Unintialized_$7540_$_t_contract$_OptionConfigUnintialized_$6326_$returns$_t_uint256_$", "typeString": "function (uint256,contract BufferEpocPoolV2Unintialized,contract OptionConfigUnintialized) view returns (uint256)"}}, "id": 5099, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "10740:60:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"expression": {"id": 5100, "name": "optionDetails", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5075, "src": "10814:13:21", "typeDescriptions": {"typeIdentifier": "t_struct$_OptionDetails_$13370_memory_ptr", "typeString": "struct IBufferOptions.OptionDetails memory"}}, "id": 5101, "isConstant": false, "isLValue": true, "isPure": false, "lValueRequested": false, "memberName": "strike", "nodeType": "MemberAccess", "referencedDeclaration": 13365, "src": "10814:20:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 5102, "name": "KPI", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5085, "src": "10848:3:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"expression": {"id": 5103, "name": "optionDetails", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5075, "src": "10865:13:21", "typeDescriptions": {"typeIdentifier": "t_struct$_OptionDetails_$13370_memory_ptr", "typeString": "struct IBufferOptions.OptionDetails memory"}}, "id": 5104, "isConstant": false, "isLValue": true, "isPure": false, "lValueRequested": false, "memberName": "period", "nodeType": "MemberAccess", "referencedDeclaration": 13361, "src": "10865:20:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"expression": {"id": 5105, "name": "optionDetails", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5075, "src": "10899:13:21", "typeDescriptions": {"typeIdentifier": "t_struct$_OptionDetails_$13370_memory_ptr", "typeString": "struct IBufferOptions.OptionDetails memory"}}, "id": 5106, "isConstant": false, "isLValue": true, "isPure": false, "lValueRequested": false, "memberName": "isYes", "nodeType": "MemberAccess", "referencedDeclaration": 13367, "src": "10899:19:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}, {"expression": {"id": 5107, "name": "optionDetails", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5075, "src": "10932:13:21", "typeDescriptions": {"typeIdentifier": "t_struct$_OptionDetails_$13370_memory_ptr", "typeString": "struct IBufferOptions.OptionDetails memory"}}, "id": 5108, "isConstant": false, "isLValue": true, "isPure": false, "lValueRequested": false, "memberName": "isAbove", "nodeType": "MemberAccess", "referencedDeclaration": 13369, "src": "10932:21:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_bool", "typeString": "bool"}, {"typeIdentifier": "t_bool", "typeString": "bool"}], "expression": {"id": 5092, "name": "OptionMath", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 17128, "src": "10692:10:21", "typeDescriptions": {"typeIdentifier": "t_type$_t_contract$_OptionMath_$17128_$", "typeString": "type(library OptionMath)"}}, "id": 5093, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "blackScholesPriceBinary", "nodeType": "MemberAccess", "referencedDeclaration": 17029, "src": "10692:34:21", "typeDescriptions": {"typeIdentifier": "t_function_delegatecall_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_bool_$_t_bool_$returns$_t_uint256_$", "typeString": "function (uint256,uint256,uint256,uint256,bool,bool) pure returns (uint256)"}}, "id": 5109, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "10692:271:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "VariableDeclarationStatement", "src": "10671:292:21"}, {"expression": {"id": 5119, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 5111, "name": "premium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5088, "src": "10973:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 5118, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"components": [{"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 5115, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 5112, "name": "usdPremium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5091, "src": "10984:10:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "*", "rightExpression": {"expression": {"id": 5113, "name": "optionDetails", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5075, "src": "10997:13:21", "typeDescriptions": {"typeIdentifier": "t_struct$_OptionDetails_$13370_memory_ptr", "typeString": "struct IBufferOptions.OptionDetails memory"}}, "id": 5114, "isConstant": false, "isLValue": true, "isPure": false, "lValueRequested": false, "memberName": "amount", "nodeType": "MemberAccess", "referencedDeclaration": 13363, "src": "10997:20:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "10984:33:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "id": 5116, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "10983:35:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "/", "rightExpression": {"id": 5117, "name": "currentPrice", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5083, "src": "11021:12:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "10983:50:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "10973:60:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 5120, "nodeType": "ExpressionStatement", "src": "10973:60:21"}]}, "id": 5122, "implemented": true, "kind": "function", "modifiers": [], "name": "getPremiumBinary", "nameLocation": "10308:16:21", "nodeType": "FunctionDefinition", "parameters": {"id": 5086, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 5075, "mutability": "mutable", "name": "optionDetails", "nameLocation": "10370:13:21", "nodeType": "VariableDeclaration", "scope": 5122, "src": "10334:49:21", "stateVariable": false, "storageLocation": "memory", "typeDescriptions": {"typeIdentifier": "t_struct$_OptionDetails_$13370_memory_ptr", "typeString": "struct IBufferOptions.OptionDetails"}, "typeName": {"id": 5074, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 5073, "name": "IBufferOptions.OptionDetails", "nodeType": "IdentifierPath", "referencedDeclaration": 13370, "src": "10334:28:21"}, "referencedDeclaration": 13370, "src": "10334:28:21", "typeDescriptions": {"typeIdentifier": "t_struct$_OptionDetails_$13370_storage_ptr", "typeString": "struct IBufferOptions.OptionDetails"}}, "visibility": "internal"}, {"constant": false, "id": 5078, "mutability": "mutable", "name": "pool", "nameLocation": "10422:4:21", "nodeType": "VariableDeclaration", "scope": 5122, "src": "10393:33:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7540", "typeString": "contract BufferEpocPoolV2Unintialized"}, "typeName": {"id": 5077, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 5076, "name": "BufferEpocPoolV2Unintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 7540, "src": "10393:28:21"}, "referencedDeclaration": 7540, "src": "10393:28:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7540", "typeString": "contract BufferEpocPoolV2Unintialized"}}, "visibility": "internal"}, {"constant": false, "id": 5081, "mutability": "mutable", "name": "config", "nameLocation": "10461:6:21", "nodeType": "VariableDeclaration", "scope": 5122, "src": "10436:31:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}, "typeName": {"id": 5080, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 5079, "name": "OptionConfigUnintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 6326, "src": "10436:24:21"}, "referencedDeclaration": 6326, "src": "10436:24:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6326", "typeString": "contract OptionConfigUnintialized"}}, "visibility": "internal"}, {"constant": false, "id": 5083, "mutability": "mutable", "name": "currentPrice", "nameLocation": "10485:12:21", "nodeType": "VariableDeclaration", "scope": 5122, "src": "10477:20:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 5082, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "10477:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 5085, "mutability": "mutable", "name": "KPI", "nameLocation": "10515:3:21", "nodeType": "VariableDeclaration", "scope": 5122, "src": "10507:11:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 5084, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "10507:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "src": "10324:200:21"}, "returnParameters": {"id": 5089, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 5088, "mutability": "mutable", "name": "premium", "nameLocation": "10556:7:21", "nodeType": "VariableDeclaration", "scope": 5122, "src": "10548:15:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 5087, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "10548:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "src": "10547:17:21"}, "scope": 5123, "src": "10299:741:21", "stateMutability": "view", "virtual": false, "visibility": "internal"}], "scope": 5124, "src": "697:10345:21", "usedErrors": []}], "src": "38:11005:21"}, "compiler": {"version": "0.8.4+commit.c7e474f2", "evm_version": "istanbul", "optimizer": {"enabled": true, "runs": 1}}, "contractName": "FeeCalculator", "deployedBytecode": "73000000000000000000000000000000000000000030146080604052600436106100775760003560e01c8063351f62a01461007c5780634fe8c640146100af578063934ce3d6146100d0578063c04a1afe146100e3578063d69bde77146100f6578063dbfa5dd614610109578063fbef1d551461011c575b600080fd5b61008f61008a366004610b14565b61012f565b604080519384526020840192909252908201526060015b60405180910390f35b6100c26100bd366004610a24565b61022f565b6040519081526020016100a6565b61008f6100de366004610a94565b61037c565b61008f6100f1366004610b14565b6103b9565b6100c2610104366004610a53565b6104b4565b61008f610117366004610941565b6105eb565b61008f61012a366004610b14565b610626565b60008060008073__$21a7d244ba8ae9c6f13b9eaa6b054f8aee$__632c607c3b61015a8c888a6104b4565b8b8a8f60028e600281111561017f57634e487b7160e01b600052602160045260246000fd5b146040518663ffffffff1660e01b81526004016101a0959493929190610b88565b60206040518083038186803b1580156101b857600080fd5b505af41580156101cc573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101f09190610a0c565b90506101fc8a876106f4565b9250866102098b83610c11565b6102139190610bf1565b915061021f8284610bd9565b9350509750975097945050505050565b600080826001600160a01b031663d9ac10d96040518163ffffffff1660e01b815260040160206040518083038186803b15801561026b57600080fd5b505afa15801561027f573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102a39190610a0c565b9050600081116102de5760405162461bcd60e51b815260206004820152600260248201526109e760f31b604482015260640160405180910390fd5b8084846001600160a01b0316636ab28bc86040518163ffffffff1660e01b815260040160206040518083038186803b15801561031957600080fd5b505afa15801561032d573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906103519190610a0c565b61035b9190610bd9565b61036a906402540be400610c11565b6103749190610bf1565b949350505050565b60008060006103918a85878c8f8b8e8e610784565b905061039d8a866106f4565b91506103a98183610bd9565b9250985098509895505050505050565b60008060008073__$21a7d244ba8ae9c6f13b9eaa6b054f8aee$__632c607c3b6103e48c888a6104b4565b8b8a8f60028e600281111561040957634e487b7160e01b600052602160045260246000fd5b146040518663ffffffff1660e01b815260040161042a959493929190610b88565b60206040518083038186803b15801561044257600080fd5b505af4158015610456573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061047a9190610a0c565b9050868a6104888284610bd9565b6104929190610c11565b61049c9190610bf1565b91506104a88a876106f4565b925061021f8284610bd9565b6000816001600160a01b03166318f88e5b6040518163ffffffff1660e01b815260040160206040518083038186803b1580156104ef57600080fd5b505afa158015610503573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906105279190610a0c565b90506000610535858561022f565b905063ee6b28008111156105e357826001600160a01b0316636c321c8a6040518163ffffffff1660e01b815260040160206040518083038186803b15801561057c57600080fd5b505afa158015610590573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906105b49190610a0c565b6105c263ee6b280083610c30565b6105cc9084610c11565b6105d69190610bf1565b6105e09083610bd9565b91505b509392505050565b60008060006105fd8885878a8a610847565b905061060d8860200151866106f4565b91506106198183610bd9565b9250955095509592505050565b60008060008073__$21a7d244ba8ae9c6f13b9eaa6b054f8aee$__632c607c3b6106518c888a6104b4565b8b8a8f60028e600281111561067657634e487b7160e01b600052602160045260246000fd5b146040518663ffffffff1660e01b8152600401610697959493929190610b88565b60206040518083038186803b1580156106af57600080fd5b505af41580156106c3573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906106e79190610a0c565b9050866104928b83610c11565b60006064826001600160a01b031663f3fa34956040518163ffffffff1660e01b815260040160206040518083038186803b15801561073157600080fd5b505afa158015610745573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107699190610a0c565b6107739085610c11565b61077d9190610bf1565b9392505050565b60008073__$21a7d244ba8ae9c6f13b9eaa6b054f8aee$__63d573d6156107ac8c8c8c6104b4565b89888a89896040518763ffffffff1660e01b81526004016107d296959493929190610bad565b60206040518083038186803b1580156107ea57600080fd5b505af41580156107fe573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108229190610a0c565b90508461082f8b83610c11565b6108399190610bf1565b9a9950505050505050505050565b60008073__$21a7d244ba8ae9c6f13b9eaa6b054f8aee$__63d573d615610873896020015189896104b4565b6040808b01518b5160608d015160808e015193516001600160e01b031960e088901b1681526108a995948b939291600401610bad565b60206040518083038186803b1580156108c157600080fd5b505af41580156108d5573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108f99190610a0c565b90508387602001518261090c9190610c11565b6109169190610bf1565b979650505050505050565b8035801515811461093157600080fd5b919050565b803561093181610c5d565b600080600080600085870361012081121561095a578182fd5b60a0811215610967578182fd5b5060405160a081016001600160401b038111828210171561099657634e487b7160e01b83526041600452602483fd5b80604052508635815260208701356020820152604087013560408201526109bf60608801610921565b60608201526109d060808801610921565b6080820152945060a0860135935060c086013592506109f160e08701610936565b9150610a006101008701610936565b90509295509295909350565b600060208284031215610a1d578081fd5b5051919050565b60008060408385031215610a36578182fd5b823591506020830135610a4881610c5d565b809150509250929050565b600080600060608486031215610a67578283fd5b833592506020840135610a7981610c5d565b91506040840135610a8981610c5d565b809150509250925092565b600080600080600080600080610100898b031215610ab0578283fd5b883597506020890135965060408901359550610ace60608a01610921565b9450610adc60808a01610921565b935060a0890135925060c0890135610af381610c5d565b915060e0890135610b0381610c5d565b809150509295985092959890939650565b600080600080600080600060e0888a031215610b2e578283fd5b873596506020880135955060408801359450606088013560038110610b51578384fd5b93506080880135925060a0880135610b6881610c5d565b915060c0880135610b7881610c5d565b8091505092959891949750929550565b9485526020850193909352604084019190915260608301521515608082015260a00190565b95865260208601949094526040850192909252606084015215156080830152151560a082015260c00190565b60008219821115610bec57610bec610c47565b500190565b600082610c0c57634e487b7160e01b81526012600452602481fd5b500490565b6000816000190483118215151615610c2b57610c2b610c47565b500290565b600082821015610c4257610c42610c47565b500390565b634e487b7160e01b600052601160045260246000fd5b6001600160a01b0381168114610c7257600080fd5b5056fea2646970667358221220c4466dd2885f329dd275a6d421589e06c89790f8ccc6b332eafddc9a4fb748ed64736f6c63430008040033", "deployedSourceMap": "697:10345:21:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;5757:893;;;;;;:::i;:::-;;:::i;:::-;;;;5570:25:32;;;5626:2;5611:18;;5604:34;;;;5654:18;;;5647:34;5558:2;5543:18;5757:893:21;;;;;;;;919:325;;;;;;:::i;:::-;;:::i;:::-;;;5324:25:32;;;5312:2;5297:18;919:325:21;5279:76:32;7387:716:21;;;;;;:::i;:::-;;:::i;4169:915::-;;;;;;:::i;:::-;;:::i;1568:407::-;;;;;;:::i;:::-;;:::i;8623:649::-;;;;;;:::i;:::-;;:::i;2630:884::-;;;;;;:::i;:::-;;:::i;5757:893::-;6070:13;6097:21;6132:15;6245:18;6266:10;:28;6308:46;6333:6;6341:4;6347:6;6308:24;:46::i;:::-;6368:6;6388:12;6414:6;6448:30;6434:10;:44;;;;;;-1:-1:-1;;;6434:44:21;;;;;;;;;;6266:222;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;6245:243;;6514:32;6531:6;6539;6514:16;:32::i;:::-;6498:48;-1:-1:-1;6590:12:21;6567:19;6580:6;6567:10;:19;:::i;:::-;6566:36;;;;:::i;:::-;6556:46;-1:-1:-1;6620:23:21;6556:46;6620:13;:23;:::i;:::-;6612:31;;5757:893;;;;;;;;;;;;:::o;919:325::-;1040:19;1071;1093:4;-1:-1:-1;;;;;1093:23:21;;:25;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;1071:47;;1150:1;1136:11;:15;1128:30;;;;-1:-1:-1;;;1128:30:21;;5042:2:32;1128:30:21;;;5024:21:32;5081:1;5061:18;;;5054:29;-1:-1:-1;;;5099:18:32;;;5092:32;5141:18;;1128:30:21;;;;;;;;1226:11;1207:6;1185:4;-1:-1:-1;;;;;1185:17:21;;:19;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;:28;;;;:::i;:::-;1184:38;;1217:5;1184:38;:::i;:::-;1183:54;;;;:::i;:::-;1169:68;919:325;-1:-1:-1;;;;919:325:21:o;7387:716::-;7701:13;7728:21;7763:15;7813:184;7837:6;7857:4;7875:6;7895;7915;7935:12;7961:5;7980:7;7813:10;:184::i;:::-;7803:194;;8023:32;8040:6;8048;8023:16;:32::i;:::-;8007:48;-1:-1:-1;8073:23:21;8089:7;8007:48;8073:23;:::i;:::-;8065:31;;7387:716;;;;;;;;;;;;:::o;4169:915::-;4493:13;4520:21;4555:15;4662:18;4683:10;:28;4725:46;4750:6;4758:4;4764:6;4725:24;:46::i;:::-;4785:6;4805:12;4831:6;4865:30;4851:10;:44;;;;;;-1:-1:-1;;;4851:44:21;;;;;;;;;;4683:222;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;4662:243;-1:-1:-1;4966:12:21;4956:6;4927:25;4966:12;4662:243;4927:25;:::i;:::-;4926:36;;;;:::i;:::-;4925:53;;;;:::i;:::-;4915:63;;5004:32;5021:6;5029;5004:16;:32::i;:::-;4988:48;-1:-1:-1;5054:23:21;5070:7;4988:48;5054:23;:::i;1568:407::-;1737:10;1764:6;-1:-1:-1;;;;;1764:21:21;;:23;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;1759:28;;1797:19;1819:31;1837:6;1845:4;1819:17;:31::i;:::-;1797:53;;1878:4;1864:11;:18;1860:109;;;1934:6;-1:-1:-1;;;;;1934:22:21;;:24;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;1911:18;1925:4;1911:11;:18;:::i;:::-;1905:25;;:2;:25;:::i;:::-;1904:54;;;;:::i;:::-;1898:60;;;;:::i;:::-;;;1860:109;1568:407;;;;;;:::o;8623:649::-;8906:13;8933:21;8968:15;9018:134;9048:13;9075:4;9093:6;9113:12;9139:3;9018:16;:134::i;:::-;9008:144;;9178:46;9195:13;:20;;;9217:6;9178:16;:46::i;:::-;9162:62;-1:-1:-1;9242:23:21;9258:7;9162:62;9242:23;:::i;:::-;9234:31;;8623:649;;;;;;;;;:::o;2630:884::-;2940:13;2967:21;3002:15;3109:18;3130:10;:28;3172:46;3197:6;3205:4;3211:6;3172:24;:46::i;:::-;3232:6;3252:12;3278:6;3312:30;3298:10;:44;;;;;;-1:-1:-1;;;3298:44:21;;;;;;;;;;3130:222;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;3109:243;-1:-1:-1;3396:12:21;3373:19;3386:6;3109:243;3373:19;:::i;9410:212::-;9532:11;9612:3;9576:6;-1:-1:-1;;;;;9576:30:21;;:32;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;9567:41;;:6;:41;:::i;:::-;9566:49;;;;:::i;:::-;9559:56;9410:212;-1:-1:-1;;;9410:212:21:o;9628:665::-;9905:15;9999:18;10020:10;:34;10068:46;10093:6;10101:4;10107:6;10068:24;:46::i;:::-;10128:6;10148:12;10174:6;10194:5;10213:7;10020:210;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;9999:231;-1:-1:-1;10274:12:21;10251:19;10264:6;9999:231;10251:19;:::i;:::-;10250:36;;;;:::i;:::-;10240:46;9628:665;-1:-1:-1;;;;;;;;;;9628:665:21:o;10299:741::-;10548:15;10671:18;10692:10;:34;10740:60;10765:13;:20;;;10787:4;10793:6;10740:24;:60::i;:::-;10814:20;;;;;10865;;10899:19;;;;10932:21;;;;10692:271;;-1:-1:-1;;;;;;10692:271:21;;;;;;;;;;10848:3;;10865:20;10899:19;10692:271;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;10671:292;;11021:12;10997:13;:20;;;10984:10;:33;;;;:::i;:::-;10983:50;;;;:::i;:::-;10973:60;10299:741;-1:-1:-1;;;;;;;10299:741:21:o;14:160:32:-;79:20;;135:13;;128:21;118:32;;108:2;;164:1;161;154:12;108:2;60:114;;;:::o;179:194::-;277:20;;306:61;277:20;306:61;:::i;378:1329::-;575:6;583;591;599;607;651:9;642:7;638:23;681:3;677:2;673:12;670:2;;;703:6;695;688:22;670:2;732:4;728:2;724:13;721:2;;;755:6;747;740:22;721:2;-1:-1:-1;793:2:32;787:9;835:4;823:17;;-1:-1:-1;;;;;855:34:32;;891:22;;;852:62;849:2;;;-1:-1:-1;;;937:36:32;;996:4;993:1;986:15;1029:4;944:6;1014:20;849:2;1064:10;1060:2;1053:22;;1112:9;1099:23;1091:6;1084:39;1184:2;1173:9;1169:18;1156:32;1151:2;1143:6;1139:15;1132:57;1250:2;1239:9;1235:18;1222:32;1217:2;1209:6;1205:15;1198:57;1288:35;1319:2;1308:9;1304:18;1288:35;:::i;:::-;1283:2;1275:6;1271:15;1264:60;1358:36;1389:3;1378:9;1374:19;1358:36;:::i;:::-;1352:3;1340:16;;1333:62;1344:6;-1:-1:-1;1467:4:32;1452:20;;1439:34;;-1:-1:-1;1520:3:32;1505:19;;1492:33;;-1:-1:-1;1544:69:32;1608:3;1593:19;;1544:69;:::i;:::-;1534:79;;1632:69;1696:3;1685:9;1681:19;1632:69;:::i;:::-;1622:79;;618:1089;;;;;;;;:::o;1712:194::-;1782:6;1835:2;1823:9;1814:7;1810:23;1806:32;1803:2;;;1856:6;1848;1841:22;1803:2;-1:-1:-1;1884:16:32;;1793:113;-1:-1:-1;1793:113:32:o;1911:392::-;2016:6;2024;2077:2;2065:9;2056:7;2052:23;2048:32;2045:2;;;2098:6;2090;2083:22;2045:2;2139:9;2126:23;2116:33;;2199:2;2188:9;2184:18;2171:32;2212:61;2267:5;2212:61;:::i;:::-;2292:5;2282:15;;;2035:268;;;;;:::o;2308:596::-;2455:6;2463;2471;2524:2;2512:9;2503:7;2499:23;2495:32;2492:2;;;2545:6;2537;2530:22;2492:2;2586:9;2573:23;2563:33;;2646:2;2635:9;2631:18;2618:32;2659:61;2714:5;2659:61;:::i;:::-;2739:5;-1:-1:-1;2796:2:32;2781:18;;2768:32;2809:63;2768:32;2809:63;:::i;:::-;2891:7;2881:17;;;2482:422;;;;;:::o;2909:941::-;3095:6;3103;3111;3119;3127;3135;3143;3151;3204:3;3192:9;3183:7;3179:23;3175:33;3172:2;;;3226:6;3218;3211:22;3172:2;3267:9;3254:23;3244:33;;3324:2;3313:9;3309:18;3296:32;3286:42;;3375:2;3364:9;3360:18;3347:32;3337:42;;3398:35;3429:2;3418:9;3414:18;3398:35;:::i;:::-;3388:45;;3452:36;3483:3;3472:9;3468:19;3452:36;:::i;:::-;3442:46;;3535:3;3524:9;3520:19;3507:33;3497:43;;3590:3;3579:9;3575:19;3562:33;3604:61;3659:5;3604:61;:::i;:::-;3684:5;-1:-1:-1;3741:3:32;3726:19;;3713:33;3755:63;3713:33;3755:63;:::i;:::-;3837:7;3827:17;;;3162:688;;;;;;;;;;;:::o;3855:980::-;4054:6;4062;4070;4078;4086;4094;4102;4155:3;4143:9;4134:7;4130:23;4126:33;4123:2;;;4177:6;4169;4162:22;4123:2;4218:9;4205:23;4195:33;;4275:2;4264:9;4260:18;4247:32;4237:42;;4326:2;4315:9;4311:18;4298:32;4288:42;;4380:2;4369:9;4365:18;4352:32;4413:1;4406:5;4403:12;4393:2;;4434:6;4426;4419:22;4393:2;4462:5;-1:-1:-1;4514:3:32;4499:19;;4486:33;;-1:-1:-1;4571:3:32;4556:19;;4543:33;4585:63;4543:33;4585:63;:::i;:::-;4667:7;-1:-1:-1;4726:3:32;4711:19;;4698:33;4740:63;4698:33;4740:63;:::i;:::-;4822:7;4812:17;;;4113:722;;;;;;;;;;:::o;5692:481::-;5953:25;;;6009:2;5994:18;;5987:34;;;;6052:2;6037:18;;6030:34;;;;6095:2;6080:18;;6073:34;6151:14;6144:22;6138:3;6123:19;;6116:51;5940:3;5925:19;;5907:266::o;6178:563::-;6461:25;;;6517:2;6502:18;;6495:34;;;;6560:2;6545:18;;6538:34;;;;6603:2;6588:18;;6581:34;6659:14;6652:22;6646:3;6631:19;;6624:51;6719:14;6712:22;6706:3;6691:19;;6684:51;6448:3;6433:19;;6415:326::o;6746:128::-;6786:3;6817:1;6813:6;6810:1;6807:13;6804:2;;;6823:18;;:::i;:::-;-1:-1:-1;6859:9:32;;6794:80::o;6879:217::-;6919:1;6945;6935:2;;-1:-1:-1;;;6970:31:32;;7024:4;7021:1;7014:15;7052:4;6977:1;7042:15;6935:2;-1:-1:-1;7081:9:32;;6925:171::o;7101:168::-;7141:7;7207:1;7203;7199:6;7195:14;7192:1;7189:21;7184:1;7177:9;7170:17;7166:45;7163:2;;;7214:18;;:::i;:::-;-1:-1:-1;7254:9:32;;7153:116::o;7274:125::-;7314:4;7342:1;7339;7336:8;7333:2;;;7347:18;;:::i;:::-;-1:-1:-1;7384:9:32;;7323:76::o;7404:127::-;7465:10;7460:3;7456:20;7453:1;7446:31;7496:4;7493:1;7486:15;7520:4;7517:1;7510:15;7536:161;-1:-1:-1;;;;;7641:31:32;;7631:42;;7621:2;;7687:1;7684;7677:12;7621:2;7611:86;:::o", "language": "Solidity", "natspec": {"methods": {"currentImpliedVolatility(uint256,BufferEpocPoolV2Unintialized,OptionConfigUnintialized)": {"notice": "Calculate the Utilisation adjusted ImpliedVol for the pool according to https://www.desmos.com/calculator/xdmhn97opd", "params": {"amount": "Option amount", "config": "The option configuration", "pool": "The pool selling the option"}, "returns": {"iv": "The adjusted ImpliedVol"}}, "fees(uint256,uint256,uint256,IBufferOptions.OptionType,uint256,OptionConfigUnintialized,BufferEpocPoolV2Unintialized)": {"notice": "Used for getting the price for Options in tokenX", "params": {"amount": "Option amount", "config": "The option configuration", "currentPrice": "Current price of the underlying asset", "optionType": "Type of the Option", "period": "Option period in seconds (1 days <= period <= 4 weeks)", "pool": "The pool selling the option", "strike": "Strike price of the option"}, "returns": {"premium": "Amount that covers the price difference in the ITM options", "settlementFee": "Amount to be distributed to the Buffer token holders", "total": "Total price to be paid"}}, "feesBinary(uint256,uint256,uint256,bool,bool,uint256,OptionConfigUnintialized,BufferEpocPoolV2Unintialized)": {"notice": "Used for getting the price for Binary Options", "params": {"amount": "Option amount", "config": "The option configuration", "currentPrice": "Current price of the underlying asset", "isAbove": "whether the price will stay above this strike or not", "isYes": "whether the option isAbove or not", "period": "Option period in seconds (1 days <= period <= 4 weeks)", "pool": "The pool selling the option", "strike": "Strike price of the option"}, "returns": {"premium": "Amount that covers the price difference in the ITM options", "settlementFee": "Amount to be distributed to the Buffer token holders", "total": "Total price to be paid"}}, "feesKPIBinary(IBufferOptions.OptionDetails,uint256,uint256,OptionConfigUnintialized,BufferEpocPoolV2Unintialized)": {"notice": "Used for getting the price for Binary KPI Options", "params": {"KPI": "KPI value for option", "config": "Option config", "currentPrice": "Current price of the tokenX", "optionDetails": "Details of the option to be priced", "pool": "pool contract"}, "returns": {"premium": "Amount that covers the price difference in the ITM options", "settlementFee": "Amount to be distributed to the Buffer token holders", "total": "Total price to be paid"}}, "feesSuccessOptions(uint256,uint256,uint256,IBufferOptions.OptionType,uint256,OptionConfigUnintialized,BufferEpocPoolV2Unintialized)": {"notice": "Used for getting the price for Options in tokenX", "params": {"amount": "Option amount", "config": "The option configuration", "currentPrice": "Current price of the underlying asset", "optionType": "Type of the Option", "period": "Option period in seconds (1 days <= period <= 4 weeks)", "pool": "The pool selling the option", "strike": "Strike price of the option"}, "returns": {"premium": "Amount that covers the price difference in the ITM options", "settlementFee": "Amount to be distributed to the Buffer token holders", "total": "Total price to be paid"}}, "feesUsd(uint256,uint256,uint256,IBufferOptions.OptionType,uint256,OptionConfigUnintialized,BufferEpocPoolV2Unintialized)": {"notice": "Used for getting the price for Options in USD", "params": {"amount": "Option amount", "config": "The option configuration", "currentPrice": "Current price of the underlying asset", "optionType": "Type of the Option", "period": "Option period in seconds (1 days <= period <= 4 weeks)", "pool": "The pool selling the option", "strike": "Strike price of the option"}, "returns": {"premium": "Amount that covers the price difference in the ITM options in USD", "settlementFee": "Amount to be distributed to the Buffer token holders in USD", "total": "Total price to be paid in USD"}}, "getNewUtilisation(uint256,BufferEpocPoolV2Unintialized)": {"notice": "Calculate the current Utilisation", "params": {"amount": "Option amount", "pool": "The pool selling the option"}, "returns": {"utilization": "Current utilization"}}}, "kind": "dev", "version": 1}, "opcodes": "PUSH20 0x0 ADDRESS EQ PUSH1 0x80 PUSH1 0x40 MSTORE PUSH1 0x4 CALLDATASIZE LT PUSH2 0x77 JUMPI PUSH1 0x0 CALLDATALOAD PUSH1 0xE0 SHR DUP1 PUSH4 0x351F62A0 EQ PUSH2 0x7C JUMPI DUP1 PUSH4 0x4FE8C640 EQ PUSH2 0xAF JUMPI DUP1 PUSH4 0x934CE3D6 EQ PUSH2 0xD0 JUMPI DUP1 PUSH4 0xC04A1AFE EQ PUSH2 0xE3 JUMPI DUP1 PUSH4 0xD69BDE77 EQ PUSH2 0xF6 JUMPI DUP1 PUSH4 0xDBFA5DD6 EQ PUSH2 0x109 JUMPI DUP1 PUSH4 0xFBEF1D55 EQ PUSH2 0x11C JUMPI JUMPDEST PUSH1 0x0 DUP1 REVERT JUMPDEST PUSH2 0x8F PUSH2 0x8A CALLDATASIZE PUSH1 0x4 PUSH2 0xB14 JUMP JUMPDEST PUSH2 0x12F JUMP JUMPDEST PUSH1 0x40 DUP1 MLOAD SWAP4 DUP5 MSTORE PUSH1 0x20 DUP5 ADD SWAP3 SWAP1 SWAP3 MSTORE SWAP1 DUP3 ADD MSTORE PUSH1 0x60 ADD JUMPDEST PUSH1 0x40 MLOAD DUP1 SWAP2 SUB SWAP1 RETURN JUMPDEST PUSH2 0xC2 PUSH2 0xBD CALLDATASIZE PUSH1 0x4 PUSH2 0xA24 JUMP JUMPDEST PUSH2 0x22F JUMP JUMPDEST PUSH1 0x40 MLOAD SWAP1 DUP2 MSTORE PUSH1 0x20 ADD PUSH2 0xA6 JUMP JUMPDEST PUSH2 0x8F PUSH2 0xDE CALLDATASIZE PUSH1 0x4 PUSH2 0xA94 JUMP JUMPDEST PUSH2 0x37C JUMP JUMPDEST PUSH2 0x8F PUSH2 0xF1 CALLDATASIZE PUSH1 0x4 PUSH2 0xB14 JUMP JUMPDEST PUSH2 0x3B9 JUMP JUMPDEST PUSH2 0xC2 PUSH2 0x104 CALLDATASIZE PUSH1 0x4 PUSH2 0xA53 JUMP JUMPDEST PUSH2 0x4B4 JUMP JUMPDEST PUSH2 0x8F PUSH2 0x117 CALLDATASIZE PUSH1 0x4 PUSH2 0x941 JUMP JUMPDEST PUSH2 0x5EB JUMP JUMPDEST PUSH2 0x8F PUSH2 0x12A CALLDATASIZE PUSH1 0x4 PUSH2 0xB14 JUMP JUMPDEST PUSH2 0x626 JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH1 0x0 DUP1 PUSH20 0x0 PUSH4 0x2C607C3B PUSH2 0x15A DUP13 DUP9 DUP11 PUSH2 0x4B4 JUMP JUMPDEST DUP12 DUP11 DUP16 PUSH1 0x2 DUP15 PUSH1 0x2 DUP2 GT ISZERO PUSH2 0x17F JUMPI PUSH4 0x4E487B71 PUSH1 0xE0 SHL PUSH1 0x0 MSTORE PUSH1 0x21 PUSH1 0x4 MSTORE PUSH1 0x24 PUSH1 0x0 REVERT JUMPDEST EQ PUSH1 0x40 MLOAD DUP7 PUSH4 0xFFFFFFFF AND PUSH1 0xE0 SHL DUP2 MSTORE PUSH1 0x4 ADD PUSH2 0x1A0 SWAP6 SWAP5 SWAP4 SWAP3 SWAP2 SWAP1 PUSH2 0xB88 JUMP JUMPDEST PUSH1 0x20 PUSH1 0x40 MLOAD DUP1 DUP4 SUB DUP2 DUP7 DUP1 EXTCODESIZE ISZERO DUP1 ISZERO PUSH2 0x1B8 JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP GAS DELEGATECALL ISZERO DUP1 ISZERO PUSH2 0x1CC JUMPI RETURNDATASIZE PUSH1 0x0 DUP1 RETURNDATACOPY RETURNDATASIZE PUSH1 0x0 REVERT JUMPDEST POP POP POP POP PUSH1 0x40 MLOAD RETURNDATASIZE PUSH1 0x1F NOT PUSH1 0x1F DUP3 ADD AND DUP3 ADD DUP1 PUSH1 0x40 MSTORE POP DUP2 ADD SWAP1 PUSH2 0x1F0 SWAP2 SWAP1 PUSH2 0xA0C JUMP JUMPDEST SWAP1 POP PUSH2 0x1FC DUP11 DUP8 PUSH2 0x6F4 JUMP JUMPDEST SWAP3 POP DUP7 PUSH2 0x209 DUP12 DUP4 PUSH2 0xC11 JUMP JUMPDEST PUSH2 0x213 SWAP2 SWAP1 PUSH2 0xBF1 JUMP JUMPDEST SWAP2 POP PUSH2 0x21F DUP3 DUP5 PUSH2 0xBD9 JUMP JUMPDEST SWAP4 POP POP SWAP8 POP SWAP8 POP SWAP8 SWAP5 POP POP POP POP POP JUMP JUMPDEST PUSH1 0x0 DUP1 DUP3 PUSH1 0x1 PUSH1 0x1 PUSH1 0xA0 SHL SUB AND PUSH4 0xD9AC10D9 PUSH1 0x40 MLOAD DUP2 PUSH4 0xFFFFFFFF AND PUSH1 0xE0 SHL DUP2 MSTORE PUSH1 0x4 ADD PUSH1 0x20 PUSH1 0x40 MLOAD DUP1 DUP4 SUB DUP2 DUP7 DUP1 EXTCODESIZE ISZERO DUP1 ISZERO PUSH2 0x26B JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP GAS STATICCALL ISZERO DUP1 ISZERO PUSH2 0x27F JUMPI RETURNDATASIZE PUSH1 0x0 DUP1 RETURNDATACOPY RETURNDATASIZE PUSH1 0x0 REVERT JUMPDEST POP POP POP POP PUSH1 0x40 MLOAD RETURNDATASIZE PUSH1 0x1F NOT PUSH1 0x1F DUP3 ADD AND DUP3 ADD DUP1 PUSH1 0x40 MSTORE POP DUP2 ADD SWAP1 PUSH2 0x2A3 SWAP2 SWAP1 PUSH2 0xA0C JUMP JUMPDEST SWAP1 POP PUSH1 0x0 DUP2 GT PUSH2 0x2DE JUMPI PUSH1 0x40 MLOAD PUSH3 0x461BCD PUSH1 0xE5 SHL DUP2 MSTORE PUSH1 0x20 PUSH1 0x4 DUP3 ADD MSTORE PUSH1 0x2 PUSH1 0x24 DUP3 ADD MSTORE PUSH2 0x9E7 PUSH1 0xF3 SHL PUSH1 0x44 DUP3 ADD MSTORE PUSH1 0x64 ADD PUSH1 0x40 MLOAD DUP1 SWAP2 SUB SWAP1 REVERT JUMPDEST DUP1 DUP5 DUP5 PUSH1 0x1 PUSH1 0x1 PUSH1 0xA0 SHL SUB AND PUSH4 0x6AB28BC8 PUSH1 0x40 MLOAD DUP2 PUSH4 0xFFFFFFFF AND PUSH1 0xE0 SHL DUP2 MSTORE PUSH1 0x4 ADD PUSH1 0x20 PUSH1 0x40 MLOAD DUP1 DUP4 SUB DUP2 DUP7 DUP1 EXTCODESIZE ISZERO DUP1 ISZERO PUSH2 0x319 JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP GAS STATICCALL ISZERO DUP1 ISZERO PUSH2 0x32D JUMPI RETURNDATASIZE PUSH1 0x0 DUP1 RETURNDATACOPY RETURNDATASIZE PUSH1 0x0 REVERT JUMPDEST POP POP POP POP PUSH1 0x40 MLOAD RETURNDATASIZE PUSH1 0x1F NOT PUSH1 0x1F DUP3 ADD AND DUP3 ADD DUP1 PUSH1 0x40 MSTORE POP DUP2 ADD SWAP1 PUSH2 0x351 SWAP2 SWAP1 PUSH2 0xA0C JUMP JUMPDEST PUSH2 0x35B SWAP2 SWAP1 PUSH2 0xBD9 JUMP JUMPDEST PUSH2 0x36A SWAP1 PUSH5 0x2540BE400 PUSH2 0xC11 JUMP JUMPDEST PUSH2 0x374 SWAP2 SWAP1 PUSH2 0xBF1 JUMP JUMPDEST SWAP5 SWAP4 POP POP POP POP JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH1 0x0 PUSH2 0x391 DUP11 DUP6 DUP8 DUP13 DUP16 DUP12 DUP15 DUP15 PUSH2 0x784 JUMP JUMPDEST SWAP1 POP PUSH2 0x39D DUP11 DUP7 PUSH2 0x6F4 JUMP JUMPDEST SWAP2 POP PUSH2 0x3A9 DUP2 DUP4 PUSH2 0xBD9 JUMP JUMPDEST SWAP3 POP SWAP9 POP SWAP9 POP SWAP9 SWAP6 POP POP POP POP POP POP JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH1 0x0 DUP1 PUSH20 0x0 PUSH4 0x2C607C3B PUSH2 0x3E4 DUP13 DUP9 DUP11 PUSH2 0x4B4 JUMP JUMPDEST DUP12 DUP11 DUP16 PUSH1 0x2 DUP15 PUSH1 0x2 DUP2 GT ISZERO PUSH2 0x409 JUMPI PUSH4 0x4E487B71 PUSH1 0xE0 SHL PUSH1 0x0 MSTORE PUSH1 0x21 PUSH1 0x4 MSTORE PUSH1 0x24 PUSH1 0x0 REVERT JUMPDEST EQ PUSH1 0x40 MLOAD DUP7 PUSH4 0xFFFFFFFF AND PUSH1 0xE0 SHL DUP2 MSTORE PUSH1 0x4 ADD PUSH2 0x42A SWAP6 SWAP5 SWAP4 SWAP3 SWAP2 SWAP1 PUSH2 0xB88 JUMP JUMPDEST PUSH1 0x20 PUSH1 0x40 MLOAD DUP1 DUP4 SUB DUP2 DUP7 DUP1 EXTCODESIZE ISZERO DUP1 ISZERO PUSH2 0x442 JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP GAS DELEGATECALL ISZERO DUP1 ISZERO PUSH2 0x456 JUMPI RETURNDATASIZE PUSH1 0x0 DUP1 RETURNDATACOPY RETURNDATASIZE PUSH1 0x0 REVERT JUMPDEST POP POP POP POP PUSH1 0x40 MLOAD RETURNDATASIZE PUSH1 0x1F NOT PUSH1 0x1F DUP3 ADD AND DUP3 ADD DUP1 PUSH1 0x40 MSTORE POP DUP2 ADD SWAP1 PUSH2 0x47A SWAP2 SWAP1 PUSH2 0xA0C JUMP JUMPDEST SWAP1 POP DUP7 DUP11 PUSH2 0x488 DUP3 DUP5 PUSH2 0xBD9 JUMP JUMPDEST PUSH2 0x492 SWAP2 SWAP1 PUSH2 0xC11 JUMP JUMPDEST PUSH2 0x49C SWAP2 SWAP1 PUSH2 0xBF1 JUMP JUMPDEST SWAP2 POP PUSH2 0x4A8 DUP11 DUP8 PUSH2 0x6F4 JUMP JUMPDEST SWAP3 POP PUSH2 0x21F DUP3 DUP5 PUSH2 0xBD9 JUMP JUMPDEST PUSH1 0x0 DUP2 PUSH1 0x1 PUSH1 0x1 PUSH1 0xA0 SHL SUB AND PUSH4 0x18F88E5B PUSH1 0x40 MLOAD DUP2 PUSH4 0xFFFFFFFF AND PUSH1 0xE0 SHL DUP2 MSTORE PUSH1 0x4 ADD PUSH1 0x20 PUSH1 0x40 MLOAD DUP1 DUP4 SUB DUP2 DUP7 DUP1 EXTCODESIZE ISZERO DUP1 ISZERO PUSH2 0x4EF JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP GAS STATICCALL ISZERO DUP1 ISZERO PUSH2 0x503 JUMPI RETURNDATASIZE PUSH1 0x0 DUP1 RETURNDATACOPY RETURNDATASIZE PUSH1 0x0 REVERT JUMPDEST POP POP POP POP PUSH1 0x40 MLOAD RETURNDATASIZE PUSH1 0x1F NOT PUSH1 0x1F DUP3 ADD AND DUP3 ADD DUP1 PUSH1 0x40 MSTORE POP DUP2 ADD SWAP1 PUSH2 0x527 SWAP2 SWAP1 PUSH2 0xA0C JUMP JUMPDEST SWAP1 POP PUSH1 0x0 PUSH2 0x535 DUP6 DUP6 PUSH2 0x22F JUMP JUMPDEST SWAP1 POP PUSH4 0xEE6B2800 DUP2 GT ISZERO PUSH2 0x5E3 JUMPI DUP3 PUSH1 0x1 PUSH1 0x1 PUSH1 0xA0 SHL SUB AND PUSH4 0x6C321C8A PUSH1 0x40 MLOAD DUP2 PUSH4 0xFFFFFFFF AND PUSH1 0xE0 SHL DUP2 MSTORE PUSH1 0x4 ADD PUSH1 0x20 PUSH1 0x40 MLOAD DUP1 DUP4 SUB DUP2 DUP7 DUP1 EXTCODESIZE ISZERO DUP1 ISZERO PUSH2 0x57C JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP GAS STATICCALL ISZERO DUP1 ISZERO PUSH2 0x590 JUMPI RETURNDATASIZE PUSH1 0x0 DUP1 RETURNDATACOPY RETURNDATASIZE PUSH1 0x0 REVERT JUMPDEST POP POP POP POP PUSH1 0x40 MLOAD RETURNDATASIZE PUSH1 0x1F NOT PUSH1 0x1F DUP3 ADD AND DUP3 ADD DUP1 PUSH1 0x40 MSTORE POP DUP2 ADD SWAP1 PUSH2 0x5B4 SWAP2 SWAP1 PUSH2 0xA0C JUMP JUMPDEST PUSH2 0x5C2 PUSH4 0xEE6B2800 DUP4 PUSH2 0xC30 JUMP JUMPDEST PUSH2 0x5CC SWAP1 DUP5 PUSH2 0xC11 JUMP JUMPDEST PUSH2 0x5D6 SWAP2 SWAP1 PUSH2 0xBF1 JUMP JUMPDEST PUSH2 0x5E0 SWAP1 DUP4 PUSH2 0xBD9 JUMP JUMPDEST SWAP2 POP JUMPDEST POP SWAP4 SWAP3 POP POP POP JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH1 0x0 PUSH2 0x5FD DUP9 DUP6 DUP8 DUP11 DUP11 PUSH2 0x847 JUMP JUMPDEST SWAP1 POP PUSH2 0x60D DUP9 PUSH1 0x20 ADD MLOAD DUP7 PUSH2 0x6F4 JUMP JUMPDEST SWAP2 POP PUSH2 0x619 DUP2 DUP4 PUSH2 0xBD9 JUMP JUMPDEST SWAP3 POP SWAP6 POP SWAP6 POP SWAP6 SWAP3 POP POP POP JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH1 0x0 DUP1 PUSH20 0x0 PUSH4 0x2C607C3B PUSH2 0x651 DUP13 DUP9 DUP11 PUSH2 0x4B4 JUMP JUMPDEST DUP12 DUP11 DUP16 PUSH1 0x2 DUP15 PUSH1 0x2 DUP2 GT ISZERO PUSH2 0x676 JUMPI PUSH4 0x4E487B71 PUSH1 0xE0 SHL PUSH1 0x0 MSTORE PUSH1 0x21 PUSH1 0x4 MSTORE PUSH1 0x24 PUSH1 0x0 REVERT JUMPDEST EQ PUSH1 0x40 MLOAD DUP7 PUSH4 0xFFFFFFFF AND PUSH1 0xE0 SHL DUP2 MSTORE PUSH1 0x4 ADD PUSH2 0x697 SWAP6 SWAP5 SWAP4 SWAP3 SWAP2 SWAP1 PUSH2 0xB88 JUMP JUMPDEST PUSH1 0x20 PUSH1 0x40 MLOAD DUP1 DUP4 SUB DUP2 DUP7 DUP1 EXTCODESIZE ISZERO DUP1 ISZERO PUSH2 0x6AF JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP GAS DELEGATECALL ISZERO DUP1 ISZERO PUSH2 0x6C3 JUMPI RETURNDATASIZE PUSH1 0x0 DUP1 RETURNDATACOPY RETURNDATASIZE PUSH1 0x0 REVERT JUMPDEST POP POP POP POP PUSH1 0x40 MLOAD RETURNDATASIZE PUSH1 0x1F NOT PUSH1 0x1F DUP3 ADD AND DUP3 ADD DUP1 PUSH1 0x40 MSTORE POP DUP2 ADD SWAP1 PUSH2 0x6E7 SWAP2 SWAP1 PUSH2 0xA0C JUMP JUMPDEST SWAP1 POP DUP7 PUSH2 0x492 DUP12 DUP4 PUSH2 0xC11 JUMP JUMPDEST PUSH1 0x0 PUSH1 0x64 DUP3 PUSH1 0x1 PUSH1 0x1 PUSH1 0xA0 SHL SUB AND PUSH4 0xF3FA3495 PUSH1 0x40 MLOAD DUP2 PUSH4 0xFFFFFFFF AND PUSH1 0xE0 SHL DUP2 MSTORE PUSH1 0x4 ADD PUSH1 0x20 PUSH1 0x40 MLOAD DUP1 DUP4 SUB DUP2 DUP7 DUP1 EXTCODESIZE ISZERO DUP1 ISZERO PUSH2 0x731 JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP GAS STATICCALL ISZERO DUP1 ISZERO PUSH2 0x745 JUMPI RETURNDATASIZE PUSH1 0x0 DUP1 RETURNDATACOPY RETURNDATASIZE PUSH1 0x0 REVERT JUMPDEST POP POP POP POP PUSH1 0x40 MLOAD RETURNDATASIZE PUSH1 0x1F NOT PUSH1 0x1F DUP3 ADD AND DUP3 ADD DUP1 PUSH1 0x40 MSTORE POP DUP2 ADD SWAP1 PUSH2 0x769 SWAP2 SWAP1 PUSH2 0xA0C JUMP JUMPDEST PUSH2 0x773 SWAP1 DUP6 PUSH2 0xC11 JUMP JUMPDEST PUSH2 0x77D SWAP2 SWAP1 PUSH2 0xBF1 JUMP JUMPDEST SWAP4 SWAP3 POP POP POP JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH20 0x0 PUSH4 0xD573D615 PUSH2 0x7AC DUP13 DUP13 DUP13 PUSH2 0x4B4 JUMP JUMPDEST DUP10 DUP9 DUP11 DUP10 DUP10 PUSH1 0x40 MLOAD DUP8 PUSH4 0xFFFFFFFF AND PUSH1 0xE0 SHL DUP2 MSTORE PUSH1 0x4 ADD PUSH2 0x7D2 SWAP7 SWAP6 SWAP5 SWAP4 SWAP3 SWAP2 SWAP1 PUSH2 0xBAD JUMP JUMPDEST PUSH1 0x20 PUSH1 0x40 MLOAD DUP1 DUP4 SUB DUP2 DUP7 DUP1 EXTCODESIZE ISZERO DUP1 ISZERO PUSH2 0x7EA JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP GAS DELEGATECALL ISZERO DUP1 ISZERO PUSH2 0x7FE JUMPI RETURNDATASIZE PUSH1 0x0 DUP1 RETURNDATACOPY RETURNDATASIZE PUSH1 0x0 REVERT JUMPDEST POP POP POP POP PUSH1 0x40 MLOAD RETURNDATASIZE PUSH1 0x1F NOT PUSH1 0x1F DUP3 ADD AND DUP3 ADD DUP1 PUSH1 0x40 MSTORE POP DUP2 ADD SWAP1 PUSH2 0x822 SWAP2 SWAP1 PUSH2 0xA0C JUMP JUMPDEST SWAP1 POP DUP5 PUSH2 0x82F DUP12 DUP4 PUSH2 0xC11 JUMP JUMPDEST PUSH2 0x839 SWAP2 SWAP1 PUSH2 0xBF1 JUMP JUMPDEST SWAP11 SWAP10 POP POP POP POP POP POP POP POP POP POP JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH20 0x0 PUSH4 0xD573D615 PUSH2 0x873 DUP10 PUSH1 0x20 ADD MLOAD DUP10 DUP10 PUSH2 0x4B4 JUMP JUMPDEST PUSH1 0x40 DUP1 DUP12 ADD MLOAD DUP12 MLOAD PUSH1 0x60 DUP14 ADD MLOAD PUSH1 0x80 DUP15 ADD MLOAD SWAP4 MLOAD PUSH1 0x1 PUSH1 0x1 PUSH1 0xE0 SHL SUB NOT PUSH1 0xE0 DUP9 SWAP1 SHL AND DUP2 MSTORE PUSH2 0x8A9 SWAP6 SWAP5 DUP12 SWAP4 SWAP3 SWAP2 PUSH1 0x4 ADD PUSH2 0xBAD JUMP JUMPDEST PUSH1 0x20 PUSH1 0x40 MLOAD DUP1 DUP4 SUB DUP2 DUP7 DUP1 EXTCODESIZE ISZERO DUP1 ISZERO PUSH2 0x8C1 JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP GAS DELEGATECALL ISZERO DUP1 ISZERO PUSH2 0x8D5 JUMPI RETURNDATASIZE PUSH1 0x0 DUP1 RETURNDATACOPY RETURNDATASIZE PUSH1 0x0 REVERT JUMPDEST POP POP POP POP PUSH1 0x40 MLOAD RETURNDATASIZE PUSH1 0x1F NOT PUSH1 0x1F DUP3 ADD AND DUP3 ADD DUP1 PUSH1 0x40 MSTORE POP DUP2 ADD SWAP1 PUSH2 0x8F9 SWAP2 SWAP1 PUSH2 0xA0C JUMP JUMPDEST SWAP1 POP DUP4 DUP8 PUSH1 0x20 ADD MLOAD DUP3 PUSH2 0x90C SWAP2 SWAP1 PUSH2 0xC11 JUMP JUMPDEST PUSH2 0x916 SWAP2 SWAP1 PUSH2 0xBF1 JUMP JUMPDEST SWAP8 SWAP7 POP POP POP POP POP POP POP JUMP JUMPDEST DUP1 CALLDATALOAD DUP1 ISZERO ISZERO DUP2 EQ PUSH2 0x931 JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST SWAP2 SWAP1 POP JUMP JUMPDEST DUP1 CALLDATALOAD PUSH2 0x931 DUP2 PUSH2 0xC5D JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH1 0x0 DUP1 PUSH1 0x0 DUP6 DUP8 SUB PUSH2 0x120 DUP2 SLT ISZERO PUSH2 0x95A JUMPI DUP2 DUP3 REVERT JUMPDEST PUSH1 0xA0 DUP2 SLT ISZERO PUSH2 0x967 JUMPI DUP2 DUP3 REVERT JUMPDEST POP PUSH1 0x40 MLOAD PUSH1 0xA0 DUP2 ADD PUSH1 0x1 PUSH1 0x1 PUSH1 0x40 SHL SUB DUP2 GT DUP3 DUP3 LT OR ISZERO PUSH2 0x996 JUMPI PUSH4 0x4E487B71 PUSH1 0xE0 SHL DUP4 MSTORE PUSH1 0x41 PUSH1 0x4 MSTORE PUSH1 0x24 DUP4 REVERT JUMPDEST DUP1 PUSH1 0x40 MSTORE POP DUP7 CALLDATALOAD DUP2 MSTORE PUSH1 0x20 DUP8 ADD CALLDATALOAD PUSH1 0x20 DUP3 ADD MSTORE PUSH1 0x40 DUP8 ADD CALLDATALOAD PUSH1 0x40 DUP3 ADD MSTORE PUSH2 0x9BF PUSH1 0x60 DUP9 ADD PUSH2 0x921 JUMP JUMPDEST PUSH1 0x60 DUP3 ADD MSTORE PUSH2 0x9D0 PUSH1 0x80 DUP9 ADD PUSH2 0x921 JUMP JUMPDEST PUSH1 0x80 DUP3 ADD MSTORE SWAP5 POP PUSH1 0xA0 DUP7 ADD CALLDATALOAD SWAP4 POP PUSH1 0xC0 DUP7 ADD CALLDATALOAD SWAP3 POP PUSH2 0x9F1 PUSH1 0xE0 DUP8 ADD PUSH2 0x936 JUMP JUMPDEST SWAP2 POP PUSH2 0xA00 PUSH2 0x100 DUP8 ADD PUSH2 0x936 JUMP JUMPDEST SWAP1 POP SWAP3 SWAP6 POP SWAP3 SWAP6 SWAP1 SWAP4 POP JUMP JUMPDEST PUSH1 0x0 PUSH1 0x20 DUP3 DUP5 SUB SLT ISZERO PUSH2 0xA1D JUMPI DUP1 DUP2 REVERT JUMPDEST POP MLOAD SWAP2 SWAP1 POP JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH1 0x40 DUP4 DUP6 SUB SLT ISZERO PUSH2 0xA36 JUMPI DUP2 DUP3 REVERT JUMPDEST DUP3 CALLDATALOAD SWAP2 POP PUSH1 0x20 DUP4 ADD CALLDATALOAD PUSH2 0xA48 DUP2 PUSH2 0xC5D JUMP JUMPDEST DUP1 SWAP2 POP POP SWAP3 POP SWAP3 SWAP1 POP JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH1 0x0 PUSH1 0x60 DUP5 DUP7 SUB SLT ISZERO PUSH2 0xA67 JUMPI DUP3 DUP4 REVERT JUMPDEST DUP4 CALLDATALOAD SWAP3 POP PUSH1 0x20 DUP5 ADD CALLDATALOAD PUSH2 0xA79 DUP2 PUSH2 0xC5D JUMP JUMPDEST SWAP2 POP PUSH1 0x40 DUP5 ADD CALLDATALOAD PUSH2 0xA89 DUP2 PUSH2 0xC5D JUMP JUMPDEST DUP1 SWAP2 POP POP SWAP3 POP SWAP3 POP SWAP3 JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH1 0x0 DUP1 PUSH1 0x0 DUP1 PUSH1 0x0 DUP1 PUSH2 0x100 DUP10 DUP12 SUB SLT ISZERO PUSH2 0xAB0 JUMPI DUP3 DUP4 REVERT JUMPDEST DUP9 CALLDATALOAD SWAP8 POP PUSH1 0x20 DUP10 ADD CALLDATALOAD SWAP7 POP PUSH1 0x40 DUP10 ADD CALLDATALOAD SWAP6 POP PUSH2 0xACE PUSH1 0x60 DUP11 ADD PUSH2 0x921 JUMP JUMPDEST SWAP5 POP PUSH2 0xADC PUSH1 0x80 DUP11 ADD PUSH2 0x921 JUMP JUMPDEST SWAP4 POP PUSH1 0xA0 DUP10 ADD CALLDATALOAD SWAP3 POP PUSH1 0xC0 DUP10 ADD CALLDATALOAD PUSH2 0xAF3 DUP2 PUSH2 0xC5D JUMP JUMPDEST SWAP2 POP PUSH1 0xE0 DUP10 ADD CALLDATALOAD PUSH2 0xB03 DUP2 PUSH2 0xC5D JUMP JUMPDEST DUP1 SWAP2 POP POP SWAP3 SWAP6 SWAP9 POP SWAP3 SWAP6 SWAP9 SWAP1 SWAP4 SWAP7 POP JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH1 0x0 DUP1 PUSH1 0x0 DUP1 PUSH1 0x0 PUSH1 0xE0 DUP9 DUP11 SUB SLT ISZERO PUSH2 0xB2E JUMPI DUP3 DUP4 REVERT JUMPDEST DUP8 CALLDATALOAD SWAP7 POP PUSH1 0x20 DUP9 ADD CALLDATALOAD SWAP6 POP PUSH1 0x40 DUP9 ADD CALLDATALOAD SWAP5 POP PUSH1 0x60 DUP9 ADD CALLDATALOAD PUSH1 0x3 DUP2 LT PUSH2 0xB51 JUMPI DUP4 DUP5 REVERT JUMPDEST SWAP4 POP PUSH1 0x80 DUP9 ADD CALLDATALOAD SWAP3 POP PUSH1 0xA0 DUP9 ADD CALLDATALOAD PUSH2 0xB68 DUP2 PUSH2 0xC5D JUMP JUMPDEST SWAP2 POP PUSH1 0xC0 DUP9 ADD CALLDATALOAD PUSH2 0xB78 DUP2 PUSH2 0xC5D JUMP JUMPDEST DUP1 SWAP2 POP POP SWAP3 SWAP6 SWAP9 SWAP2 SWAP5 SWAP8 POP SWAP3 SWAP6 POP JUMP JUMPDEST SWAP5 DUP6 MSTORE PUSH1 0x20 DUP6 ADD SWAP4 SWAP1 SWAP4 MSTORE PUSH1 0x40 DUP5 ADD SWAP2 SWAP1 SWAP2 MSTORE PUSH1 0x60 DUP4 ADD MSTORE ISZERO ISZERO PUSH1 0x80 DUP3 ADD MSTORE PUSH1 0xA0 ADD SWAP1 JUMP JUMPDEST SWAP6 DUP7 MSTORE PUSH1 0x20 DUP7 ADD SWAP5 SWAP1 SWAP5 MSTORE PUSH1 0x40 DUP6 ADD SWAP3 SWAP1 SWAP3 MSTORE PUSH1 0x60 DUP5 ADD MSTORE ISZERO ISZERO PUSH1 0x80 DUP4 ADD MSTORE ISZERO ISZERO PUSH1 0xA0 DUP3 ADD MSTORE PUSH1 0xC0 ADD SWAP1 JUMP JUMPDEST PUSH1 0x0 DUP3 NOT DUP3 GT ISZERO PUSH2 0xBEC JUMPI PUSH2 0xBEC PUSH2 0xC47 JUMP JUMPDEST POP ADD SWAP1 JUMP JUMPDEST PUSH1 0x0 DUP3 PUSH2 0xC0C JUMPI PUSH4 0x4E487B71 PUSH1 0xE0 SHL DUP2 MSTORE PUSH1 0x12 PUSH1 0x4 MSTORE PUSH1 0x24 DUP2 REVERT JUMPDEST POP DIV SWAP1 JUMP JUMPDEST PUSH1 0x0 DUP2 PUSH1 0x0 NOT DIV DUP4 GT DUP3 ISZERO ISZERO AND ISZERO PUSH2 0xC2B JUMPI PUSH2 0xC2B PUSH2 0xC47 JUMP JUMPDEST POP MUL SWAP1 JUMP JUMPDEST PUSH1 0x0 DUP3 DUP3 LT ISZERO PUSH2 0xC42 JUMPI PUSH2 0xC42 PUSH2 0xC47 JUMP JUMPDEST POP SUB SWAP1 JUMP JUMPDEST PUSH4 0x4E487B71 PUSH1 0xE0 SHL PUSH1 0x0 MSTORE PUSH1 0x11 PUSH1 0x4 MSTORE PUSH1 0x24 PUSH1 0x0 REVERT JUMPDEST PUSH1 0x1 PUSH1 0x1 PUSH1 0xA0 SHL SUB DUP2 AND DUP2 EQ PUSH2 0xC72 JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP JUMP INVALID LOG2 PUSH5 0x6970667358 0x22 SLT KECCAK256 0xC4 CHAINID PUSH14 0xD2885F329DD275A6D421589E06C8 SWAP8 SWAP1 0xF8 0xCC 0xC6 0xB3 ORIGIN 0xEA REVERT 0xDC SWAP11 0x4F 0xB7 0x48 0xED PUSH5 0x736F6C6343 STOP ADDMOD DIV STOP CALLER ", "sha1": "27aa13abb00d865bc19db322c9c1df26aefa7aba", "source": "// SPDX-License-Identifier: BUSL-1.1\n\npragma solidity ^0.8.0;\n\n/**\n * Smart contract library of mathematical functions operating with signed\n * 64.64-bit fixed point numbers.  Signed 64.64-bit fixed point number is\n * basically a simple fraction whose numerator is signed 128-bit integer and\n * denominator is 2^64.  As long as denominator is always the same, there is no\n * need to store it, thus in Solidity signed 64.64-bit fixed point numbers are\n * represented by int128 type holding only the numerator.\n */\nimport \"../Libraries/OptionMath.sol\";\nimport \"../OptionsUtils/OptionConfigUnintialized.sol\";\nimport \"../Interfaces/Interfaces.sol\";\nimport \"../Pool/BufferEpocPoolV2Unintialized.sol\";\n\nlibrary FeeCalculator {\n    /**\n     * @notice Calculate the current Utilisation\n     * @param amount Option amount\n     * @param pool The pool selling the option\n     * @return utilization Current utilization\n     */\n    function getNewUtilisation(\n        uint256 amount,\n        BufferEpocPoolV2Unintialized pool\n    ) public view returns (uint256 utilization) {\n        uint256 poolBalance = pool.totalTokenXBalance();\n        require(poolBalance > 0, \"O8\");\n\n        utilization = ((pool.lockedAmount() + amount) * 100e8) / poolBalance;\n    }\n\n    /**\n     * @notice Calculate the Utilisation adjusted ImpliedVol for the pool according to https://www.desmos.com/calculator/xdmhn97opd\n     * @param amount Option amount\n     * @param pool The pool selling the option\n     * @param config The option configuration\n     * @return iv The adjusted ImpliedVol\n     */\n    function currentImpliedVolatility(\n        uint256 amount,\n        BufferEpocPoolV2Unintialized pool,\n        OptionConfigUnintialized config\n    ) public view returns (uint256 iv) {\n        iv = config.impliedVolRate();\n        uint256 utilization = getNewUtilisation(amount, pool);\n        if (utilization > 40e8) {\n            iv += (iv * (utilization - 40e8)) / config.utilizationRate();\n        }\n    }\n\n    /**\n     * @notice Used for getting the price for Options in tokenX\n     * @param period Option period in seconds (1 days <= period <= 4 weeks)\n     * @param amount Option amount\n     * @param strike Strike price of the option\n     * @param optionType Type of the Option\n     * @param currentPrice Current price of the underlying asset\n     * @param config The option configuration\n     * @param pool The pool selling the option\n     * @return total Total price to be paid\n     * @return settlementFee Amount to be distributed to the Buffer token holders\n     * @return premium Amount that covers the price difference in the ITM options\n     */\n    function fees(\n        uint256 period,\n        uint256 amount,\n        uint256 strike,\n        IBufferOptions.OptionType optionType,\n        uint256 currentPrice,\n        OptionConfigUnintialized config,\n        BufferEpocPoolV2Unintialized pool\n    )\n        public\n        view\n        returns (\n            uint256 total,\n            uint256 settlementFee,\n            uint256 premium\n        )\n    {\n        // usdPremium per amount is USD Price of the option in 1e8\n        uint256 usdPremium = OptionMath.blackScholesPrice(\n            currentImpliedVolatility(amount, pool, config),\n            strike,\n            currentPrice,\n            period,\n            optionType == IBufferOptions.OptionType.Call\n        );\n        premium = (usdPremium * amount) / currentPrice;\n        settlementFee = getSettlementFee(amount, config);\n        total = settlementFee + premium;\n    }\n\n    /**\n     * @notice Used for getting the price for Options in tokenX\n     * @param period Option period in seconds (1 days <= period <= 4 weeks)\n     * @param amount Option amount\n     * @param strike Strike price of the option\n     * @param optionType Type of the Option\n     * @param currentPrice Current price of the underlying asset\n     * @param config The option configuration\n     * @param pool The pool selling the option\n     * @return total Total price to be paid\n     * @return settlementFee Amount to be distributed to the Buffer token holders\n     * @return premium Amount that covers the price difference in the ITM options\n     */\n    function feesSuccessOptions(\n        uint256 period,\n        uint256 amount,\n        uint256 strike,\n        IBufferOptions.OptionType optionType,\n        uint256 currentPrice,\n        OptionConfigUnintialized config,\n        BufferEpocPoolV2Unintialized pool\n    )\n        public\n        view\n        returns (\n            uint256 total,\n            uint256 settlementFee,\n            uint256 premium\n        )\n    {\n        // usdPremium per amount is USD Price of the option in 1e8\n        uint256 usdPremium = OptionMath.blackScholesPrice(\n            currentImpliedVolatility(amount, pool, config),\n            strike,\n            currentPrice,\n            period,\n            optionType == IBufferOptions.OptionType.Call\n        );\n        premium = ((usdPremium + currentPrice) * amount) / currentPrice;\n        settlementFee = getSettlementFee(amount, config);\n        total = settlementFee + premium;\n    }\n\n    /**\n     * @notice Used for getting the price for Options in USD\n     * @param period Option period in seconds (1 days <= period <= 4 weeks)\n     * @param amount Option amount\n     * @param strike Strike price of the option\n     * @param optionType Type of the Option\n     * @param currentPrice Current price of the underlying asset\n     * @param config The option configuration\n     * @param pool The pool selling the option\n     * @return total Total price to be paid in USD\n     * @return settlementFee Amount to be distributed to the Buffer token holders in USD\n     * @return premium Amount that covers the price difference in the ITM options in USD\n     */\n    function feesUsd(\n        uint256 period,\n        uint256 amount,\n        uint256 strike,\n        IBufferOptions.OptionType optionType,\n        uint256 currentPrice,\n        OptionConfigUnintialized config,\n        BufferEpocPoolV2Unintialized pool\n    )\n        public\n        view\n        returns (\n            uint256 total,\n            uint256 settlementFee,\n            uint256 premium\n        )\n    {\n        // usdPremium per asset amount is USD Price of the option in 1e8\n        uint256 usdPremium = OptionMath.blackScholesPrice(\n            currentImpliedVolatility(amount, pool, config),\n            strike,\n            currentPrice,\n            period,\n            optionType == IBufferOptions.OptionType.Call\n        );\n        settlementFee = getSettlementFee(amount, config);\n        premium = (usdPremium * amount) / currentPrice;\n        total = settlementFee + premium;\n    }\n\n    /**\n     * @notice Used for getting the price for Binary Options\n     * @param period Option period in seconds (1 days <= period <= 4 weeks)\n     * @param amount Option amount\n     * @param strike Strike price of the option\n     * @param isYes whether the option isAbove or not\n     * @param isAbove whether the price will stay above this strike or not\n     * @param currentPrice Current price of the underlying asset\n     * @param config The option configuration\n     * @param pool The pool selling the option\n     * @return total Total price to be paid\n     * @return settlementFee Amount to be distributed to the Buffer token holders\n     * @return premium Amount that covers the price difference in the ITM options\n     */\n    function feesBinary(\n        uint256 period,\n        uint256 amount,\n        uint256 strike,\n        bool isYes,\n        bool isAbove,\n        uint256 currentPrice,\n        OptionConfigUnintialized config,\n        BufferEpocPoolV2Unintialized pool\n    )\n        external\n        view\n        returns (\n            uint256 total,\n            uint256 settlementFee,\n            uint256 premium\n        )\n    {\n        premium = getPremium(\n            amount,\n            pool,\n            config,\n            strike,\n            period,\n            currentPrice,\n            isYes,\n            isAbove\n        );\n        settlementFee = getSettlementFee(amount, config);\n        total = settlementFee + premium;\n    }\n\n    /**\n     * @notice Used for getting the price for Binary KPI Options\n     * @param optionDetails Details of the option to be priced\n     * @param currentPrice Current price of the tokenX\n     * @param KPI KPI value for option\n     * @param config Option config\n     * @param pool pool contract\n     * @return total Total price to be paid\n     * @return settlementFee Amount to be distributed to the Buffer token holders\n     * @return premium Amount that covers the price difference in the ITM options\n     */\n    function feesKPIBinary(\n        IBufferOptions.OptionDetails memory optionDetails,\n        uint256 currentPrice,\n        uint256 KPI,\n        OptionConfigUnintialized config,\n        BufferEpocPoolV2Unintialized pool\n    )\n        external\n        view\n        returns (\n            uint256 total,\n            uint256 settlementFee,\n            uint256 premium\n        )\n    {\n        premium = getPremiumBinary(\n            optionDetails,\n            pool,\n            config,\n            currentPrice,\n            KPI\n        );\n        settlementFee = getSettlementFee(optionDetails.amount, config);\n        total = settlementFee + premium;\n    }\n\n    /**\n     * @notice Calculates settlementFee\n     * @param amount Option amount\n     * @return fee Settlement fee amount\n     */\n    function getSettlementFee(uint256 amount, OptionConfigUnintialized config)\n        internal\n        view\n        returns (uint256 fee)\n    {\n        return (amount * config.settlementFeePercentage()) / 100;\n    }\n\n    function getPremium(\n        uint256 amount,\n        BufferEpocPoolV2Unintialized pool,\n        OptionConfigUnintialized config,\n        uint256 strike,\n        uint256 period,\n        uint256 currentPrice,\n        bool isYes,\n        bool isAbove\n    ) internal view returns (uint256 premium) {\n        // usdPremium per amount is USD Price of the option in 1e8\n        uint256 usdPremium = OptionMath.blackScholesPriceBinary(\n            currentImpliedVolatility(amount, pool, config),\n            strike,\n            currentPrice,\n            period,\n            isYes,\n            isAbove\n        );\n        premium = (usdPremium * amount) / currentPrice;\n    }\n\n    function getPremiumBinary(\n        IBufferOptions.OptionDetails memory optionDetails,\n        BufferEpocPoolV2Unintialized pool,\n        OptionConfigUnintialized config,\n        uint256 currentPrice,\n        uint256 KPI\n    ) internal view returns (uint256 premium) {\n        // TODO : check unit\n        // usdPremium per amount is USD Price of the option in 1e8\n        uint256 usdPremium = OptionMath.blackScholesPriceBinary(\n            currentImpliedVolatility(optionDetails.amount, pool, config),\n            optionDetails.strike,\n            KPI,\n            optionDetails.period,\n            optionDetails.isYes,\n            optionDetails.isAbove\n        );\n        premium = (usdPremium * optionDetails.amount) / currentPrice;\n    }\n}\n", "sourceMap": "697:10345:21:-:0;;;;;;;;;;;;;;;-1:-1:-1;;;697:10345:21;;;;;;;;;;;;;;;;;", "sourcePath": "contracts/Libraries/OptionFeeCalculator.sol", "deployment": {"address": "0xF8799f1a9057e067eCAdc3BfC18FDf7C14884c9E", "chainid": "97", "blockHeight": 20362293}}