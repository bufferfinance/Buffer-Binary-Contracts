{"allSourcePaths": {"21": "contracts/Libraries/OptionFeeCalculator.sol", "22": "contracts/Libraries/OptionMath.sol", "25": "contracts/Pool/BufferEpocPoolV2Unintialized.sol", "13": "/home/lenovo/.brownie/packages/OpenZeppelin/openzeppelin-contracts@4.3.2/contracts/utils/Context.sol", "4": "/home/lenovo/.brownie/packages/OpenZeppelin/openzeppelin-contracts@4.3.2/contracts/token/ERC20/ERC20.sol", "5": "/home/lenovo/.brownie/packages/OpenZeppelin/openzeppelin-contracts@4.3.2/contracts/token/ERC20/IERC20.sol", "6": "/home/lenovo/.brownie/packages/OpenZeppelin/openzeppelin-contracts@4.3.2/contracts/token/ERC20/extensions/IERC20Metadata.sol", "24": "contracts/OptionsUtils/OptionConfigUnintialized.sol"}, "bytecode": "610caf61003a600b82828239805160001a60731461002d57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600436106100775760003560e01c80634767b4b31461007c5780634fe8c640146100af578063540dd9af146100d0578063934ce3d6146100e35780639edf3516146100f6578063a5c8287514610109578063d69bde771461011c575b600080fd5b61008f61008a366004610b18565b61012f565b604080519384526020840192909252908201526060015b60405180910390f35b6100c26100bd366004610a28565b61022f565b6040519081526020016100a6565b61008f6100de366004610945565b61037c565b61008f6100f1366004610a98565b6103b7565b61008f610104366004610b18565b6103f4565b61008f610117366004610b18565b6104e4565b6100c261012a366004610a57565b6105bd565b60008060008073__OptionMath____________________________632c607c3b61015a8c888a6105bd565b8b8a8f60028e600281111561017f57634e487b7160e01b600052602160045260246000fd5b146040518663ffffffff1660e01b81526004016101a0959493929190610b8c565b60206040518083038186803b1580156101b857600080fd5b505af41580156101cc573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101f09190610a10565b9050866101fd8b83610c15565b6102079190610bf5565b91506102138a876106f4565b925061021f8284610bdd565b9350509750975097945050505050565b600080826001600160a01b031663d9ac10d96040518163ffffffff1660e01b815260040160206040518083038186803b15801561026b57600080fd5b505afa15801561027f573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102a39190610a10565b9050600081116102de5760405162461bcd60e51b815260206004820152600260248201526109e760f31b604482015260640160405180910390fd5b8084846001600160a01b0316636ab28bc86040518163ffffffff1660e01b815260040160206040518083038186803b15801561031957600080fd5b505afa15801561032d573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906103519190610a10565b61035b9190610bdd565b61036a906402540be400610c15565b6103749190610bf5565b949350505050565b600080600061038e8885878a8a610784565b905061039e8860200151866106f4565b91506103aa8183610bdd565b9250955095509592505050565b60008060006103cc8a85878c8f8b8e8e610862565b90506103d88a866106f4565b91506103e48183610bdd565b9250985098509895505050505050565b60008060008073__OptionMath____________________________632c607c3b61041f8c888a6105bd565b8b8a8f60028e600281111561044457634e487b7160e01b600052602160045260246000fd5b146040518663ffffffff1660e01b8152600401610465959493929190610b8c565b60206040518083038186803b15801561047d57600080fd5b505af4158015610491573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104b59190610a10565b90506104c18a876106f4565b9250866104ce8b83610c15565b6104d89190610bf5565b915061021f8284610bdd565b60008060008073__OptionMath____________________________632c607c3b61050f8c888a6105bd565b8b8a8f60028e600281111561053457634e487b7160e01b600052602160045260246000fd5b146040518663ffffffff1660e01b8152600401610555959493929190610b8c565b60206040518083038186803b15801561056d57600080fd5b505af4158015610581573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906105a59190610a10565b9050868a6105b38284610bdd565b6101fd9190610c15565b6000816001600160a01b03166318f88e5b6040518163ffffffff1660e01b815260040160206040518083038186803b1580156105f857600080fd5b505afa15801561060c573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906106309190610a10565b9050600061063e858561022f565b905063ee6b28008111156106ec57826001600160a01b0316636c321c8a6040518163ffffffff1660e01b815260040160206040518083038186803b15801561068557600080fd5b505afa158015610699573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906106bd9190610a10565b6106cb63ee6b280083610c34565b6106d59084610c15565b6106df9190610bf5565b6106e99083610bdd565b91505b509392505050565b60006064826001600160a01b031663f3fa34956040518163ffffffff1660e01b815260040160206040518083038186803b15801561073157600080fd5b505afa158015610745573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107699190610a10565b6107739085610c15565b61077d9190610bf5565b9392505050565b60008073__OptionMath____________________________63d573d6156107b0896020015189896105bd565b6040808b01518b5160608d015160808e015193516001600160e01b031960e088901b1681526107e695948b939291600401610bb1565b60206040518083038186803b1580156107fe57600080fd5b505af4158015610812573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108369190610a10565b90506305f5e10087602001518261084d9190610c15565b6108579190610bf5565b979650505050505050565b60008073__OptionMath____________________________63d573d61561088a8c8c8c6105bd565b89888a89896040518763ffffffff1660e01b81526004016108b096959493929190610bb1565b60206040518083038186803b1580156108c857600080fd5b505af41580156108dc573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109009190610a10565b90508461090d8b83610c15565b6109179190610bf5565b9a9950505050505050505050565b8035801515811461093557600080fd5b919050565b803561093581610c61565b600080600080600085870361012081121561095e578182fd5b60a081121561096b578182fd5b5060405160a081016001600160401b038111828210171561099a57634e487b7160e01b83526041600452602483fd5b80604052508635815260208701356020820152604087013560408201526109c360608801610925565b60608201526109d460808801610925565b6080820152945060a0860135935060c086013592506109f560e0870161093a565b9150610a04610100870161093a565b90509295509295909350565b600060208284031215610a21578081fd5b5051919050565b60008060408385031215610a3a578182fd5b823591506020830135610a4c81610c61565b809150509250929050565b600080600060608486031215610a6b578283fd5b833592506020840135610a7d81610c61565b91506040840135610a8d81610c61565b809150509250925092565b600080600080600080600080610100898b031215610ab4578283fd5b883597506020890135965060408901359550610ad260608a01610925565b9450610ae060808a01610925565b935060a0890135925060c0890135610af781610c61565b915060e0890135610b0781610c61565b809150509295985092959890939650565b600080600080600080600060e0888a031215610b32578283fd5b873596506020880135955060408801359450606088013560038110610b55578384fd5b93506080880135925060a0880135610b6c81610c61565b915060c0880135610b7c81610c61565b8091505092959891949750929550565b9485526020850193909352604084019190915260608301521515608082015260a00190565b95865260208601949094526040850192909252606084015215156080830152151560a082015260c00190565b60008219821115610bf057610bf0610c4b565b500190565b600082610c1057634e487b7160e01b81526012600452602481fd5b500490565b6000816000190483118215151615610c2f57610c2f610c4b565b500290565b600082821015610c4657610c46610c4b565b500390565b634e487b7160e01b600052601160045260246000fd5b6001600160a01b0381168114610c7657600080fd5b5056fea2646970667358221220c52b557f7156e4c160987fd3cde3d8df9c1b8a58f06610cc5e9ba482563c761464736f6c63430008040033", "bytecodeSha1": "1f8303202d39872fa962c41662b77d53567c4868", "coverageMap": {"statements": {"21": {"FeeCalculator.fees": {"0": [3350, 3396], "1": [3406, 3454], "2": [3464, 3495]}, "FeeCalculator.getNewUtilisation": {"3": [1128, 1158], "4": [1169, 1237]}, "FeeCalculator.feesKPIBinary": {"5": [8966, 9110], "6": [9120, 9182], "7": [9192, 9223]}, "FeeCalculator.feesBinary": {"8": [7767, 7961], "9": [7971, 8019], "10": [8029, 8060]}, "FeeCalculator.feesUsd": {"11": [6462, 6510], "12": [6520, 6566], "13": [6576, 6607]}, "FeeCalculator.feesSuccessOptions": {"14": [4891, 4954]}, "FeeCalculator.currentImpliedVolatility": {"15": [1759, 1787], "16": [1898, 1958]}, "FeeCalculator.getSettlementFee": {"17": [9517, 9573]}, "FeeCalculator.getPremiumBinary": {"18": [10925, 10976]}, "FeeCalculator.getPremium": {"19": [10198, 10244]}}, "22": {}, "25": {}, "13": {}, "4": {}, "5": {}, "6": {}, "24": {}}, "branches": {"21": {"FeeCalculator.getNewUtilisation": {"20": [1136, 1151, true]}, "FeeCalculator.currentImpliedVolatility": {"21": [1864, 1882, false]}}, "22": {}, "25": {}, "13": {}, "4": {}, "5": {}, "6": {}, "24": {}}}, "dependencies": ["ABDKMath64x64", "BufferEpocPoolV2Unintialized", "OpenZeppelin/openzeppelin-contracts@4.3.2/Context", "OpenZeppelin/openzeppelin-contracts@4.3.2/ERC20", "OpenZeppelin/openzeppelin-contracts@4.3.2/IERC20", "OpenZeppelin/openzeppelin-contracts@4.3.2/IERC20Metadata", "OptionConfigUnintialized", "OptionMath"], "offset": [697, 10985], "type": "library", "abi": [{"inputs": [{"internalType": "uint256", "name": "amount", "type": "uint256"}, {"internalType": "contract BufferEpocPoolV2Unintialized", "name": "pool", "type": "BufferEpocPoolV2Unintialized"}, {"internalType": "contract OptionConfigUnintialized", "name": "config", "type": "OptionConfigUnintialized"}], "name": "currentImpliedVolatility", "outputs": [{"internalType": "uint256", "name": "iv", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "period", "type": "uint256"}, {"internalType": "uint256", "name": "amount", "type": "uint256"}, {"internalType": "uint256", "name": "strike", "type": "uint256"}, {"internalType": "enum IOptions.OptionType", "name": "optionType", "type": "IOptions.OptionType"}, {"internalType": "uint256", "name": "currentPrice", "type": "uint256"}, {"internalType": "contract OptionConfigUnintialized", "name": "config", "type": "OptionConfigUnintialized"}, {"internalType": "contract BufferEpocPoolV2Unintialized", "name": "pool", "type": "BufferEpocPoolV2Unintialized"}], "name": "fees", "outputs": [{"internalType": "uint256", "name": "total", "type": "uint256"}, {"internalType": "uint256", "name": "settlementFee", "type": "uint256"}, {"internalType": "uint256", "name": "premium", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "period", "type": "uint256"}, {"internalType": "uint256", "name": "amount", "type": "uint256"}, {"internalType": "uint256", "name": "strike", "type": "uint256"}, {"internalType": "bool", "name": "isYes", "type": "bool"}, {"internalType": "bool", "name": "isAbove", "type": "bool"}, {"internalType": "uint256", "name": "currentPrice", "type": "uint256"}, {"internalType": "contract OptionConfigUnintialized", "name": "config", "type": "OptionConfigUnintialized"}, {"internalType": "contract BufferEpocPoolV2Unintialized", "name": "pool", "type": "BufferEpocPoolV2Unintialized"}], "name": "feesBinary", "outputs": [{"internalType": "uint256", "name": "total", "type": "uint256"}, {"internalType": "uint256", "name": "settlementFee", "type": "uint256"}, {"internalType": "uint256", "name": "premium", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"components": [{"internalType": "uint256", "name": "period", "type": "uint256"}, {"internalType": "uint256", "name": "amount", "type": "uint256"}, {"internalType": "uint256", "name": "strike", "type": "uint256"}, {"internalType": "bool", "name": "isYes", "type": "bool"}, {"internalType": "bool", "name": "isAbove", "type": "bool"}], "internalType": "struct IOptions.OptionDetails", "name": "optionDetails", "type": "tuple"}, {"internalType": "uint256", "name": "currentPrice", "type": "uint256"}, {"internalType": "uint256", "name": "KPI", "type": "uint256"}, {"internalType": "contract OptionConfigUnintialized", "name": "config", "type": "OptionConfigUnintialized"}, {"internalType": "contract BufferEpocPoolV2Unintialized", "name": "pool", "type": "BufferEpocPoolV2Unintialized"}], "name": "feesKPIBinary", "outputs": [{"internalType": "uint256", "name": "total", "type": "uint256"}, {"internalType": "uint256", "name": "settlementFee", "type": "uint256"}, {"internalType": "uint256", "name": "premium", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "period", "type": "uint256"}, {"internalType": "uint256", "name": "amount", "type": "uint256"}, {"internalType": "uint256", "name": "strike", "type": "uint256"}, {"internalType": "enum IOptions.OptionType", "name": "optionType", "type": "IOptions.OptionType"}, {"internalType": "uint256", "name": "currentPrice", "type": "uint256"}, {"internalType": "contract OptionConfigUnintialized", "name": "config", "type": "OptionConfigUnintialized"}, {"internalType": "contract BufferEpocPoolV2Unintialized", "name": "pool", "type": "BufferEpocPoolV2Unintialized"}], "name": "feesSuccessOptions", "outputs": [{"internalType": "uint256", "name": "total", "type": "uint256"}, {"internalType": "uint256", "name": "settlementFee", "type": "uint256"}, {"internalType": "uint256", "name": "premium", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "period", "type": "uint256"}, {"internalType": "uint256", "name": "amount", "type": "uint256"}, {"internalType": "uint256", "name": "strike", "type": "uint256"}, {"internalType": "enum IOptions.OptionType", "name": "optionType", "type": "IOptions.OptionType"}, {"internalType": "uint256", "name": "currentPrice", "type": "uint256"}, {"internalType": "contract OptionConfigUnintialized", "name": "config", "type": "OptionConfigUnintialized"}, {"internalType": "contract BufferEpocPoolV2Unintialized", "name": "pool", "type": "BufferEpocPoolV2Unintialized"}], "name": "feesUsd", "outputs": [{"internalType": "uint256", "name": "total", "type": "uint256"}, {"internalType": "uint256", "name": "settlementFee", "type": "uint256"}, {"internalType": "uint256", "name": "premium", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "amount", "type": "uint256"}, {"internalType": "contract BufferEpocPoolV2Unintialized", "name": "pool", "type": "BufferEpocPoolV2Unintialized"}], "name": "getNewUtilisation", "outputs": [{"internalType": "uint256", "name": "utilization", "type": "uint256"}], "stateMutability": "view", "type": "function"}], "ast": {"absolutePath": "contracts/Libraries/OptionFeeCalculator.sol", "exportedSymbols": {"ABDKMath64x64": [16687], "AccessControl": [17495], "AggregatorV3Interface": [13592], "BufferEpocPoolV2Unintialized": [7515], "Context": [12995], "ERC165": [19338], "ERC20": [4572], "FeeCalculator": [5098], "IAccessControl": [19111], "IBufferOptions": [13389], "IBufferRangeOptions": [13423], "IERC165": [19808], "IERC20": [13073], "IERC20Metadata": [13098], "ILiquidityPool": [13230], "INFTCore": [13692], "INFTReceiver": [13439], "IOptionWindowCreator": [13541], "IOptions": [13359], "IOptionsConfig": [13492], "IPancakePair": [13110], "IPriceProvider": [13631], "IRangeOptionsConfig": [13521], "ISlidingWindowOracle": [13763], "ISlidingWindowOracleV1": [13739], "ITwapPriceProvider": [13792], "OptionConfigUnintialized": [6301], "OptionMath": [17188], "Ownable": [3986], "Strings": [19314]}, "id": 5099, "license": "BUSL-1.1", "nodeType": "SourceUnit", "nodes": [{"id": 4574, "literals": ["solidity", "^", "0.8", ".0"], "nodeType": "PragmaDirective", "src": "38:23:21"}, {"absolutePath": "contracts/Libraries/OptionMath.sol", "file": "../Libraries/OptionMath.sol", "id": 4575, "nameLocation": "-1:-1:-1", "nodeType": "ImportDirective", "scope": 5099, "sourceUnit": 17189, "src": "513:37:21", "symbolAliases": [], "unitAlias": ""}, {"absolutePath": "contracts/OptionsUtils/OptionConfigUnintialized.sol", "file": "../OptionsUtils/OptionConfigUnintialized.sol", "id": 4576, "nameLocation": "-1:-1:-1", "nodeType": "ImportDirective", "scope": 5099, "sourceUnit": 6302, "src": "551:54:21", "symbolAliases": [], "unitAlias": ""}, {"absolutePath": "contracts/Interfaces/Interfaces.sol", "file": "../Interfaces/Interfaces.sol", "id": 4577, "nameLocation": "-1:-1:-1", "nodeType": "ImportDirective", "scope": 5099, "sourceUnit": 13793, "src": "606:38:21", "symbolAliases": [], "unitAlias": ""}, {"absolutePath": "contracts/Pool/BufferEpocPoolV2Unintialized.sol", "file": "../Pool/BufferEpocPoolV2Unintialized.sol", "id": 4578, "nameLocation": "-1:-1:-1", "nodeType": "ImportDirective", "scope": 5099, "sourceUnit": 7516, "src": "645:50:21", "symbolAliases": [], "unitAlias": ""}, {"abstract": false, "baseContracts": [], "contractDependencies": [], "contractKind": "library", "fullyImplemented": true, "id": 5098, "linearizedBaseContracts": [5098], "name": "FeeCalculator", "nameLocation": "705:13:21", "nodeType": "ContractDefinition", "nodes": [{"body": {"id": 4616, "nodeType": "Block", "src": "1061:183:21", "statements": [{"assignments": [4590], "declarations": [{"constant": false, "id": 4590, "mutability": "mutable", "name": "poolBalance", "nameLocation": "1079:11:21", "nodeType": "VariableDeclaration", "scope": 4616, "src": "1071:19:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4589, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "1071:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "id": 4594, "initialValue": {"arguments": [], "expression": {"argumentTypes": [], "expression": {"id": 4591, "name": "pool", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4584, "src": "1093:4:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7515", "typeString": "contract BufferEpocPoolV2Unintialized"}}, "id": 4592, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "totalTokenXBalance", "nodeType": "MemberAccess", "referencedDeclaration": 7478, "src": "1093:23:21", "typeDescriptions": {"typeIdentifier": "t_function_external_view$__$returns$_t_uint256_$", "typeString": "function () view external returns (uint256)"}}, "id": 4593, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "1093:25:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "VariableDeclarationStatement", "src": "1071:47:21"}, {"expression": {"arguments": [{"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4598, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4596, "name": "poolBalance", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4590, "src": "1136:11:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": ">", "rightExpression": {"hexValue": "30", "id": 4597, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "1150:1:21", "typeDescriptions": {"typeIdentifier": "t_rational_0_by_1", "typeString": "int_const 0"}, "value": "0"}, "src": "1136:15:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}, {"hexValue": "4f38", "id": 4599, "isConstant": false, "isLValue": false, "isPure": true, "kind": "string", "lValueRequested": false, "nodeType": "Literal", "src": "1153:4:21", "typeDescriptions": {"typeIdentifier": "t_stringliteral_694eb040654db27d285bc1da6a2956b58ad679956ab6c2a13bdd9499d1faacb7", "typeString": "literal_string \"O8\""}, "value": "O8"}], "expression": {"argumentTypes": [{"typeIdentifier": "t_bool", "typeString": "bool"}, {"typeIdentifier": "t_stringliteral_694eb040654db27d285bc1da6a2956b58ad679956ab6c2a13bdd9499d1faacb7", "typeString": "literal_string \"O8\""}], "id": 4595, "name": "require", "nodeType": "Identifier", "overloadedDeclarations": [-18, -18], "referencedDeclaration": -18, "src": "1128:7:21", "typeDescriptions": {"typeIdentifier": "t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$", "typeString": "function (bool,string memory) pure"}}, "id": 4600, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "1128:30:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_tuple$__$", "typeString": "tuple()"}}, "id": 4601, "nodeType": "ExpressionStatement", "src": "1128:30:21"}, {"expression": {"id": 4614, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4602, "name": "utilization", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4587, "src": "1169:11:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4613, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"components": [{"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4610, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"components": [{"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4607, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"arguments": [], "expression": {"argumentTypes": [], "expression": {"id": 4603, "name": "pool", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4584, "src": "1185:4:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7515", "typeString": "contract BufferEpocPoolV2Unintialized"}}, "id": 4604, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "lockedAmount", "nodeType": "MemberAccess", "referencedDeclaration": 6327, "src": "1185:17:21", "typeDescriptions": {"typeIdentifier": "t_function_external_view$__$returns$_t_uint256_$", "typeString": "function () view external returns (uint256)"}}, "id": 4605, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "1185:19:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "+", "rightExpression": {"id": 4606, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4581, "src": "1207:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "1185:28:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "id": 4608, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "1184:30:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "*", "rightExpression": {"hexValue": "3130306538", "id": 4609, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "1217:5:21", "typeDescriptions": {"typeIdentifier": "t_rational_10000000000_by_1", "typeString": "int_const 10000000000"}, "value": "100e8"}, "src": "1184:38:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "id": 4611, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "1183:40:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "/", "rightExpression": {"id": 4612, "name": "poolBalance", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4590, "src": "1226:11:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "1183:54:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "1169:68:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4615, "nodeType": "ExpressionStatement", "src": "1169:68:21"}]}, "documentation": {"id": 4579, "nodeType": "StructuredDocumentation", "src": "725:189:21", "text": " @notice Calculate the current Utilisation\n @param amount Option amount\n @param pool The pool selling the option\n @return utilization Current utilization"}, "functionSelector": "4fe8c640", "id": 4617, "implemented": true, "kind": "function", "modifiers": [], "name": "getNewUtilisation", "nameLocation": "928:17:21", "nodeType": "FunctionDefinition", "parameters": {"id": 4585, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4581, "mutability": "mutable", "name": "amount", "nameLocation": "963:6:21", "nodeType": "VariableDeclaration", "scope": 4617, "src": "955:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4580, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "955:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4584, "mutability": "mutable", "name": "pool", "nameLocation": "1008:4:21", "nodeType": "VariableDeclaration", "scope": 4617, "src": "979:33:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7515", "typeString": "contract BufferEpocPoolV2Unintialized"}, "typeName": {"id": 4583, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4582, "name": "BufferEpocPoolV2Unintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 7515, "src": "979:28:21"}, "referencedDeclaration": 7515, "src": "979:28:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7515", "typeString": "contract BufferEpocPoolV2Unintialized"}}, "visibility": "internal"}], "src": "945:73:21"}, "returnParameters": {"id": 4588, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4587, "mutability": "mutable", "name": "utilization", "nameLocation": "1048:11:21", "nodeType": "VariableDeclaration", "scope": 4617, "src": "1040:19:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4586, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "1040:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "src": "1039:21:21"}, "scope": 5098, "src": "919:325:21", "stateMutability": "view", "virtual": false, "visibility": "public"}, {"body": {"id": 4663, "nodeType": "Block", "src": "1749:226:21", "statements": [{"expression": {"id": 4635, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4631, "name": "iv", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4629, "src": "1759:2:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"arguments": [], "expression": {"argumentTypes": [], "expression": {"id": 4632, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4626, "src": "1764:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}}, "id": 4633, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "impliedVolRate", "nodeType": "MemberAccess", "referencedDeclaration": 5998, "src": "1764:21:21", "typeDescriptions": {"typeIdentifier": "t_function_external_view$__$returns$_t_uint256_$", "typeString": "function () view external returns (uint256)"}}, "id": 4634, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "1764:23:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "1759:28:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4636, "nodeType": "ExpressionStatement", "src": "1759:28:21"}, {"assignments": [4638], "declarations": [{"constant": false, "id": 4638, "mutability": "mutable", "name": "utilization", "nameLocation": "1805:11:21", "nodeType": "VariableDeclaration", "scope": 4663, "src": "1797:19:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4637, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "1797:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "id": 4643, "initialValue": {"arguments": [{"id": 4640, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4620, "src": "1837:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4641, "name": "pool", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4623, "src": "1845:4:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7515", "typeString": "contract BufferEpocPoolV2Unintialized"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7515", "typeString": "contract BufferEpocPoolV2Unintialized"}], "id": 4639, "name": "getNewUtilisation", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4617, "src": "1819:17:21", "typeDescriptions": {"typeIdentifier": "t_function_internal_view$_t_uint256_$_t_contract$_BufferEpocPoolV2Unintialized_$7515_$returns$_t_uint256_$", "typeString": "function (uint256,contract BufferEpocPoolV2Unintialized) view returns (uint256)"}}, "id": 4642, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "1819:31:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "VariableDeclarationStatement", "src": "1797:53:21"}, {"condition": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4646, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4644, "name": "utilization", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4638, "src": "1864:11:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": ">", "rightExpression": {"hexValue": "34306538", "id": 4645, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "1878:4:21", "typeDescriptions": {"typeIdentifier": "t_rational_4000000000_by_1", "typeString": "int_const 4000000000"}, "value": "40e8"}, "src": "1864:18:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}, "id": 4662, "nodeType": "IfStatement", "src": "1860:109:21", "trueBody": {"id": 4661, "nodeType": "Block", "src": "1884:85:21", "statements": [{"expression": {"id": 4659, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4647, "name": "iv", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4629, "src": "1898:2:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "+=", "rightHandSide": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4658, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"components": [{"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4653, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4648, "name": "iv", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4629, "src": "1905:2:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "*", "rightExpression": {"components": [{"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4651, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4649, "name": "utilization", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4638, "src": "1911:11:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "-", "rightExpression": {"hexValue": "34306538", "id": 4650, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "1925:4:21", "typeDescriptions": {"typeIdentifier": "t_rational_4000000000_by_1", "typeString": "int_const 4000000000"}, "value": "40e8"}, "src": "1911:18:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "id": 4652, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "1910:20:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "1905:25:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "id": 4654, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "1904:27:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "/", "rightExpression": {"arguments": [], "expression": {"argumentTypes": [], "expression": {"id": 4655, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4626, "src": "1934:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}}, "id": 4656, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "utilizationRate", "nodeType": "MemberAccess", "referencedDeclaration": 6013, "src": "1934:22:21", "typeDescriptions": {"typeIdentifier": "t_function_external_view$__$returns$_t_uint256_$", "typeString": "function () view external returns (uint256)"}}, "id": 4657, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "1934:24:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "1904:54:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "1898:60:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4660, "nodeType": "ExpressionStatement", "src": "1898:60:21"}]}}]}, "documentation": {"id": 4618, "nodeType": "StructuredDocumentation", "src": "1250:313:21", "text": " @notice Calculate the Utilisation adjusted ImpliedVol for the pool according to https://www.desmos.com/calculator/xdmhn97opd\n @param amount Option amount\n @param pool The pool selling the option\n @param config The option configuration\n @return iv The adjusted ImpliedVol"}, "functionSelector": "d69bde77", "id": 4664, "implemented": true, "kind": "function", "modifiers": [], "name": "currentImpliedVolatility", "nameLocation": "1577:24:21", "nodeType": "FunctionDefinition", "parameters": {"id": 4627, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4620, "mutability": "mutable", "name": "amount", "nameLocation": "1619:6:21", "nodeType": "VariableDeclaration", "scope": 4664, "src": "1611:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4619, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "1611:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4623, "mutability": "mutable", "name": "pool", "nameLocation": "1664:4:21", "nodeType": "VariableDeclaration", "scope": 4664, "src": "1635:33:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7515", "typeString": "contract BufferEpocPoolV2Unintialized"}, "typeName": {"id": 4622, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4621, "name": "BufferEpocPoolV2Unintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 7515, "src": "1635:28:21"}, "referencedDeclaration": 7515, "src": "1635:28:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7515", "typeString": "contract BufferEpocPoolV2Unintialized"}}, "visibility": "internal"}, {"constant": false, "id": 4626, "mutability": "mutable", "name": "config", "nameLocation": "1703:6:21", "nodeType": "VariableDeclaration", "scope": 4664, "src": "1678:31:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}, "typeName": {"id": 4625, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4624, "name": "OptionConfigUnintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 6301, "src": "1678:24:21"}, "referencedDeclaration": 6301, "src": "1678:24:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}}, "visibility": "internal"}], "src": "1601:114:21"}, "returnParameters": {"id": 4630, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4629, "mutability": "mutable", "name": "iv", "nameLocation": "1745:2:21", "nodeType": "VariableDeclaration", "scope": 4664, "src": "1737:10:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4628, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "1737:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "src": "1736:12:21"}, "scope": 5098, "src": "1568:407:21", "stateMutability": "view", "virtual": false, "visibility": "public"}, {"body": {"id": 4732, "nodeType": "Block", "src": "3026:476:21", "statements": [{"assignments": [4692], "declarations": [{"constant": false, "id": 4692, "mutability": "mutable", "name": "usdPremium", "nameLocation": "3111:10:21", "nodeType": "VariableDeclaration", "scope": 4732, "src": "3103:18:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4691, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "3103:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "id": 4709, "initialValue": {"arguments": [{"arguments": [{"id": 4696, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4669, "src": "3191:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4697, "name": "pool", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4682, "src": "3199:4:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7515", "typeString": "contract BufferEpocPoolV2Unintialized"}}, {"id": 4698, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4679, "src": "3205:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7515", "typeString": "contract BufferEpocPoolV2Unintialized"}, {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}], "id": 4695, "name": "currentImpliedVolatility", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4664, "src": "3166:24:21", "typeDescriptions": {"typeIdentifier": "t_function_internal_view$_t_uint256_$_t_contract$_BufferEpocPoolV2Unintialized_$7515_$_t_contract$_OptionConfigUnintialized_$6301_$returns$_t_uint256_$", "typeString": "function (uint256,contract BufferEpocPoolV2Unintialized,contract OptionConfigUnintialized) view returns (uint256)"}}, "id": 4699, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "3166:46:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4700, "name": "strike", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4671, "src": "3226:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4701, "name": "currentPrice", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4676, "src": "3246:12:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4702, "name": "period", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4667, "src": "3272:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"commonType": {"typeIdentifier": "t_enum$_OptionType_$13281", "typeString": "enum IOptions.OptionType"}, "id": 4707, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4703, "name": "optionType", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4674, "src": "3292:10:21", "typeDescriptions": {"typeIdentifier": "t_enum$_OptionType_$13281", "typeString": "enum IOptions.OptionType"}}, "nodeType": "BinaryOperation", "operator": "==", "rightExpression": {"expression": {"expression": {"id": 4704, "name": "IOptions", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 13359, "src": "3306:8:21", "typeDescriptions": {"typeIdentifier": "t_type$_t_contract$_IOptions_$13359_$", "typeString": "type(contract IOptions)"}}, "id": 4705, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "OptionType", "nodeType": "MemberAccess", "referencedDeclaration": 13281, "src": "3306:19:21", "typeDescriptions": {"typeIdentifier": "t_type$_t_enum$_OptionType_$13281_$", "typeString": "type(enum IOptions.OptionType)"}}, "id": 4706, "isConstant": false, "isLValue": false, "isPure": true, "lValueRequested": false, "memberName": "Call", "nodeType": "MemberAccess", "referencedDeclaration": 13280, "src": "3306:24:21", "typeDescriptions": {"typeIdentifier": "t_enum$_OptionType_$13281", "typeString": "enum IOptions.OptionType"}}, "src": "3292:38:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_bool", "typeString": "bool"}], "expression": {"id": 4693, "name": "OptionMath", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 17188, "src": "3124:10:21", "typeDescriptions": {"typeIdentifier": "t_type$_t_contract$_OptionMath_$17188_$", "typeString": "type(library OptionMath)"}}, "id": 4694, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "blackScholesPrice", "nodeType": "MemberAccess", "referencedDeclaration": 16892, "src": "3124:28:21", "typeDescriptions": {"typeIdentifier": "t_function_delegatecall_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_bool_$returns$_t_uint256_$", "typeString": "function (uint256,uint256,uint256,uint256,bool) pure returns (uint256)"}}, "id": 4708, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "3124:216:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "VariableDeclarationStatement", "src": "3103:237:21"}, {"expression": {"id": 4717, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4710, "name": "premium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4689, "src": "3350:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4716, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"components": [{"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4713, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4711, "name": "usdPremium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4692, "src": "3361:10:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "*", "rightExpression": {"id": 4712, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4669, "src": "3374:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "3361:19:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "id": 4714, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "3360:21:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "/", "rightExpression": {"id": 4715, "name": "currentPrice", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4676, "src": "3384:12:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "3360:36:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "3350:46:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4718, "nodeType": "ExpressionStatement", "src": "3350:46:21"}, {"expression": {"id": 4724, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4719, "name": "settlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4687, "src": "3406:13:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"arguments": [{"id": 4721, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4669, "src": "3439:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4722, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4679, "src": "3447:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}], "id": 4720, "name": "getSettlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4998, "src": "3422:16:21", "typeDescriptions": {"typeIdentifier": "t_function_internal_view$_t_uint256_$_t_contract$_OptionConfigUnintialized_$6301_$returns$_t_uint256_$", "typeString": "function (uint256,contract OptionConfigUnintialized) view returns (uint256)"}}, "id": 4723, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "3422:32:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "3406:48:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4725, "nodeType": "ExpressionStatement", "src": "3406:48:21"}, {"expression": {"id": 4730, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4726, "name": "total", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4685, "src": "3464:5:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4729, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4727, "name": "settlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4687, "src": "3472:13:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "+", "rightExpression": {"id": 4728, "name": "premium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4689, "src": "3488:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "3472:23:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "3464:31:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4731, "nodeType": "ExpressionStatement", "src": "3464:31:21"}]}, "documentation": {"id": 4665, "nodeType": "StructuredDocumentation", "src": "1981:644:21", "text": " @notice Used for getting the price for Options in tokenX\n @param period Option period in seconds (1 days <= period <= 4 weeks)\n @param amount Option amount\n @param strike Strike price of the option\n @param optionType Type of the Option\n @param currentPrice Current price of the underlying asset\n @param config The option configuration\n @param pool The pool selling the option\n @return total Total price to be paid\n @return settlementFee Amount to be distributed to the Buffer token holders\n @return premium Amount that covers the price difference in the ITM options"}, "functionSelector": "4767b4b3", "id": 4733, "implemented": true, "kind": "function", "modifiers": [], "name": "fees", "nameLocation": "2639:4:21", "nodeType": "FunctionDefinition", "parameters": {"id": 4683, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4667, "mutability": "mutable", "name": "period", "nameLocation": "2661:6:21", "nodeType": "VariableDeclaration", "scope": 4733, "src": "2653:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4666, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "2653:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4669, "mutability": "mutable", "name": "amount", "nameLocation": "2685:6:21", "nodeType": "VariableDeclaration", "scope": 4733, "src": "2677:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4668, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "2677:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4671, "mutability": "mutable", "name": "strike", "nameLocation": "2709:6:21", "nodeType": "VariableDeclaration", "scope": 4733, "src": "2701:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4670, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "2701:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4674, "mutability": "mutable", "name": "optionType", "nameLocation": "2745:10:21", "nodeType": "VariableDeclaration", "scope": 4733, "src": "2725:30:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_enum$_OptionType_$13281", "typeString": "enum IOptions.OptionType"}, "typeName": {"id": 4673, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4672, "name": "IOptions.OptionType", "nodeType": "IdentifierPath", "referencedDeclaration": 13281, "src": "2725:19:21"}, "referencedDeclaration": 13281, "src": "2725:19:21", "typeDescriptions": {"typeIdentifier": "t_enum$_OptionType_$13281", "typeString": "enum IOptions.OptionType"}}, "visibility": "internal"}, {"constant": false, "id": 4676, "mutability": "mutable", "name": "currentPrice", "nameLocation": "2773:12:21", "nodeType": "VariableDeclaration", "scope": 4733, "src": "2765:20:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4675, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "2765:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4679, "mutability": "mutable", "name": "config", "nameLocation": "2820:6:21", "nodeType": "VariableDeclaration", "scope": 4733, "src": "2795:31:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}, "typeName": {"id": 4678, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4677, "name": "OptionConfigUnintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 6301, "src": "2795:24:21"}, "referencedDeclaration": 6301, "src": "2795:24:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}}, "visibility": "internal"}, {"constant": false, "id": 4682, "mutability": "mutable", "name": "pool", "nameLocation": "2865:4:21", "nodeType": "VariableDeclaration", "scope": 4733, "src": "2836:33:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7515", "typeString": "contract BufferEpocPoolV2Unintialized"}, "typeName": {"id": 4681, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4680, "name": "BufferEpocPoolV2Unintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 7515, "src": "2836:28:21"}, "referencedDeclaration": 7515, "src": "2836:28:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7515", "typeString": "contract BufferEpocPoolV2Unintialized"}}, "visibility": "internal"}], "src": "2643:232:21"}, "returnParameters": {"id": 4690, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4685, "mutability": "mutable", "name": "total", "nameLocation": "2942:5:21", "nodeType": "VariableDeclaration", "scope": 4733, "src": "2934:13:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4684, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "2934:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4687, "mutability": "mutable", "name": "settlementFee", "nameLocation": "2969:13:21", "nodeType": "VariableDeclaration", "scope": 4733, "src": "2961:21:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4686, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "2961:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4689, "mutability": "mutable", "name": "premium", "nameLocation": "3004:7:21", "nodeType": "VariableDeclaration", "scope": 4733, "src": "2996:15:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4688, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "2996:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "src": "2920:101:21"}, "scope": 5098, "src": "2630:872:21", "stateMutability": "view", "virtual": false, "visibility": "public"}, {"body": {"id": 4804, "nodeType": "Block", "src": "4567:493:21", "statements": [{"assignments": [4761], "declarations": [{"constant": false, "id": 4761, "mutability": "mutable", "name": "usdPremium", "nameLocation": "4652:10:21", "nodeType": "VariableDeclaration", "scope": 4804, "src": "4644:18:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4760, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4644:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "id": 4778, "initialValue": {"arguments": [{"arguments": [{"id": 4765, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4738, "src": "4732:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4766, "name": "pool", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4751, "src": "4740:4:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7515", "typeString": "contract BufferEpocPoolV2Unintialized"}}, {"id": 4767, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4748, "src": "4746:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7515", "typeString": "contract BufferEpocPoolV2Unintialized"}, {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}], "id": 4764, "name": "currentImpliedVolatility", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4664, "src": "4707:24:21", "typeDescriptions": {"typeIdentifier": "t_function_internal_view$_t_uint256_$_t_contract$_BufferEpocPoolV2Unintialized_$7515_$_t_contract$_OptionConfigUnintialized_$6301_$returns$_t_uint256_$", "typeString": "function (uint256,contract BufferEpocPoolV2Unintialized,contract OptionConfigUnintialized) view returns (uint256)"}}, "id": 4768, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "4707:46:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4769, "name": "strike", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4740, "src": "4767:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4770, "name": "currentPrice", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4745, "src": "4787:12:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4771, "name": "period", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4736, "src": "4813:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"commonType": {"typeIdentifier": "t_enum$_OptionType_$13281", "typeString": "enum IOptions.OptionType"}, "id": 4776, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4772, "name": "optionType", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4743, "src": "4833:10:21", "typeDescriptions": {"typeIdentifier": "t_enum$_OptionType_$13281", "typeString": "enum IOptions.OptionType"}}, "nodeType": "BinaryOperation", "operator": "==", "rightExpression": {"expression": {"expression": {"id": 4773, "name": "IOptions", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 13359, "src": "4847:8:21", "typeDescriptions": {"typeIdentifier": "t_type$_t_contract$_IOptions_$13359_$", "typeString": "type(contract IOptions)"}}, "id": 4774, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "OptionType", "nodeType": "MemberAccess", "referencedDeclaration": 13281, "src": "4847:19:21", "typeDescriptions": {"typeIdentifier": "t_type$_t_enum$_OptionType_$13281_$", "typeString": "type(enum IOptions.OptionType)"}}, "id": 4775, "isConstant": false, "isLValue": false, "isPure": true, "lValueRequested": false, "memberName": "Call", "nodeType": "MemberAccess", "referencedDeclaration": 13280, "src": "4847:24:21", "typeDescriptions": {"typeIdentifier": "t_enum$_OptionType_$13281", "typeString": "enum IOptions.OptionType"}}, "src": "4833:38:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_bool", "typeString": "bool"}], "expression": {"id": 4762, "name": "OptionMath", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 17188, "src": "4665:10:21", "typeDescriptions": {"typeIdentifier": "t_type$_t_contract$_OptionMath_$17188_$", "typeString": "type(library OptionMath)"}}, "id": 4763, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "blackScholesPrice", "nodeType": "MemberAccess", "referencedDeclaration": 16892, "src": "4665:28:21", "typeDescriptions": {"typeIdentifier": "t_function_delegatecall_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_bool_$returns$_t_uint256_$", "typeString": "function (uint256,uint256,uint256,uint256,bool) pure returns (uint256)"}}, "id": 4777, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "4665:216:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "VariableDeclarationStatement", "src": "4644:237:21"}, {"expression": {"id": 4789, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4779, "name": "premium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4758, "src": "4891:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4788, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"components": [{"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4785, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"components": [{"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4782, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4780, "name": "usdPremium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4761, "src": "4903:10:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "+", "rightExpression": {"id": 4781, "name": "currentPrice", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4745, "src": "4916:12:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "4903:25:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "id": 4783, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "4902:27:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "*", "rightExpression": {"id": 4784, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4738, "src": "4932:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "4902:36:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "id": 4786, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "4901:38:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "/", "rightExpression": {"id": 4787, "name": "currentPrice", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4745, "src": "4942:12:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "4901:53:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "4891:63:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4790, "nodeType": "ExpressionStatement", "src": "4891:63:21"}, {"expression": {"id": 4796, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4791, "name": "settlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4756, "src": "4964:13:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"arguments": [{"id": 4793, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4738, "src": "4997:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4794, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4748, "src": "5005:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}], "id": 4792, "name": "getSettlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4998, "src": "4980:16:21", "typeDescriptions": {"typeIdentifier": "t_function_internal_view$_t_uint256_$_t_contract$_OptionConfigUnintialized_$6301_$returns$_t_uint256_$", "typeString": "function (uint256,contract OptionConfigUnintialized) view returns (uint256)"}}, "id": 4795, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "4980:32:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "4964:48:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4797, "nodeType": "ExpressionStatement", "src": "4964:48:21"}, {"expression": {"id": 4802, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4798, "name": "total", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4754, "src": "5022:5:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4801, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4799, "name": "settlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4756, "src": "5030:13:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "+", "rightExpression": {"id": 4800, "name": "premium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4758, "src": "5046:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "5030:23:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "5022:31:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4803, "nodeType": "ExpressionStatement", "src": "5022:31:21"}]}, "documentation": {"id": 4734, "nodeType": "StructuredDocumentation", "src": "3508:644:21", "text": " @notice Used for getting the price for Options in tokenX\n @param period Option period in seconds (1 days <= period <= 4 weeks)\n @param amount Option amount\n @param strike Strike price of the option\n @param optionType Type of the Option\n @param currentPrice Current price of the underlying asset\n @param config The option configuration\n @param pool The pool selling the option\n @return total Total price to be paid\n @return settlementFee Amount to be distributed to the Buffer token holders\n @return premium Amount that covers the price difference in the ITM options"}, "functionSelector": "a5c82875", "id": 4805, "implemented": true, "kind": "function", "modifiers": [], "name": "feesSuccessOptions", "nameLocation": "4166:18:21", "nodeType": "FunctionDefinition", "parameters": {"id": 4752, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4736, "mutability": "mutable", "name": "period", "nameLocation": "4202:6:21", "nodeType": "VariableDeclaration", "scope": 4805, "src": "4194:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4735, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4194:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4738, "mutability": "mutable", "name": "amount", "nameLocation": "4226:6:21", "nodeType": "VariableDeclaration", "scope": 4805, "src": "4218:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4737, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4218:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4740, "mutability": "mutable", "name": "strike", "nameLocation": "4250:6:21", "nodeType": "VariableDeclaration", "scope": 4805, "src": "4242:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4739, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4242:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4743, "mutability": "mutable", "name": "optionType", "nameLocation": "4286:10:21", "nodeType": "VariableDeclaration", "scope": 4805, "src": "4266:30:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_enum$_OptionType_$13281", "typeString": "enum IOptions.OptionType"}, "typeName": {"id": 4742, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4741, "name": "IOptions.OptionType", "nodeType": "IdentifierPath", "referencedDeclaration": 13281, "src": "4266:19:21"}, "referencedDeclaration": 13281, "src": "4266:19:21", "typeDescriptions": {"typeIdentifier": "t_enum$_OptionType_$13281", "typeString": "enum IOptions.OptionType"}}, "visibility": "internal"}, {"constant": false, "id": 4745, "mutability": "mutable", "name": "currentPrice", "nameLocation": "4314:12:21", "nodeType": "VariableDeclaration", "scope": 4805, "src": "4306:20:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4744, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4306:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4748, "mutability": "mutable", "name": "config", "nameLocation": "4361:6:21", "nodeType": "VariableDeclaration", "scope": 4805, "src": "4336:31:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}, "typeName": {"id": 4747, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4746, "name": "OptionConfigUnintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 6301, "src": "4336:24:21"}, "referencedDeclaration": 6301, "src": "4336:24:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}}, "visibility": "internal"}, {"constant": false, "id": 4751, "mutability": "mutable", "name": "pool", "nameLocation": "4406:4:21", "nodeType": "VariableDeclaration", "scope": 4805, "src": "4377:33:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7515", "typeString": "contract BufferEpocPoolV2Unintialized"}, "typeName": {"id": 4750, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4749, "name": "BufferEpocPoolV2Unintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 7515, "src": "4377:28:21"}, "referencedDeclaration": 7515, "src": "4377:28:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7515", "typeString": "contract BufferEpocPoolV2Unintialized"}}, "visibility": "internal"}], "src": "4184:232:21"}, "returnParameters": {"id": 4759, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4754, "mutability": "mutable", "name": "total", "nameLocation": "4483:5:21", "nodeType": "VariableDeclaration", "scope": 4805, "src": "4475:13:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4753, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4475:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4756, "mutability": "mutable", "name": "settlementFee", "nameLocation": "4510:13:21", "nodeType": "VariableDeclaration", "scope": 4805, "src": "4502:21:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4755, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4502:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4758, "mutability": "mutable", "name": "premium", "nameLocation": "4545:7:21", "nodeType": "VariableDeclaration", "scope": 4805, "src": "4537:15:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4757, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4537:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "src": "4461:101:21"}, "scope": 5098, "src": "4157:903:21", "stateMutability": "view", "virtual": false, "visibility": "public"}, {"body": {"id": 4873, "nodeType": "Block", "src": "6132:482:21", "statements": [{"assignments": [4833], "declarations": [{"constant": false, "id": 4833, "mutability": "mutable", "name": "usdPremium", "nameLocation": "6223:10:21", "nodeType": "VariableDeclaration", "scope": 4873, "src": "6215:18:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4832, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "6215:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "id": 4850, "initialValue": {"arguments": [{"arguments": [{"id": 4837, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4810, "src": "6303:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4838, "name": "pool", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4823, "src": "6311:4:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7515", "typeString": "contract BufferEpocPoolV2Unintialized"}}, {"id": 4839, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4820, "src": "6317:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7515", "typeString": "contract BufferEpocPoolV2Unintialized"}, {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}], "id": 4836, "name": "currentImpliedVolatility", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4664, "src": "6278:24:21", "typeDescriptions": {"typeIdentifier": "t_function_internal_view$_t_uint256_$_t_contract$_BufferEpocPoolV2Unintialized_$7515_$_t_contract$_OptionConfigUnintialized_$6301_$returns$_t_uint256_$", "typeString": "function (uint256,contract BufferEpocPoolV2Unintialized,contract OptionConfigUnintialized) view returns (uint256)"}}, "id": 4840, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "6278:46:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4841, "name": "strike", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4812, "src": "6338:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4842, "name": "currentPrice", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4817, "src": "6358:12:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4843, "name": "period", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4808, "src": "6384:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"commonType": {"typeIdentifier": "t_enum$_OptionType_$13281", "typeString": "enum IOptions.OptionType"}, "id": 4848, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4844, "name": "optionType", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4815, "src": "6404:10:21", "typeDescriptions": {"typeIdentifier": "t_enum$_OptionType_$13281", "typeString": "enum IOptions.OptionType"}}, "nodeType": "BinaryOperation", "operator": "==", "rightExpression": {"expression": {"expression": {"id": 4845, "name": "IOptions", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 13359, "src": "6418:8:21", "typeDescriptions": {"typeIdentifier": "t_type$_t_contract$_IOptions_$13359_$", "typeString": "type(contract IOptions)"}}, "id": 4846, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "OptionType", "nodeType": "MemberAccess", "referencedDeclaration": 13281, "src": "6418:19:21", "typeDescriptions": {"typeIdentifier": "t_type$_t_enum$_OptionType_$13281_$", "typeString": "type(enum IOptions.OptionType)"}}, "id": 4847, "isConstant": false, "isLValue": false, "isPure": true, "lValueRequested": false, "memberName": "Call", "nodeType": "MemberAccess", "referencedDeclaration": 13280, "src": "6418:24:21", "typeDescriptions": {"typeIdentifier": "t_enum$_OptionType_$13281", "typeString": "enum IOptions.OptionType"}}, "src": "6404:38:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_bool", "typeString": "bool"}], "expression": {"id": 4834, "name": "OptionMath", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 17188, "src": "6236:10:21", "typeDescriptions": {"typeIdentifier": "t_type$_t_contract$_OptionMath_$17188_$", "typeString": "type(library OptionMath)"}}, "id": 4835, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "blackScholesPrice", "nodeType": "MemberAccess", "referencedDeclaration": 16892, "src": "6236:28:21", "typeDescriptions": {"typeIdentifier": "t_function_delegatecall_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_bool_$returns$_t_uint256_$", "typeString": "function (uint256,uint256,uint256,uint256,bool) pure returns (uint256)"}}, "id": 4849, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "6236:216:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "VariableDeclarationStatement", "src": "6215:237:21"}, {"expression": {"id": 4856, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4851, "name": "settlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4828, "src": "6462:13:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"arguments": [{"id": 4853, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4810, "src": "6495:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4854, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4820, "src": "6503:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}], "id": 4852, "name": "getSettlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4998, "src": "6478:16:21", "typeDescriptions": {"typeIdentifier": "t_function_internal_view$_t_uint256_$_t_contract$_OptionConfigUnintialized_$6301_$returns$_t_uint256_$", "typeString": "function (uint256,contract OptionConfigUnintialized) view returns (uint256)"}}, "id": 4855, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "6478:32:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "6462:48:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4857, "nodeType": "ExpressionStatement", "src": "6462:48:21"}, {"expression": {"id": 4865, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4858, "name": "premium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4830, "src": "6520:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4864, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"components": [{"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4861, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4859, "name": "usdPremium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4833, "src": "6531:10:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "*", "rightExpression": {"id": 4860, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4810, "src": "6544:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "6531:19:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "id": 4862, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "6530:21:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "/", "rightExpression": {"id": 4863, "name": "currentPrice", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4817, "src": "6554:12:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "6530:36:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "6520:46:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4866, "nodeType": "ExpressionStatement", "src": "6520:46:21"}, {"expression": {"id": 4871, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4867, "name": "total", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4826, "src": "6576:5:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4870, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4868, "name": "settlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4828, "src": "6584:13:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "+", "rightExpression": {"id": 4869, "name": "premium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4830, "src": "6600:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "6584:23:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "6576:31:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4872, "nodeType": "ExpressionStatement", "src": "6576:31:21"}]}, "documentation": {"id": 4806, "nodeType": "StructuredDocumentation", "src": "5066:662:21", "text": " @notice Used for getting the price for Options in USD\n @param period Option period in seconds (1 days <= period <= 4 weeks)\n @param amount Option amount\n @param strike Strike price of the option\n @param optionType Type of the Option\n @param currentPrice Current price of the underlying asset\n @param config The option configuration\n @param pool The pool selling the option\n @return total Total price to be paid in USD\n @return settlementFee Amount to be distributed to the Buffer token holders in USD\n @return premium Amount that covers the price difference in the ITM options in USD"}, "functionSelector": "9edf3516", "id": 4874, "implemented": true, "kind": "function", "modifiers": [], "name": "feesUsd", "nameLocation": "5742:7:21", "nodeType": "FunctionDefinition", "parameters": {"id": 4824, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4808, "mutability": "mutable", "name": "period", "nameLocation": "5767:6:21", "nodeType": "VariableDeclaration", "scope": 4874, "src": "5759:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4807, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "5759:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4810, "mutability": "mutable", "name": "amount", "nameLocation": "5791:6:21", "nodeType": "VariableDeclaration", "scope": 4874, "src": "5783:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4809, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "5783:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4812, "mutability": "mutable", "name": "strike", "nameLocation": "5815:6:21", "nodeType": "VariableDeclaration", "scope": 4874, "src": "5807:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4811, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "5807:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4815, "mutability": "mutable", "name": "optionType", "nameLocation": "5851:10:21", "nodeType": "VariableDeclaration", "scope": 4874, "src": "5831:30:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_enum$_OptionType_$13281", "typeString": "enum IOptions.OptionType"}, "typeName": {"id": 4814, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4813, "name": "IOptions.OptionType", "nodeType": "IdentifierPath", "referencedDeclaration": 13281, "src": "5831:19:21"}, "referencedDeclaration": 13281, "src": "5831:19:21", "typeDescriptions": {"typeIdentifier": "t_enum$_OptionType_$13281", "typeString": "enum IOptions.OptionType"}}, "visibility": "internal"}, {"constant": false, "id": 4817, "mutability": "mutable", "name": "currentPrice", "nameLocation": "5879:12:21", "nodeType": "VariableDeclaration", "scope": 4874, "src": "5871:20:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4816, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "5871:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4820, "mutability": "mutable", "name": "config", "nameLocation": "5926:6:21", "nodeType": "VariableDeclaration", "scope": 4874, "src": "5901:31:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}, "typeName": {"id": 4819, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4818, "name": "OptionConfigUnintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 6301, "src": "5901:24:21"}, "referencedDeclaration": 6301, "src": "5901:24:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}}, "visibility": "internal"}, {"constant": false, "id": 4823, "mutability": "mutable", "name": "pool", "nameLocation": "5971:4:21", "nodeType": "VariableDeclaration", "scope": 4874, "src": "5942:33:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7515", "typeString": "contract BufferEpocPoolV2Unintialized"}, "typeName": {"id": 4822, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4821, "name": "BufferEpocPoolV2Unintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 7515, "src": "5942:28:21"}, "referencedDeclaration": 7515, "src": "5942:28:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7515", "typeString": "contract BufferEpocPoolV2Unintialized"}}, "visibility": "internal"}], "src": "5749:232:21"}, "returnParameters": {"id": 4831, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4826, "mutability": "mutable", "name": "total", "nameLocation": "6048:5:21", "nodeType": "VariableDeclaration", "scope": 4874, "src": "6040:13:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4825, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "6040:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4828, "mutability": "mutable", "name": "settlementFee", "nameLocation": "6075:13:21", "nodeType": "VariableDeclaration", "scope": 4874, "src": "6067:21:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4827, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "6067:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4830, "mutability": "mutable", "name": "premium", "nameLocation": "6110:7:21", "nodeType": "VariableDeclaration", "scope": 4874, "src": "6102:15:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4829, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "6102:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "src": "6026:101:21"}, "scope": 5098, "src": "5733:881:21", "stateMutability": "view", "virtual": false, "visibility": "public"}, {"body": {"id": 4928, "nodeType": "Block", "src": "7757:310:21", "statements": [{"expression": {"id": 4913, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4902, "name": "premium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4900, "src": "7767:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"arguments": [{"id": 4904, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4879, "src": "7801:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4905, "name": "pool", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4893, "src": "7821:4:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7515", "typeString": "contract BufferEpocPoolV2Unintialized"}}, {"id": 4906, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4890, "src": "7839:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}}, {"id": 4907, "name": "strike", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4881, "src": "7859:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4908, "name": "period", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4877, "src": "7879:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4909, "name": "currentPrice", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4887, "src": "7899:12:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4910, "name": "isYes", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4883, "src": "7925:5:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}, {"id": 4911, "name": "isAbove", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4885, "src": "7944:7:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7515", "typeString": "contract BufferEpocPoolV2Unintialized"}, {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_bool", "typeString": "bool"}, {"typeIdentifier": "t_bool", "typeString": "bool"}], "id": 4903, "name": "getPremium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5047, "src": "7777:10:21", "typeDescriptions": {"typeIdentifier": "t_function_internal_view$_t_uint256_$_t_contract$_BufferEpocPoolV2Unintialized_$7515_$_t_contract$_OptionConfigUnintialized_$6301_$_t_uint256_$_t_uint256_$_t_uint256_$_t_bool_$_t_bool_$returns$_t_uint256_$", "typeString": "function (uint256,contract BufferEpocPoolV2Unintialized,contract OptionConfigUnintialized,uint256,uint256,uint256,bool,bool) view returns (uint256)"}}, "id": 4912, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "7777:184:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "7767:194:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4914, "nodeType": "ExpressionStatement", "src": "7767:194:21"}, {"expression": {"id": 4920, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4915, "name": "settlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4898, "src": "7971:13:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"arguments": [{"id": 4917, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4879, "src": "8004:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4918, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4890, "src": "8012:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}], "id": 4916, "name": "getSettlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4998, "src": "7987:16:21", "typeDescriptions": {"typeIdentifier": "t_function_internal_view$_t_uint256_$_t_contract$_OptionConfigUnintialized_$6301_$returns$_t_uint256_$", "typeString": "function (uint256,contract OptionConfigUnintialized) view returns (uint256)"}}, "id": 4919, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "7987:32:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "7971:48:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4921, "nodeType": "ExpressionStatement", "src": "7971:48:21"}, {"expression": {"id": 4926, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4922, "name": "total", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4896, "src": "8029:5:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4925, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4923, "name": "settlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4898, "src": "8037:13:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "+", "rightExpression": {"id": 4924, "name": "premium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4900, "src": "8053:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "8037:23:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "8029:31:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4927, "nodeType": "ExpressionStatement", "src": "8029:31:21"}]}, "documentation": {"id": 4875, "nodeType": "StructuredDocumentation", "src": "6620:726:21", "text": " @notice Used for getting the price for Binary Options\n @param period Option period in seconds (1 days <= period <= 4 weeks)\n @param amount Option amount\n @param strike Strike price of the option\n @param isYes whether the option isAbove or not\n @param isAbove whether the price will stay above this strike or not\n @param currentPrice Current price of the underlying asset\n @param config The option configuration\n @param pool The pool selling the option\n @return total Total price to be paid\n @return settlementFee Amount to be distributed to the Buffer token holders\n @return premium Amount that covers the price difference in the ITM options"}, "functionSelector": "934ce3d6", "id": 4929, "implemented": true, "kind": "function", "modifiers": [], "name": "feesBinary", "nameLocation": "7360:10:21", "nodeType": "FunctionDefinition", "parameters": {"id": 4894, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4877, "mutability": "mutable", "name": "period", "nameLocation": "7388:6:21", "nodeType": "VariableDeclaration", "scope": 4929, "src": "7380:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4876, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "7380:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4879, "mutability": "mutable", "name": "amount", "nameLocation": "7412:6:21", "nodeType": "VariableDeclaration", "scope": 4929, "src": "7404:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4878, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "7404:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4881, "mutability": "mutable", "name": "strike", "nameLocation": "7436:6:21", "nodeType": "VariableDeclaration", "scope": 4929, "src": "7428:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4880, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "7428:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4883, "mutability": "mutable", "name": "isYes", "nameLocation": "7457:5:21", "nodeType": "VariableDeclaration", "scope": 4929, "src": "7452:10:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}, "typeName": {"id": 4882, "name": "bool", "nodeType": "ElementaryTypeName", "src": "7452:4:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}, "visibility": "internal"}, {"constant": false, "id": 4885, "mutability": "mutable", "name": "isAbove", "nameLocation": "7477:7:21", "nodeType": "VariableDeclaration", "scope": 4929, "src": "7472:12:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}, "typeName": {"id": 4884, "name": "bool", "nodeType": "ElementaryTypeName", "src": "7472:4:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}, "visibility": "internal"}, {"constant": false, "id": 4887, "mutability": "mutable", "name": "currentPrice", "nameLocation": "7502:12:21", "nodeType": "VariableDeclaration", "scope": 4929, "src": "7494:20:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4886, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "7494:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4890, "mutability": "mutable", "name": "config", "nameLocation": "7549:6:21", "nodeType": "VariableDeclaration", "scope": 4929, "src": "7524:31:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}, "typeName": {"id": 4889, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4888, "name": "OptionConfigUnintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 6301, "src": "7524:24:21"}, "referencedDeclaration": 6301, "src": "7524:24:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}}, "visibility": "internal"}, {"constant": false, "id": 4893, "mutability": "mutable", "name": "pool", "nameLocation": "7594:4:21", "nodeType": "VariableDeclaration", "scope": 4929, "src": "7565:33:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7515", "typeString": "contract BufferEpocPoolV2Unintialized"}, "typeName": {"id": 4892, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4891, "name": "BufferEpocPoolV2Unintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 7515, "src": "7565:28:21"}, "referencedDeclaration": 7515, "src": "7565:28:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7515", "typeString": "contract BufferEpocPoolV2Unintialized"}}, "visibility": "internal"}], "src": "7370:234:21"}, "returnParameters": {"id": 4901, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4896, "mutability": "mutable", "name": "total", "nameLocation": "7673:5:21", "nodeType": "VariableDeclaration", "scope": 4929, "src": "7665:13:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4895, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "7665:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4898, "mutability": "mutable", "name": "settlementFee", "nameLocation": "7700:13:21", "nodeType": "VariableDeclaration", "scope": 4929, "src": "7692:21:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4897, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "7692:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4900, "mutability": "mutable", "name": "premium", "nameLocation": "7735:7:21", "nodeType": "VariableDeclaration", "scope": 4929, "src": "7727:15:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4899, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "7727:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "src": "7651:101:21"}, "scope": 5098, "src": "7351:716:21", "stateMutability": "view", "virtual": false, "visibility": "external"}, {"body": {"id": 4976, "nodeType": "Block", "src": "8956:274:21", "statements": [{"expression": {"id": 4960, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4952, "name": "premium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4950, "src": "8966:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"arguments": [{"id": 4954, "name": "optionDetails", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4933, "src": "9006:13:21", "typeDescriptions": {"typeIdentifier": "t_struct$_OptionDetails_$13345_memory_ptr", "typeString": "struct IOptions.OptionDetails memory"}}, {"id": 4955, "name": "pool", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4943, "src": "9033:4:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7515", "typeString": "contract BufferEpocPoolV2Unintialized"}}, {"id": 4956, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4940, "src": "9051:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}}, {"id": 4957, "name": "currentPrice", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4935, "src": "9071:12:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4958, "name": "KPI", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4937, "src": "9097:3:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_struct$_OptionDetails_$13345_memory_ptr", "typeString": "struct IOptions.OptionDetails memory"}, {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7515", "typeString": "contract BufferEpocPoolV2Unintialized"}, {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}], "id": 4953, "name": "getPremiumBinary", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5097, "src": "8976:16:21", "typeDescriptions": {"typeIdentifier": "t_function_internal_view$_t_struct$_OptionDetails_$13345_memory_ptr_$_t_contract$_BufferEpocPoolV2Unintialized_$7515_$_t_contract$_OptionConfigUnintialized_$6301_$_t_uint256_$_t_uint256_$returns$_t_uint256_$", "typeString": "function (struct IOptions.OptionDetails memory,contract BufferEpocPoolV2Unintialized,contract OptionConfigUnintialized,uint256,uint256) view returns (uint256)"}}, "id": 4959, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "8976:134:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "8966:144:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4961, "nodeType": "ExpressionStatement", "src": "8966:144:21"}, {"expression": {"id": 4968, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4962, "name": "settlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4948, "src": "9120:13:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"arguments": [{"expression": {"id": 4964, "name": "optionDetails", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4933, "src": "9153:13:21", "typeDescriptions": {"typeIdentifier": "t_struct$_OptionDetails_$13345_memory_ptr", "typeString": "struct IOptions.OptionDetails memory"}}, "id": 4965, "isConstant": false, "isLValue": true, "isPure": false, "lValueRequested": false, "memberName": "amount", "nodeType": "MemberAccess", "referencedDeclaration": 13338, "src": "9153:20:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4966, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4940, "src": "9175:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}], "id": 4963, "name": "getSettlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4998, "src": "9136:16:21", "typeDescriptions": {"typeIdentifier": "t_function_internal_view$_t_uint256_$_t_contract$_OptionConfigUnintialized_$6301_$returns$_t_uint256_$", "typeString": "function (uint256,contract OptionConfigUnintialized) view returns (uint256)"}}, "id": 4967, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "9136:46:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "9120:62:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4969, "nodeType": "ExpressionStatement", "src": "9120:62:21"}, {"expression": {"id": 4974, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4970, "name": "total", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4946, "src": "9192:5:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4973, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4971, "name": "settlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4948, "src": "9200:13:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "+", "rightExpression": {"id": 4972, "name": "premium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4950, "src": "9216:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "9200:23:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "9192:31:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4975, "nodeType": "ExpressionStatement", "src": "9192:31:21"}]}, "documentation": {"id": 4930, "nodeType": "StructuredDocumentation", "src": "8073:509:21", "text": " @notice Used for getting the price for Binary KPI Options\n @param optionDetails Details of the option to be priced\n @param currentPrice Current price of the tokenX\n @param KPI KPI value for option\n @param config Option config\n @param pool pool contract\n @return total Total price to be paid\n @return settlementFee Amount to be distributed to the Buffer token holders\n @return premium Amount that covers the price difference in the ITM options"}, "functionSelector": "540dd9af", "id": 4977, "implemented": true, "kind": "function", "modifiers": [], "name": "feesKPIBinary", "nameLocation": "8596:13:21", "nodeType": "FunctionDefinition", "parameters": {"id": 4944, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4933, "mutability": "mutable", "name": "optionDetails", "nameLocation": "8649:13:21", "nodeType": "VariableDeclaration", "scope": 4977, "src": "8619:43:21", "stateVariable": false, "storageLocation": "memory", "typeDescriptions": {"typeIdentifier": "t_struct$_OptionDetails_$13345_memory_ptr", "typeString": "struct IOptions.OptionDetails"}, "typeName": {"id": 4932, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4931, "name": "IOptions.OptionDetails", "nodeType": "IdentifierPath", "referencedDeclaration": 13345, "src": "8619:22:21"}, "referencedDeclaration": 13345, "src": "8619:22:21", "typeDescriptions": {"typeIdentifier": "t_struct$_OptionDetails_$13345_storage_ptr", "typeString": "struct IOptions.OptionDetails"}}, "visibility": "internal"}, {"constant": false, "id": 4935, "mutability": "mutable", "name": "currentPrice", "nameLocation": "8680:12:21", "nodeType": "VariableDeclaration", "scope": 4977, "src": "8672:20:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4934, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "8672:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4937, "mutability": "mutable", "name": "KPI", "nameLocation": "8710:3:21", "nodeType": "VariableDeclaration", "scope": 4977, "src": "8702:11:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4936, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "8702:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4940, "mutability": "mutable", "name": "config", "nameLocation": "8748:6:21", "nodeType": "VariableDeclaration", "scope": 4977, "src": "8723:31:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}, "typeName": {"id": 4939, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4938, "name": "OptionConfigUnintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 6301, "src": "8723:24:21"}, "referencedDeclaration": 6301, "src": "8723:24:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}}, "visibility": "internal"}, {"constant": false, "id": 4943, "mutability": "mutable", "name": "pool", "nameLocation": "8793:4:21", "nodeType": "VariableDeclaration", "scope": 4977, "src": "8764:33:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7515", "typeString": "contract BufferEpocPoolV2Unintialized"}, "typeName": {"id": 4942, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4941, "name": "BufferEpocPoolV2Unintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 7515, "src": "8764:28:21"}, "referencedDeclaration": 7515, "src": "8764:28:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7515", "typeString": "contract BufferEpocPoolV2Unintialized"}}, "visibility": "internal"}], "src": "8609:194:21"}, "returnParameters": {"id": 4951, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4946, "mutability": "mutable", "name": "total", "nameLocation": "8872:5:21", "nodeType": "VariableDeclaration", "scope": 4977, "src": "8864:13:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4945, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "8864:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4948, "mutability": "mutable", "name": "settlementFee", "nameLocation": "8899:13:21", "nodeType": "VariableDeclaration", "scope": 4977, "src": "8891:21:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4947, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "8891:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4950, "mutability": "mutable", "name": "premium", "nameLocation": "8934:7:21", "nodeType": "VariableDeclaration", "scope": 4977, "src": "8926:15:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4949, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "8926:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "src": "8850:101:21"}, "scope": 5098, "src": "8587:643:21", "stateMutability": "view", "virtual": false, "visibility": "external"}, {"body": {"id": 4997, "nodeType": "Block", "src": "9507:73:21", "statements": [{"expression": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4995, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"components": [{"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4992, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4988, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4980, "src": "9525:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "*", "rightExpression": {"arguments": [], "expression": {"argumentTypes": [], "expression": {"id": 4989, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4983, "src": "9534:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}}, "id": 4990, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "settlementFeePercentage", "nodeType": "MemberAccess", "referencedDeclaration": 6004, "src": "9534:30:21", "typeDescriptions": {"typeIdentifier": "t_function_external_view$__$returns$_t_uint256_$", "typeString": "function () view external returns (uint256)"}}, "id": 4991, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "9534:32:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "9525:41:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "id": 4993, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "9524:43:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "/", "rightExpression": {"hexValue": "313030", "id": 4994, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "9570:3:21", "typeDescriptions": {"typeIdentifier": "t_rational_100_by_1", "typeString": "int_const 100"}, "value": "100"}, "src": "9524:49:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "functionReturnParameters": 4987, "id": 4996, "nodeType": "Return", "src": "9517:56:21"}]}, "documentation": {"id": 4978, "nodeType": "StructuredDocumentation", "src": "9236:127:21", "text": " @notice Calculates settlementFee\n @param amount Option amount\n @return fee Settlement fee amount"}, "id": 4998, "implemented": true, "kind": "function", "modifiers": [], "name": "getSettlementFee", "nameLocation": "9377:16:21", "nodeType": "FunctionDefinition", "parameters": {"id": 4984, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4980, "mutability": "mutable", "name": "amount", "nameLocation": "9402:6:21", "nodeType": "VariableDeclaration", "scope": 4998, "src": "9394:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4979, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "9394:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4983, "mutability": "mutable", "name": "config", "nameLocation": "9435:6:21", "nodeType": "VariableDeclaration", "scope": 4998, "src": "9410:31:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}, "typeName": {"id": 4982, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4981, "name": "OptionConfigUnintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 6301, "src": "9410:24:21"}, "referencedDeclaration": 6301, "src": "9410:24:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}}, "visibility": "internal"}], "src": "9393:49:21"}, "returnParameters": {"id": 4987, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4986, "mutability": "mutable", "name": "fee", "nameLocation": "9498:3:21", "nodeType": "VariableDeclaration", "scope": 4998, "src": "9490:11:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4985, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "9490:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "src": "9489:13:21"}, "scope": 5098, "src": "9368:212:21", "stateMutability": "view", "virtual": false, "visibility": "internal"}, {"body": {"id": 5046, "nodeType": "Block", "src": "9880:371:21", "statements": [{"assignments": [5022], "declarations": [{"constant": false, "id": 5022, "mutability": "mutable", "name": "usdPremium", "nameLocation": "9965:10:21", "nodeType": "VariableDeclaration", "scope": 5046, "src": "9957:18:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 5021, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "9957:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "id": 5036, "initialValue": {"arguments": [{"arguments": [{"id": 5026, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5000, "src": "10051:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 5027, "name": "pool", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5003, "src": "10059:4:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7515", "typeString": "contract BufferEpocPoolV2Unintialized"}}, {"id": 5028, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5006, "src": "10065:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7515", "typeString": "contract BufferEpocPoolV2Unintialized"}, {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}], "id": 5025, "name": "currentImpliedVolatility", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4664, "src": "10026:24:21", "typeDescriptions": {"typeIdentifier": "t_function_internal_view$_t_uint256_$_t_contract$_BufferEpocPoolV2Unintialized_$7515_$_t_contract$_OptionConfigUnintialized_$6301_$returns$_t_uint256_$", "typeString": "function (uint256,contract BufferEpocPoolV2Unintialized,contract OptionConfigUnintialized) view returns (uint256)"}}, "id": 5029, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "10026:46:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 5030, "name": "strike", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5008, "src": "10086:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 5031, "name": "currentPrice", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5012, "src": "10106:12:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 5032, "name": "period", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5010, "src": "10132:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 5033, "name": "isYes", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5014, "src": "10152:5:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}, {"id": 5034, "name": "isAbove", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5016, "src": "10171:7:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_bool", "typeString": "bool"}, {"typeIdentifier": "t_bool", "typeString": "bool"}], "expression": {"id": 5023, "name": "OptionMath", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 17188, "src": "9978:10:21", "typeDescriptions": {"typeIdentifier": "t_type$_t_contract$_OptionMath_$17188_$", "typeString": "type(library OptionMath)"}}, "id": 5024, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "blackScholesPriceBinary", "nodeType": "MemberAccess", "referencedDeclaration": 17089, "src": "9978:34:21", "typeDescriptions": {"typeIdentifier": "t_function_delegatecall_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_bool_$_t_bool_$returns$_t_uint256_$", "typeString": "function (uint256,uint256,uint256,uint256,bool,bool) pure returns (uint256)"}}, "id": 5035, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "9978:210:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "VariableDeclarationStatement", "src": "9957:231:21"}, {"expression": {"id": 5044, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 5037, "name": "premium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5019, "src": "10198:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 5043, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"components": [{"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 5040, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 5038, "name": "usdPremium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5022, "src": "10209:10:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "*", "rightExpression": {"id": 5039, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5000, "src": "10222:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "10209:19:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "id": 5041, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "10208:21:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "/", "rightExpression": {"id": 5042, "name": "currentPrice", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5012, "src": "10232:12:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "10208:36:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "10198:46:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 5045, "nodeType": "ExpressionStatement", "src": "10198:46:21"}]}, "id": 5047, "implemented": true, "kind": "function", "modifiers": [], "name": "getPremium", "nameLocation": "9595:10:21", "nodeType": "FunctionDefinition", "parameters": {"id": 5017, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 5000, "mutability": "mutable", "name": "amount", "nameLocation": "9623:6:21", "nodeType": "VariableDeclaration", "scope": 5047, "src": "9615:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4999, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "9615:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 5003, "mutability": "mutable", "name": "pool", "nameLocation": "9668:4:21", "nodeType": "VariableDeclaration", "scope": 5047, "src": "9639:33:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7515", "typeString": "contract BufferEpocPoolV2Unintialized"}, "typeName": {"id": 5002, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 5001, "name": "BufferEpocPoolV2Unintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 7515, "src": "9639:28:21"}, "referencedDeclaration": 7515, "src": "9639:28:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7515", "typeString": "contract BufferEpocPoolV2Unintialized"}}, "visibility": "internal"}, {"constant": false, "id": 5006, "mutability": "mutable", "name": "config", "nameLocation": "9707:6:21", "nodeType": "VariableDeclaration", "scope": 5047, "src": "9682:31:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}, "typeName": {"id": 5005, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 5004, "name": "OptionConfigUnintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 6301, "src": "9682:24:21"}, "referencedDeclaration": 6301, "src": "9682:24:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}}, "visibility": "internal"}, {"constant": false, "id": 5008, "mutability": "mutable", "name": "strike", "nameLocation": "9731:6:21", "nodeType": "VariableDeclaration", "scope": 5047, "src": "9723:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 5007, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "9723:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 5010, "mutability": "mutable", "name": "period", "nameLocation": "9755:6:21", "nodeType": "VariableDeclaration", "scope": 5047, "src": "9747:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 5009, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "9747:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 5012, "mutability": "mutable", "name": "currentPrice", "nameLocation": "9779:12:21", "nodeType": "VariableDeclaration", "scope": 5047, "src": "9771:20:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 5011, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "9771:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 5014, "mutability": "mutable", "name": "isYes", "nameLocation": "9806:5:21", "nodeType": "VariableDeclaration", "scope": 5047, "src": "9801:10:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}, "typeName": {"id": 5013, "name": "bool", "nodeType": "ElementaryTypeName", "src": "9801:4:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}, "visibility": "internal"}, {"constant": false, "id": 5016, "mutability": "mutable", "name": "isAbove", "nameLocation": "9826:7:21", "nodeType": "VariableDeclaration", "scope": 5047, "src": "9821:12:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}, "typeName": {"id": 5015, "name": "bool", "nodeType": "ElementaryTypeName", "src": "9821:4:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}, "visibility": "internal"}], "src": "9605:234:21"}, "returnParameters": {"id": 5020, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 5019, "mutability": "mutable", "name": "premium", "nameLocation": "9871:7:21", "nodeType": "VariableDeclaration", "scope": 5047, "src": "9863:15:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 5018, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "9863:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "src": "9862:17:21"}, "scope": 5098, "src": "9586:665:21", "stateMutability": "view", "virtual": false, "visibility": "internal"}, {"body": {"id": 5096, "nodeType": "Block", "src": "10517:466:21", "statements": [{"assignments": [5066], "declarations": [{"constant": false, "id": 5066, "mutability": "mutable", "name": "usdPremium", "nameLocation": "10631:10:21", "nodeType": "VariableDeclaration", "scope": 5096, "src": "10623:18:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 5065, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "10623:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "id": 5085, "initialValue": {"arguments": [{"arguments": [{"expression": {"id": 5070, "name": "optionDetails", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5050, "src": "10717:13:21", "typeDescriptions": {"typeIdentifier": "t_struct$_OptionDetails_$13345_memory_ptr", "typeString": "struct IOptions.OptionDetails memory"}}, "id": 5071, "isConstant": false, "isLValue": true, "isPure": false, "lValueRequested": false, "memberName": "amount", "nodeType": "MemberAccess", "referencedDeclaration": 13338, "src": "10717:20:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 5072, "name": "pool", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5053, "src": "10739:4:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7515", "typeString": "contract BufferEpocPoolV2Unintialized"}}, {"id": 5073, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5056, "src": "10745:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7515", "typeString": "contract BufferEpocPoolV2Unintialized"}, {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}], "id": 5069, "name": "currentImpliedVolatility", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4664, "src": "10692:24:21", "typeDescriptions": {"typeIdentifier": "t_function_internal_view$_t_uint256_$_t_contract$_BufferEpocPoolV2Unintialized_$7515_$_t_contract$_OptionConfigUnintialized_$6301_$returns$_t_uint256_$", "typeString": "function (uint256,contract BufferEpocPoolV2Unintialized,contract OptionConfigUnintialized) view returns (uint256)"}}, "id": 5074, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "10692:60:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"expression": {"id": 5075, "name": "optionDetails", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5050, "src": "10766:13:21", "typeDescriptions": {"typeIdentifier": "t_struct$_OptionDetails_$13345_memory_ptr", "typeString": "struct IOptions.OptionDetails memory"}}, "id": 5076, "isConstant": false, "isLValue": true, "isPure": false, "lValueRequested": false, "memberName": "strike", "nodeType": "MemberAccess", "referencedDeclaration": 13340, "src": "10766:20:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 5077, "name": "KPI", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5060, "src": "10800:3:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"expression": {"id": 5078, "name": "optionDetails", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5050, "src": "10817:13:21", "typeDescriptions": {"typeIdentifier": "t_struct$_OptionDetails_$13345_memory_ptr", "typeString": "struct IOptions.OptionDetails memory"}}, "id": 5079, "isConstant": false, "isLValue": true, "isPure": false, "lValueRequested": false, "memberName": "period", "nodeType": "MemberAccess", "referencedDeclaration": 13336, "src": "10817:20:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"expression": {"id": 5080, "name": "optionDetails", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5050, "src": "10851:13:21", "typeDescriptions": {"typeIdentifier": "t_struct$_OptionDetails_$13345_memory_ptr", "typeString": "struct IOptions.OptionDetails memory"}}, "id": 5081, "isConstant": false, "isLValue": true, "isPure": false, "lValueRequested": false, "memberName": "isYes", "nodeType": "MemberAccess", "referencedDeclaration": 13342, "src": "10851:19:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}, {"expression": {"id": 5082, "name": "optionDetails", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5050, "src": "10884:13:21", "typeDescriptions": {"typeIdentifier": "t_struct$_OptionDetails_$13345_memory_ptr", "typeString": "struct IOptions.OptionDetails memory"}}, "id": 5083, "isConstant": false, "isLValue": true, "isPure": false, "lValueRequested": false, "memberName": "isAbove", "nodeType": "MemberAccess", "referencedDeclaration": 13344, "src": "10884:21:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_bool", "typeString": "bool"}, {"typeIdentifier": "t_bool", "typeString": "bool"}], "expression": {"id": 5067, "name": "OptionMath", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 17188, "src": "10644:10:21", "typeDescriptions": {"typeIdentifier": "t_type$_t_contract$_OptionMath_$17188_$", "typeString": "type(library OptionMath)"}}, "id": 5068, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "blackScholesPriceBinary", "nodeType": "MemberAccess", "referencedDeclaration": 17089, "src": "10644:34:21", "typeDescriptions": {"typeIdentifier": "t_function_delegatecall_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_bool_$_t_bool_$returns$_t_uint256_$", "typeString": "function (uint256,uint256,uint256,uint256,bool,bool) pure returns (uint256)"}}, "id": 5084, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "10644:271:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "VariableDeclarationStatement", "src": "10623:292:21"}, {"expression": {"id": 5094, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 5086, "name": "premium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5063, "src": "10925:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 5093, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"components": [{"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 5090, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 5087, "name": "usdPremium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5066, "src": "10936:10:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "*", "rightExpression": {"expression": {"id": 5088, "name": "optionDetails", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5050, "src": "10949:13:21", "typeDescriptions": {"typeIdentifier": "t_struct$_OptionDetails_$13345_memory_ptr", "typeString": "struct IOptions.OptionDetails memory"}}, "id": 5089, "isConstant": false, "isLValue": true, "isPure": false, "lValueRequested": false, "memberName": "amount", "nodeType": "MemberAccess", "referencedDeclaration": 13338, "src": "10949:20:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "10936:33:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "id": 5091, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "10935:35:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "/", "rightExpression": {"hexValue": "316538", "id": 5092, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "10973:3:21", "typeDescriptions": {"typeIdentifier": "t_rational_100000000_by_1", "typeString": "int_const 100000000"}, "value": "1e8"}, "src": "10935:41:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "10925:51:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 5095, "nodeType": "ExpressionStatement", "src": "10925:51:21"}]}, "id": 5097, "implemented": true, "kind": "function", "modifiers": [], "name": "getPremiumBinary", "nameLocation": "10266:16:21", "nodeType": "FunctionDefinition", "parameters": {"id": 5061, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 5050, "mutability": "mutable", "name": "optionDetails", "nameLocation": "10322:13:21", "nodeType": "VariableDeclaration", "scope": 5097, "src": "10292:43:21", "stateVariable": false, "storageLocation": "memory", "typeDescriptions": {"typeIdentifier": "t_struct$_OptionDetails_$13345_memory_ptr", "typeString": "struct IOptions.OptionDetails"}, "typeName": {"id": 5049, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 5048, "name": "IOptions.OptionDetails", "nodeType": "IdentifierPath", "referencedDeclaration": 13345, "src": "10292:22:21"}, "referencedDeclaration": 13345, "src": "10292:22:21", "typeDescriptions": {"typeIdentifier": "t_struct$_OptionDetails_$13345_storage_ptr", "typeString": "struct IOptions.OptionDetails"}}, "visibility": "internal"}, {"constant": false, "id": 5053, "mutability": "mutable", "name": "pool", "nameLocation": "10374:4:21", "nodeType": "VariableDeclaration", "scope": 5097, "src": "10345:33:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7515", "typeString": "contract BufferEpocPoolV2Unintialized"}, "typeName": {"id": 5052, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 5051, "name": "BufferEpocPoolV2Unintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 7515, "src": "10345:28:21"}, "referencedDeclaration": 7515, "src": "10345:28:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7515", "typeString": "contract BufferEpocPoolV2Unintialized"}}, "visibility": "internal"}, {"constant": false, "id": 5056, "mutability": "mutable", "name": "config", "nameLocation": "10413:6:21", "nodeType": "VariableDeclaration", "scope": 5097, "src": "10388:31:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}, "typeName": {"id": 5055, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 5054, "name": "OptionConfigUnintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 6301, "src": "10388:24:21"}, "referencedDeclaration": 6301, "src": "10388:24:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6301", "typeString": "contract OptionConfigUnintialized"}}, "visibility": "internal"}, {"constant": false, "id": 5058, "mutability": "mutable", "name": "currentPrice", "nameLocation": "10437:12:21", "nodeType": "VariableDeclaration", "scope": 5097, "src": "10429:20:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 5057, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "10429:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 5060, "mutability": "mutable", "name": "KPI", "nameLocation": "10467:3:21", "nodeType": "VariableDeclaration", "scope": 5097, "src": "10459:11:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 5059, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "10459:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "src": "10282:194:21"}, "returnParameters": {"id": 5064, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 5063, "mutability": "mutable", "name": "premium", "nameLocation": "10508:7:21", "nodeType": "VariableDeclaration", "scope": 5097, "src": "10500:15:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 5062, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "10500:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "src": "10499:17:21"}, "scope": 5098, "src": "10257:726:21", "stateMutability": "view", "virtual": false, "visibility": "internal"}], "scope": 5099, "src": "697:10288:21", "usedErrors": []}], "src": "38:10948:21"}, "compiler": {"version": "0.8.4+commit.c7e474f2", "evm_version": "istanbul", "optimizer": {"enabled": true, "runs": 1}}, "contractName": "FeeCalculator", "deployedBytecode": "73000000000000000000000000000000000000000030146080604052600436106100775760003560e01c80634767b4b31461007c5780634fe8c640146100af578063540dd9af146100d0578063934ce3d6146100e35780639edf3516146100f6578063a5c8287514610109578063d69bde771461011c575b600080fd5b61008f61008a366004610b18565b61012f565b604080519384526020840192909252908201526060015b60405180910390f35b6100c26100bd366004610a28565b61022f565b6040519081526020016100a6565b61008f6100de366004610945565b61037c565b61008f6100f1366004610a98565b6103b7565b61008f610104366004610b18565b6103f4565b61008f610117366004610b18565b6104e4565b6100c261012a366004610a57565b6105bd565b60008060008073__$21a7d244ba8ae9c6f13b9eaa6b054f8aee$__632c607c3b61015a8c888a6105bd565b8b8a8f60028e600281111561017f57634e487b7160e01b600052602160045260246000fd5b146040518663ffffffff1660e01b81526004016101a0959493929190610b8c565b60206040518083038186803b1580156101b857600080fd5b505af41580156101cc573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101f09190610a10565b9050866101fd8b83610c15565b6102079190610bf5565b91506102138a876106f4565b925061021f8284610bdd565b9350509750975097945050505050565b600080826001600160a01b031663d9ac10d96040518163ffffffff1660e01b815260040160206040518083038186803b15801561026b57600080fd5b505afa15801561027f573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102a39190610a10565b9050600081116102de5760405162461bcd60e51b815260206004820152600260248201526109e760f31b604482015260640160405180910390fd5b8084846001600160a01b0316636ab28bc86040518163ffffffff1660e01b815260040160206040518083038186803b15801561031957600080fd5b505afa15801561032d573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906103519190610a10565b61035b9190610bdd565b61036a906402540be400610c15565b6103749190610bf5565b949350505050565b600080600061038e8885878a8a610784565b905061039e8860200151866106f4565b91506103aa8183610bdd565b9250955095509592505050565b60008060006103cc8a85878c8f8b8e8e610862565b90506103d88a866106f4565b91506103e48183610bdd565b9250985098509895505050505050565b60008060008073__$21a7d244ba8ae9c6f13b9eaa6b054f8aee$__632c607c3b61041f8c888a6105bd565b8b8a8f60028e600281111561044457634e487b7160e01b600052602160045260246000fd5b146040518663ffffffff1660e01b8152600401610465959493929190610b8c565b60206040518083038186803b15801561047d57600080fd5b505af4158015610491573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104b59190610a10565b90506104c18a876106f4565b9250866104ce8b83610c15565b6104d89190610bf5565b915061021f8284610bdd565b60008060008073__$21a7d244ba8ae9c6f13b9eaa6b054f8aee$__632c607c3b61050f8c888a6105bd565b8b8a8f60028e600281111561053457634e487b7160e01b600052602160045260246000fd5b146040518663ffffffff1660e01b8152600401610555959493929190610b8c565b60206040518083038186803b15801561056d57600080fd5b505af4158015610581573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906105a59190610a10565b9050868a6105b38284610bdd565b6101fd9190610c15565b6000816001600160a01b03166318f88e5b6040518163ffffffff1660e01b815260040160206040518083038186803b1580156105f857600080fd5b505afa15801561060c573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906106309190610a10565b9050600061063e858561022f565b905063ee6b28008111156106ec57826001600160a01b0316636c321c8a6040518163ffffffff1660e01b815260040160206040518083038186803b15801561068557600080fd5b505afa158015610699573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906106bd9190610a10565b6106cb63ee6b280083610c34565b6106d59084610c15565b6106df9190610bf5565b6106e99083610bdd565b91505b509392505050565b60006064826001600160a01b031663f3fa34956040518163ffffffff1660e01b815260040160206040518083038186803b15801561073157600080fd5b505afa158015610745573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107699190610a10565b6107739085610c15565b61077d9190610bf5565b9392505050565b60008073__$21a7d244ba8ae9c6f13b9eaa6b054f8aee$__63d573d6156107b0896020015189896105bd565b6040808b01518b5160608d015160808e015193516001600160e01b031960e088901b1681526107e695948b939291600401610bb1565b60206040518083038186803b1580156107fe57600080fd5b505af4158015610812573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108369190610a10565b90506305f5e10087602001518261084d9190610c15565b6108579190610bf5565b979650505050505050565b60008073__$21a7d244ba8ae9c6f13b9eaa6b054f8aee$__63d573d61561088a8c8c8c6105bd565b89888a89896040518763ffffffff1660e01b81526004016108b096959493929190610bb1565b60206040518083038186803b1580156108c857600080fd5b505af41580156108dc573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109009190610a10565b90508461090d8b83610c15565b6109179190610bf5565b9a9950505050505050505050565b8035801515811461093557600080fd5b919050565b803561093581610c61565b600080600080600085870361012081121561095e578182fd5b60a081121561096b578182fd5b5060405160a081016001600160401b038111828210171561099a57634e487b7160e01b83526041600452602483fd5b80604052508635815260208701356020820152604087013560408201526109c360608801610925565b60608201526109d460808801610925565b6080820152945060a0860135935060c086013592506109f560e0870161093a565b9150610a04610100870161093a565b90509295509295909350565b600060208284031215610a21578081fd5b5051919050565b60008060408385031215610a3a578182fd5b823591506020830135610a4c81610c61565b809150509250929050565b600080600060608486031215610a6b578283fd5b833592506020840135610a7d81610c61565b91506040840135610a8d81610c61565b809150509250925092565b600080600080600080600080610100898b031215610ab4578283fd5b883597506020890135965060408901359550610ad260608a01610925565b9450610ae060808a01610925565b935060a0890135925060c0890135610af781610c61565b915060e0890135610b0781610c61565b809150509295985092959890939650565b600080600080600080600060e0888a031215610b32578283fd5b873596506020880135955060408801359450606088013560038110610b55578384fd5b93506080880135925060a0880135610b6c81610c61565b915060c0880135610b7c81610c61565b8091505092959891949750929550565b9485526020850193909352604084019190915260608301521515608082015260a00190565b95865260208601949094526040850192909252606084015215156080830152151560a082015260c00190565b60008219821115610bf057610bf0610c4b565b500190565b600082610c1057634e487b7160e01b81526012600452602481fd5b500490565b6000816000190483118215151615610c2f57610c2f610c4b565b500290565b600082821015610c4657610c46610c4b565b500390565b634e487b7160e01b600052601160045260246000fd5b6001600160a01b0381168114610c7657600080fd5b5056fea2646970667358221220c52b557f7156e4c160987fd3cde3d8df9c1b8a58f06610cc5e9ba482563c761464736f6c63430008040033", "deployedSourceMap": "697:10288:21:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2630:872;;;;;;:::i;:::-;;:::i;:::-;;;;5570:25:32;;;5626:2;5611:18;;5604:34;;;;5654:18;;;5647:34;5558:2;5543:18;2630:872:21;;;;;;;;919:325;;;;;;:::i;:::-;;:::i;:::-;;;5324:25:32;;;5312:2;5297:18;919:325:21;5279:76:32;8587:643:21;;;;;;:::i;:::-;;:::i;7351:716::-;;;;;;:::i;:::-;;:::i;5733:881::-;;;;;;:::i;:::-;;:::i;4157:903::-;;;;;;:::i;:::-;;:::i;1568:407::-;;;;;;:::i;:::-;;:::i;2630:872::-;2934:13;2961:21;2996:15;3103:18;3124:10;:28;3166:46;3191:6;3199:4;3205:6;3166:24;:46::i;:::-;3226:6;3246:12;3272:6;3306:24;3292:10;:38;;;;;;-1:-1:-1;;;3292:38:21;;;;;;;;;;3124:216;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;3103:237;-1:-1:-1;3384:12:21;3361:19;3374:6;3103:237;3361:19;:::i;:::-;3360:36;;;;:::i;:::-;3350:46;;3422:32;3439:6;3447;3422:16;:32::i;:::-;3406:48;-1:-1:-1;3472:23:21;3488:7;3406:48;3472:23;:::i;:::-;3464:31;;2630:872;;;;;;;;;;;;:::o;919:325::-;1040:19;1071;1093:4;-1:-1:-1;;;;;1093:23:21;;:25;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;1071:47;;1150:1;1136:11;:15;1128:30;;;;-1:-1:-1;;;1128:30:21;;5042:2:32;1128:30:21;;;5024:21:32;5081:1;5061:18;;;5054:29;-1:-1:-1;;;5099:18:32;;;5092:32;5141:18;;1128:30:21;;;;;;;;1226:11;1207:6;1185:4;-1:-1:-1;;;;;1185:17:21;;:19;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;:28;;;;:::i;:::-;1184:38;;1217:5;1184:38;:::i;:::-;1183:54;;;;:::i;:::-;1169:68;919:325;-1:-1:-1;;;;919:325:21:o;8587:643::-;8864:13;8891:21;8926:15;8976:134;9006:13;9033:4;9051:6;9071:12;9097:3;8976:16;:134::i;:::-;8966:144;;9136:46;9153:13;:20;;;9175:6;9136:16;:46::i;:::-;9120:62;-1:-1:-1;9200:23:21;9216:7;9120:62;9200:23;:::i;:::-;9192:31;;8587:643;;;;;;;;;:::o;7351:716::-;7665:13;7692:21;7727:15;7777:184;7801:6;7821:4;7839:6;7859;7879;7899:12;7925:5;7944:7;7777:10;:184::i;:::-;7767:194;;7987:32;8004:6;8012;7987:16;:32::i;:::-;7971:48;-1:-1:-1;8037:23:21;8053:7;7971:48;8037:23;:::i;:::-;8029:31;;7351:716;;;;;;;;;;;;:::o;5733:881::-;6040:13;6067:21;6102:15;6215:18;6236:10;:28;6278:46;6303:6;6311:4;6317:6;6278:24;:46::i;:::-;6338:6;6358:12;6384:6;6418:24;6404:10;:38;;;;;;-1:-1:-1;;;6404:38:21;;;;;;;;;;6236:216;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;6215:237;;6478:32;6495:6;6503;6478:16;:32::i;:::-;6462:48;-1:-1:-1;6554:12:21;6531:19;6544:6;6531:10;:19;:::i;:::-;6530:36;;;;:::i;:::-;6520:46;-1:-1:-1;6584:23:21;6520:46;6584:13;:23;:::i;4157:903::-;4475:13;4502:21;4537:15;4644:18;4665:10;:28;4707:46;4732:6;4740:4;4746:6;4707:24;:46::i;:::-;4767:6;4787:12;4813:6;4847:24;4833:10;:38;;;;;;-1:-1:-1;;;4833:38:21;;;;;;;;;;4665:216;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;4644:237;-1:-1:-1;4942:12:21;4932:6;4903:25;4942:12;4644:237;4903:25;:::i;:::-;4902:36;;;;:::i;1568:407::-;1737:10;1764:6;-1:-1:-1;;;;;1764:21:21;;:23;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;1759:28;;1797:19;1819:31;1837:6;1845:4;1819:17;:31::i;:::-;1797:53;;1878:4;1864:11;:18;1860:109;;;1934:6;-1:-1:-1;;;;;1934:22:21;;:24;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;1911:18;1925:4;1911:11;:18;:::i;:::-;1905:25;;:2;:25;:::i;:::-;1904:54;;;;:::i;:::-;1898:60;;;;:::i;:::-;;;1860:109;1568:407;;;;;;:::o;9368:212::-;9490:11;9570:3;9534:6;-1:-1:-1;;;;;9534:30:21;;:32;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;9525:41;;:6;:41;:::i;:::-;9524:49;;;;:::i;:::-;9517:56;9368:212;-1:-1:-1;;;9368:212:21:o;10257:726::-;10500:15;10623:18;10644:10;:34;10692:60;10717:13;:20;;;10739:4;10745:6;10692:24;:60::i;:::-;10766:20;;;;;10817;;10851:19;;;;10884:21;;;;10644:271;;-1:-1:-1;;;;;;10644:271:21;;;;;;;;;;10800:3;;10817:20;10851:19;10644:271;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;10623:292;;10973:3;10949:13;:20;;;10936:10;:33;;;;:::i;:::-;10935:41;;;;:::i;:::-;10925:51;10257:726;-1:-1:-1;;;;;;;10257:726:21:o;9586:665::-;9863:15;9957:18;9978:10;:34;10026:46;10051:6;10059:4;10065:6;10026:24;:46::i;:::-;10086:6;10106:12;10132:6;10152:5;10171:7;9978:210;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;9957:231;-1:-1:-1;10232:12:21;10209:19;10222:6;9957:231;10209:19;:::i;:::-;10208:36;;;;:::i;:::-;10198:46;9586:665;-1:-1:-1;;;;;;;;;;9586:665:21:o;14:160:32:-;79:20;;135:13;;128:21;118:32;;108:2;;164:1;161;154:12;108:2;60:114;;;:::o;179:194::-;277:20;;306:61;277:20;306:61;:::i;378:1329::-;575:6;583;591;599;607;651:9;642:7;638:23;681:3;677:2;673:12;670:2;;;703:6;695;688:22;670:2;732:4;728:2;724:13;721:2;;;755:6;747;740:22;721:2;-1:-1:-1;793:2:32;787:9;835:4;823:17;;-1:-1:-1;;;;;855:34:32;;891:22;;;852:62;849:2;;;-1:-1:-1;;;937:36:32;;996:4;993:1;986:15;1029:4;944:6;1014:20;849:2;1064:10;1060:2;1053:22;;1112:9;1099:23;1091:6;1084:39;1184:2;1173:9;1169:18;1156:32;1151:2;1143:6;1139:15;1132:57;1250:2;1239:9;1235:18;1222:32;1217:2;1209:6;1205:15;1198:57;1288:35;1319:2;1308:9;1304:18;1288:35;:::i;:::-;1283:2;1275:6;1271:15;1264:60;1358:36;1389:3;1378:9;1374:19;1358:36;:::i;:::-;1352:3;1340:16;;1333:62;1344:6;-1:-1:-1;1467:4:32;1452:20;;1439:34;;-1:-1:-1;1520:3:32;1505:19;;1492:33;;-1:-1:-1;1544:69:32;1608:3;1593:19;;1544:69;:::i;:::-;1534:79;;1632:69;1696:3;1685:9;1681:19;1632:69;:::i;:::-;1622:79;;618:1089;;;;;;;;:::o;1712:194::-;1782:6;1835:2;1823:9;1814:7;1810:23;1806:32;1803:2;;;1856:6;1848;1841:22;1803:2;-1:-1:-1;1884:16:32;;1793:113;-1:-1:-1;1793:113:32:o;1911:392::-;2016:6;2024;2077:2;2065:9;2056:7;2052:23;2048:32;2045:2;;;2098:6;2090;2083:22;2045:2;2139:9;2126:23;2116:33;;2199:2;2188:9;2184:18;2171:32;2212:61;2267:5;2212:61;:::i;:::-;2292:5;2282:15;;;2035:268;;;;;:::o;2308:596::-;2455:6;2463;2471;2524:2;2512:9;2503:7;2499:23;2495:32;2492:2;;;2545:6;2537;2530:22;2492:2;2586:9;2573:23;2563:33;;2646:2;2635:9;2631:18;2618:32;2659:61;2714:5;2659:61;:::i;:::-;2739:5;-1:-1:-1;2796:2:32;2781:18;;2768:32;2809:63;2768:32;2809:63;:::i;:::-;2891:7;2881:17;;;2482:422;;;;;:::o;2909:941::-;3095:6;3103;3111;3119;3127;3135;3143;3151;3204:3;3192:9;3183:7;3179:23;3175:33;3172:2;;;3226:6;3218;3211:22;3172:2;3267:9;3254:23;3244:33;;3324:2;3313:9;3309:18;3296:32;3286:42;;3375:2;3364:9;3360:18;3347:32;3337:42;;3398:35;3429:2;3418:9;3414:18;3398:35;:::i;:::-;3388:45;;3452:36;3483:3;3472:9;3468:19;3452:36;:::i;:::-;3442:46;;3535:3;3524:9;3520:19;3507:33;3497:43;;3590:3;3579:9;3575:19;3562:33;3604:61;3659:5;3604:61;:::i;:::-;3684:5;-1:-1:-1;3741:3:32;3726:19;;3713:33;3755:63;3713:33;3755:63;:::i;:::-;3837:7;3827:17;;;3162:688;;;;;;;;;;;:::o;3855:980::-;4054:6;4062;4070;4078;4086;4094;4102;4155:3;4143:9;4134:7;4130:23;4126:33;4123:2;;;4177:6;4169;4162:22;4123:2;4218:9;4205:23;4195:33;;4275:2;4264:9;4260:18;4247:32;4237:42;;4326:2;4315:9;4311:18;4298:32;4288:42;;4380:2;4369:9;4365:18;4352:32;4413:1;4406:5;4403:12;4393:2;;4434:6;4426;4419:22;4393:2;4462:5;-1:-1:-1;4514:3:32;4499:19;;4486:33;;-1:-1:-1;4571:3:32;4556:19;;4543:33;4585:63;4543:33;4585:63;:::i;:::-;4667:7;-1:-1:-1;4726:3:32;4711:19;;4698:33;4740:63;4698:33;4740:63;:::i;:::-;4822:7;4812:17;;;4113:722;;;;;;;;;;:::o;5692:481::-;5953:25;;;6009:2;5994:18;;5987:34;;;;6052:2;6037:18;;6030:34;;;;6095:2;6080:18;;6073:34;6151:14;6144:22;6138:3;6123:19;;6116:51;5940:3;5925:19;;5907:266::o;6178:563::-;6461:25;;;6517:2;6502:18;;6495:34;;;;6560:2;6545:18;;6538:34;;;;6603:2;6588:18;;6581:34;6659:14;6652:22;6646:3;6631:19;;6624:51;6719:14;6712:22;6706:3;6691:19;;6684:51;6448:3;6433:19;;6415:326::o;6746:128::-;6786:3;6817:1;6813:6;6810:1;6807:13;6804:2;;;6823:18;;:::i;:::-;-1:-1:-1;6859:9:32;;6794:80::o;6879:217::-;6919:1;6945;6935:2;;-1:-1:-1;;;6970:31:32;;7024:4;7021:1;7014:15;7052:4;6977:1;7042:15;6935:2;-1:-1:-1;7081:9:32;;6925:171::o;7101:168::-;7141:7;7207:1;7203;7199:6;7195:14;7192:1;7189:21;7184:1;7177:9;7170:17;7166:45;7163:2;;;7214:18;;:::i;:::-;-1:-1:-1;7254:9:32;;7153:116::o;7274:125::-;7314:4;7342:1;7339;7336:8;7333:2;;;7347:18;;:::i;:::-;-1:-1:-1;7384:9:32;;7323:76::o;7404:127::-;7465:10;7460:3;7456:20;7453:1;7446:31;7496:4;7493:1;7486:15;7520:4;7517:1;7510:15;7536:161;-1:-1:-1;;;;;7641:31:32;;7631:42;;7621:2;;7687:1;7684;7677:12;7621:2;7611:86;:::o", "language": "Solidity", "natspec": {"methods": {"currentImpliedVolatility(uint256,BufferEpocPoolV2Unintialized,OptionConfigUnintialized)": {"notice": "Calculate the Utilisation adjusted ImpliedVol for the pool according to https://www.desmos.com/calculator/xdmhn97opd", "params": {"amount": "Option amount", "config": "The option configuration", "pool": "The pool selling the option"}, "returns": {"iv": "The adjusted ImpliedVol"}}, "fees(uint256,uint256,uint256,IOptions.OptionType,uint256,OptionConfigUnintialized,BufferEpocPoolV2Unintialized)": {"notice": "Used for getting the price for Options in tokenX", "params": {"amount": "Option amount", "config": "The option configuration", "currentPrice": "Current price of the underlying asset", "optionType": "Type of the Option", "period": "Option period in seconds (1 days <= period <= 4 weeks)", "pool": "The pool selling the option", "strike": "Strike price of the option"}, "returns": {"premium": "Amount that covers the price difference in the ITM options", "settlementFee": "Amount to be distributed to the Buffer token holders", "total": "Total price to be paid"}}, "feesBinary(uint256,uint256,uint256,bool,bool,uint256,OptionConfigUnintialized,BufferEpocPoolV2Unintialized)": {"notice": "Used for getting the price for Binary Options", "params": {"amount": "Option amount", "config": "The option configuration", "currentPrice": "Current price of the underlying asset", "isAbove": "whether the price will stay above this strike or not", "isYes": "whether the option isAbove or not", "period": "Option period in seconds (1 days <= period <= 4 weeks)", "pool": "The pool selling the option", "strike": "Strike price of the option"}, "returns": {"premium": "Amount that covers the price difference in the ITM options", "settlementFee": "Amount to be distributed to the Buffer token holders", "total": "Total price to be paid"}}, "feesKPIBinary(IOptions.OptionDetails,uint256,uint256,OptionConfigUnintialized,BufferEpocPoolV2Unintialized)": {"notice": "Used for getting the price for Binary KPI Options", "params": {"KPI": "KPI value for option", "config": "Option config", "currentPrice": "Current price of the tokenX", "optionDetails": "Details of the option to be priced", "pool": "pool contract"}, "returns": {"premium": "Amount that covers the price difference in the ITM options", "settlementFee": "Amount to be distributed to the Buffer token holders", "total": "Total price to be paid"}}, "feesSuccessOptions(uint256,uint256,uint256,IOptions.OptionType,uint256,OptionConfigUnintialized,BufferEpocPoolV2Unintialized)": {"notice": "Used for getting the price for Options in tokenX", "params": {"amount": "Option amount", "config": "The option configuration", "currentPrice": "Current price of the underlying asset", "optionType": "Type of the Option", "period": "Option period in seconds (1 days <= period <= 4 weeks)", "pool": "The pool selling the option", "strike": "Strike price of the option"}, "returns": {"premium": "Amount that covers the price difference in the ITM options", "settlementFee": "Amount to be distributed to the Buffer token holders", "total": "Total price to be paid"}}, "feesUsd(uint256,uint256,uint256,IOptions.OptionType,uint256,OptionConfigUnintialized,BufferEpocPoolV2Unintialized)": {"notice": "Used for getting the price for Options in USD", "params": {"amount": "Option amount", "config": "The option configuration", "currentPrice": "Current price of the underlying asset", "optionType": "Type of the Option", "period": "Option period in seconds (1 days <= period <= 4 weeks)", "pool": "The pool selling the option", "strike": "Strike price of the option"}, "returns": {"premium": "Amount that covers the price difference in the ITM options in USD", "settlementFee": "Amount to be distributed to the Buffer token holders in USD", "total": "Total price to be paid in USD"}}, "getNewUtilisation(uint256,BufferEpocPoolV2Unintialized)": {"notice": "Calculate the current Utilisation", "params": {"amount": "Option amount", "pool": "The pool selling the option"}, "returns": {"utilization": "Current utilization"}}}, "kind": "dev", "version": 1}, "opcodes": "PUSH20 0x0 ADDRESS EQ PUSH1 0x80 PUSH1 0x40 MSTORE PUSH1 0x4 CALLDATASIZE LT PUSH2 0x77 JUMPI PUSH1 0x0 CALLDATALOAD PUSH1 0xE0 SHR DUP1 PUSH4 0x4767B4B3 EQ PUSH2 0x7C JUMPI DUP1 PUSH4 0x4FE8C640 EQ PUSH2 0xAF JUMPI DUP1 PUSH4 0x540DD9AF EQ PUSH2 0xD0 JUMPI DUP1 PUSH4 0x934CE3D6 EQ PUSH2 0xE3 JUMPI DUP1 PUSH4 0x9EDF3516 EQ PUSH2 0xF6 JUMPI DUP1 PUSH4 0xA5C82875 EQ PUSH2 0x109 JUMPI DUP1 PUSH4 0xD69BDE77 EQ PUSH2 0x11C JUMPI JUMPDEST PUSH1 0x0 DUP1 REVERT JUMPDEST PUSH2 0x8F PUSH2 0x8A CALLDATASIZE PUSH1 0x4 PUSH2 0xB18 JUMP JUMPDEST PUSH2 0x12F JUMP JUMPDEST PUSH1 0x40 DUP1 MLOAD SWAP4 DUP5 MSTORE PUSH1 0x20 DUP5 ADD SWAP3 SWAP1 SWAP3 MSTORE SWAP1 DUP3 ADD MSTORE PUSH1 0x60 ADD JUMPDEST PUSH1 0x40 MLOAD DUP1 SWAP2 SUB SWAP1 RETURN JUMPDEST PUSH2 0xC2 PUSH2 0xBD CALLDATASIZE PUSH1 0x4 PUSH2 0xA28 JUMP JUMPDEST PUSH2 0x22F JUMP JUMPDEST PUSH1 0x40 MLOAD SWAP1 DUP2 MSTORE PUSH1 0x20 ADD PUSH2 0xA6 JUMP JUMPDEST PUSH2 0x8F PUSH2 0xDE CALLDATASIZE PUSH1 0x4 PUSH2 0x945 JUMP JUMPDEST PUSH2 0x37C JUMP JUMPDEST PUSH2 0x8F PUSH2 0xF1 CALLDATASIZE PUSH1 0x4 PUSH2 0xA98 JUMP JUMPDEST PUSH2 0x3B7 JUMP JUMPDEST PUSH2 0x8F PUSH2 0x104 CALLDATASIZE PUSH1 0x4 PUSH2 0xB18 JUMP JUMPDEST PUSH2 0x3F4 JUMP JUMPDEST PUSH2 0x8F PUSH2 0x117 CALLDATASIZE PUSH1 0x4 PUSH2 0xB18 JUMP JUMPDEST PUSH2 0x4E4 JUMP JUMPDEST PUSH2 0xC2 PUSH2 0x12A CALLDATASIZE PUSH1 0x4 PUSH2 0xA57 JUMP JUMPDEST PUSH2 0x5BD JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH1 0x0 DUP1 PUSH20 0x0 PUSH4 0x2C607C3B PUSH2 0x15A DUP13 DUP9 DUP11 PUSH2 0x5BD JUMP JUMPDEST DUP12 DUP11 DUP16 PUSH1 0x2 DUP15 PUSH1 0x2 DUP2 GT ISZERO PUSH2 0x17F JUMPI PUSH4 0x4E487B71 PUSH1 0xE0 SHL PUSH1 0x0 MSTORE PUSH1 0x21 PUSH1 0x4 MSTORE PUSH1 0x24 PUSH1 0x0 REVERT JUMPDEST EQ PUSH1 0x40 MLOAD DUP7 PUSH4 0xFFFFFFFF AND PUSH1 0xE0 SHL DUP2 MSTORE PUSH1 0x4 ADD PUSH2 0x1A0 SWAP6 SWAP5 SWAP4 SWAP3 SWAP2 SWAP1 PUSH2 0xB8C JUMP JUMPDEST PUSH1 0x20 PUSH1 0x40 MLOAD DUP1 DUP4 SUB DUP2 DUP7 DUP1 EXTCODESIZE ISZERO DUP1 ISZERO PUSH2 0x1B8 JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP GAS DELEGATECALL ISZERO DUP1 ISZERO PUSH2 0x1CC JUMPI RETURNDATASIZE PUSH1 0x0 DUP1 RETURNDATACOPY RETURNDATASIZE PUSH1 0x0 REVERT JUMPDEST POP POP POP POP PUSH1 0x40 MLOAD RETURNDATASIZE PUSH1 0x1F NOT PUSH1 0x1F DUP3 ADD AND DUP3 ADD DUP1 PUSH1 0x40 MSTORE POP DUP2 ADD SWAP1 PUSH2 0x1F0 SWAP2 SWAP1 PUSH2 0xA10 JUMP JUMPDEST SWAP1 POP DUP7 PUSH2 0x1FD DUP12 DUP4 PUSH2 0xC15 JUMP JUMPDEST PUSH2 0x207 SWAP2 SWAP1 PUSH2 0xBF5 JUMP JUMPDEST SWAP2 POP PUSH2 0x213 DUP11 DUP8 PUSH2 0x6F4 JUMP JUMPDEST SWAP3 POP PUSH2 0x21F DUP3 DUP5 PUSH2 0xBDD JUMP JUMPDEST SWAP4 POP POP SWAP8 POP SWAP8 POP SWAP8 SWAP5 POP POP POP POP POP JUMP JUMPDEST PUSH1 0x0 DUP1 DUP3 PUSH1 0x1 PUSH1 0x1 PUSH1 0xA0 SHL SUB AND PUSH4 0xD9AC10D9 PUSH1 0x40 MLOAD DUP2 PUSH4 0xFFFFFFFF AND PUSH1 0xE0 SHL DUP2 MSTORE PUSH1 0x4 ADD PUSH1 0x20 PUSH1 0x40 MLOAD DUP1 DUP4 SUB DUP2 DUP7 DUP1 EXTCODESIZE ISZERO DUP1 ISZERO PUSH2 0x26B JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP GAS STATICCALL ISZERO DUP1 ISZERO PUSH2 0x27F JUMPI RETURNDATASIZE PUSH1 0x0 DUP1 RETURNDATACOPY RETURNDATASIZE PUSH1 0x0 REVERT JUMPDEST POP POP POP POP PUSH1 0x40 MLOAD RETURNDATASIZE PUSH1 0x1F NOT PUSH1 0x1F DUP3 ADD AND DUP3 ADD DUP1 PUSH1 0x40 MSTORE POP DUP2 ADD SWAP1 PUSH2 0x2A3 SWAP2 SWAP1 PUSH2 0xA10 JUMP JUMPDEST SWAP1 POP PUSH1 0x0 DUP2 GT PUSH2 0x2DE JUMPI PUSH1 0x40 MLOAD PUSH3 0x461BCD PUSH1 0xE5 SHL DUP2 MSTORE PUSH1 0x20 PUSH1 0x4 DUP3 ADD MSTORE PUSH1 0x2 PUSH1 0x24 DUP3 ADD MSTORE PUSH2 0x9E7 PUSH1 0xF3 SHL PUSH1 0x44 DUP3 ADD MSTORE PUSH1 0x64 ADD PUSH1 0x40 MLOAD DUP1 SWAP2 SUB SWAP1 REVERT JUMPDEST DUP1 DUP5 DUP5 PUSH1 0x1 PUSH1 0x1 PUSH1 0xA0 SHL SUB AND PUSH4 0x6AB28BC8 PUSH1 0x40 MLOAD DUP2 PUSH4 0xFFFFFFFF AND PUSH1 0xE0 SHL DUP2 MSTORE PUSH1 0x4 ADD PUSH1 0x20 PUSH1 0x40 MLOAD DUP1 DUP4 SUB DUP2 DUP7 DUP1 EXTCODESIZE ISZERO DUP1 ISZERO PUSH2 0x319 JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP GAS STATICCALL ISZERO DUP1 ISZERO PUSH2 0x32D JUMPI RETURNDATASIZE PUSH1 0x0 DUP1 RETURNDATACOPY RETURNDATASIZE PUSH1 0x0 REVERT JUMPDEST POP POP POP POP PUSH1 0x40 MLOAD RETURNDATASIZE PUSH1 0x1F NOT PUSH1 0x1F DUP3 ADD AND DUP3 ADD DUP1 PUSH1 0x40 MSTORE POP DUP2 ADD SWAP1 PUSH2 0x351 SWAP2 SWAP1 PUSH2 0xA10 JUMP JUMPDEST PUSH2 0x35B SWAP2 SWAP1 PUSH2 0xBDD JUMP JUMPDEST PUSH2 0x36A SWAP1 PUSH5 0x2540BE400 PUSH2 0xC15 JUMP JUMPDEST PUSH2 0x374 SWAP2 SWAP1 PUSH2 0xBF5 JUMP JUMPDEST SWAP5 SWAP4 POP POP POP POP JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH1 0x0 PUSH2 0x38E DUP9 DUP6 DUP8 DUP11 DUP11 PUSH2 0x784 JUMP JUMPDEST SWAP1 POP PUSH2 0x39E DUP9 PUSH1 0x20 ADD MLOAD DUP7 PUSH2 0x6F4 JUMP JUMPDEST SWAP2 POP PUSH2 0x3AA DUP2 DUP4 PUSH2 0xBDD JUMP JUMPDEST SWAP3 POP SWAP6 POP SWAP6 POP SWAP6 SWAP3 POP POP POP JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH1 0x0 PUSH2 0x3CC DUP11 DUP6 DUP8 DUP13 DUP16 DUP12 DUP15 DUP15 PUSH2 0x862 JUMP JUMPDEST SWAP1 POP PUSH2 0x3D8 DUP11 DUP7 PUSH2 0x6F4 JUMP JUMPDEST SWAP2 POP PUSH2 0x3E4 DUP2 DUP4 PUSH2 0xBDD JUMP JUMPDEST SWAP3 POP SWAP9 POP SWAP9 POP SWAP9 SWAP6 POP POP POP POP POP POP JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH1 0x0 DUP1 PUSH20 0x0 PUSH4 0x2C607C3B PUSH2 0x41F DUP13 DUP9 DUP11 PUSH2 0x5BD JUMP JUMPDEST DUP12 DUP11 DUP16 PUSH1 0x2 DUP15 PUSH1 0x2 DUP2 GT ISZERO PUSH2 0x444 JUMPI PUSH4 0x4E487B71 PUSH1 0xE0 SHL PUSH1 0x0 MSTORE PUSH1 0x21 PUSH1 0x4 MSTORE PUSH1 0x24 PUSH1 0x0 REVERT JUMPDEST EQ PUSH1 0x40 MLOAD DUP7 PUSH4 0xFFFFFFFF AND PUSH1 0xE0 SHL DUP2 MSTORE PUSH1 0x4 ADD PUSH2 0x465 SWAP6 SWAP5 SWAP4 SWAP3 SWAP2 SWAP1 PUSH2 0xB8C JUMP JUMPDEST PUSH1 0x20 PUSH1 0x40 MLOAD DUP1 DUP4 SUB DUP2 DUP7 DUP1 EXTCODESIZE ISZERO DUP1 ISZERO PUSH2 0x47D JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP GAS DELEGATECALL ISZERO DUP1 ISZERO PUSH2 0x491 JUMPI RETURNDATASIZE PUSH1 0x0 DUP1 RETURNDATACOPY RETURNDATASIZE PUSH1 0x0 REVERT JUMPDEST POP POP POP POP PUSH1 0x40 MLOAD RETURNDATASIZE PUSH1 0x1F NOT PUSH1 0x1F DUP3 ADD AND DUP3 ADD DUP1 PUSH1 0x40 MSTORE POP DUP2 ADD SWAP1 PUSH2 0x4B5 SWAP2 SWAP1 PUSH2 0xA10 JUMP JUMPDEST SWAP1 POP PUSH2 0x4C1 DUP11 DUP8 PUSH2 0x6F4 JUMP JUMPDEST SWAP3 POP DUP7 PUSH2 0x4CE DUP12 DUP4 PUSH2 0xC15 JUMP JUMPDEST PUSH2 0x4D8 SWAP2 SWAP1 PUSH2 0xBF5 JUMP JUMPDEST SWAP2 POP PUSH2 0x21F DUP3 DUP5 PUSH2 0xBDD JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH1 0x0 DUP1 PUSH20 0x0 PUSH4 0x2C607C3B PUSH2 0x50F DUP13 DUP9 DUP11 PUSH2 0x5BD JUMP JUMPDEST DUP12 DUP11 DUP16 PUSH1 0x2 DUP15 PUSH1 0x2 DUP2 GT ISZERO PUSH2 0x534 JUMPI PUSH4 0x4E487B71 PUSH1 0xE0 SHL PUSH1 0x0 MSTORE PUSH1 0x21 PUSH1 0x4 MSTORE PUSH1 0x24 PUSH1 0x0 REVERT JUMPDEST EQ PUSH1 0x40 MLOAD DUP7 PUSH4 0xFFFFFFFF AND PUSH1 0xE0 SHL DUP2 MSTORE PUSH1 0x4 ADD PUSH2 0x555 SWAP6 SWAP5 SWAP4 SWAP3 SWAP2 SWAP1 PUSH2 0xB8C JUMP JUMPDEST PUSH1 0x20 PUSH1 0x40 MLOAD DUP1 DUP4 SUB DUP2 DUP7 DUP1 EXTCODESIZE ISZERO DUP1 ISZERO PUSH2 0x56D JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP GAS DELEGATECALL ISZERO DUP1 ISZERO PUSH2 0x581 JUMPI RETURNDATASIZE PUSH1 0x0 DUP1 RETURNDATACOPY RETURNDATASIZE PUSH1 0x0 REVERT JUMPDEST POP POP POP POP PUSH1 0x40 MLOAD RETURNDATASIZE PUSH1 0x1F NOT PUSH1 0x1F DUP3 ADD AND DUP3 ADD DUP1 PUSH1 0x40 MSTORE POP DUP2 ADD SWAP1 PUSH2 0x5A5 SWAP2 SWAP1 PUSH2 0xA10 JUMP JUMPDEST SWAP1 POP DUP7 DUP11 PUSH2 0x5B3 DUP3 DUP5 PUSH2 0xBDD JUMP JUMPDEST PUSH2 0x1FD SWAP2 SWAP1 PUSH2 0xC15 JUMP JUMPDEST PUSH1 0x0 DUP2 PUSH1 0x1 PUSH1 0x1 PUSH1 0xA0 SHL SUB AND PUSH4 0x18F88E5B PUSH1 0x40 MLOAD DUP2 PUSH4 0xFFFFFFFF AND PUSH1 0xE0 SHL DUP2 MSTORE PUSH1 0x4 ADD PUSH1 0x20 PUSH1 0x40 MLOAD DUP1 DUP4 SUB DUP2 DUP7 DUP1 EXTCODESIZE ISZERO DUP1 ISZERO PUSH2 0x5F8 JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP GAS STATICCALL ISZERO DUP1 ISZERO PUSH2 0x60C JUMPI RETURNDATASIZE PUSH1 0x0 DUP1 RETURNDATACOPY RETURNDATASIZE PUSH1 0x0 REVERT JUMPDEST POP POP POP POP PUSH1 0x40 MLOAD RETURNDATASIZE PUSH1 0x1F NOT PUSH1 0x1F DUP3 ADD AND DUP3 ADD DUP1 PUSH1 0x40 MSTORE POP DUP2 ADD SWAP1 PUSH2 0x630 SWAP2 SWAP1 PUSH2 0xA10 JUMP JUMPDEST SWAP1 POP PUSH1 0x0 PUSH2 0x63E DUP6 DUP6 PUSH2 0x22F JUMP JUMPDEST SWAP1 POP PUSH4 0xEE6B2800 DUP2 GT ISZERO PUSH2 0x6EC JUMPI DUP3 PUSH1 0x1 PUSH1 0x1 PUSH1 0xA0 SHL SUB AND PUSH4 0x6C321C8A PUSH1 0x40 MLOAD DUP2 PUSH4 0xFFFFFFFF AND PUSH1 0xE0 SHL DUP2 MSTORE PUSH1 0x4 ADD PUSH1 0x20 PUSH1 0x40 MLOAD DUP1 DUP4 SUB DUP2 DUP7 DUP1 EXTCODESIZE ISZERO DUP1 ISZERO PUSH2 0x685 JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP GAS STATICCALL ISZERO DUP1 ISZERO PUSH2 0x699 JUMPI RETURNDATASIZE PUSH1 0x0 DUP1 RETURNDATACOPY RETURNDATASIZE PUSH1 0x0 REVERT JUMPDEST POP POP POP POP PUSH1 0x40 MLOAD RETURNDATASIZE PUSH1 0x1F NOT PUSH1 0x1F DUP3 ADD AND DUP3 ADD DUP1 PUSH1 0x40 MSTORE POP DUP2 ADD SWAP1 PUSH2 0x6BD SWAP2 SWAP1 PUSH2 0xA10 JUMP JUMPDEST PUSH2 0x6CB PUSH4 0xEE6B2800 DUP4 PUSH2 0xC34 JUMP JUMPDEST PUSH2 0x6D5 SWAP1 DUP5 PUSH2 0xC15 JUMP JUMPDEST PUSH2 0x6DF SWAP2 SWAP1 PUSH2 0xBF5 JUMP JUMPDEST PUSH2 0x6E9 SWAP1 DUP4 PUSH2 0xBDD JUMP JUMPDEST SWAP2 POP JUMPDEST POP SWAP4 SWAP3 POP POP POP JUMP JUMPDEST PUSH1 0x0 PUSH1 0x64 DUP3 PUSH1 0x1 PUSH1 0x1 PUSH1 0xA0 SHL SUB AND PUSH4 0xF3FA3495 PUSH1 0x40 MLOAD DUP2 PUSH4 0xFFFFFFFF AND PUSH1 0xE0 SHL DUP2 MSTORE PUSH1 0x4 ADD PUSH1 0x20 PUSH1 0x40 MLOAD DUP1 DUP4 SUB DUP2 DUP7 DUP1 EXTCODESIZE ISZERO DUP1 ISZERO PUSH2 0x731 JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP GAS STATICCALL ISZERO DUP1 ISZERO PUSH2 0x745 JUMPI RETURNDATASIZE PUSH1 0x0 DUP1 RETURNDATACOPY RETURNDATASIZE PUSH1 0x0 REVERT JUMPDEST POP POP POP POP PUSH1 0x40 MLOAD RETURNDATASIZE PUSH1 0x1F NOT PUSH1 0x1F DUP3 ADD AND DUP3 ADD DUP1 PUSH1 0x40 MSTORE POP DUP2 ADD SWAP1 PUSH2 0x769 SWAP2 SWAP1 PUSH2 0xA10 JUMP JUMPDEST PUSH2 0x773 SWAP1 DUP6 PUSH2 0xC15 JUMP JUMPDEST PUSH2 0x77D SWAP2 SWAP1 PUSH2 0xBF5 JUMP JUMPDEST SWAP4 SWAP3 POP POP POP JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH20 0x0 PUSH4 0xD573D615 PUSH2 0x7B0 DUP10 PUSH1 0x20 ADD MLOAD DUP10 DUP10 PUSH2 0x5BD JUMP JUMPDEST PUSH1 0x40 DUP1 DUP12 ADD MLOAD DUP12 MLOAD PUSH1 0x60 DUP14 ADD MLOAD PUSH1 0x80 DUP15 ADD MLOAD SWAP4 MLOAD PUSH1 0x1 PUSH1 0x1 PUSH1 0xE0 SHL SUB NOT PUSH1 0xE0 DUP9 SWAP1 SHL AND DUP2 MSTORE PUSH2 0x7E6 SWAP6 SWAP5 DUP12 SWAP4 SWAP3 SWAP2 PUSH1 0x4 ADD PUSH2 0xBB1 JUMP JUMPDEST PUSH1 0x20 PUSH1 0x40 MLOAD DUP1 DUP4 SUB DUP2 DUP7 DUP1 EXTCODESIZE ISZERO DUP1 ISZERO PUSH2 0x7FE JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP GAS DELEGATECALL ISZERO DUP1 ISZERO PUSH2 0x812 JUMPI RETURNDATASIZE PUSH1 0x0 DUP1 RETURNDATACOPY RETURNDATASIZE PUSH1 0x0 REVERT JUMPDEST POP POP POP POP PUSH1 0x40 MLOAD RETURNDATASIZE PUSH1 0x1F NOT PUSH1 0x1F DUP3 ADD AND DUP3 ADD DUP1 PUSH1 0x40 MSTORE POP DUP2 ADD SWAP1 PUSH2 0x836 SWAP2 SWAP1 PUSH2 0xA10 JUMP JUMPDEST SWAP1 POP PUSH4 0x5F5E100 DUP8 PUSH1 0x20 ADD MLOAD DUP3 PUSH2 0x84D SWAP2 SWAP1 PUSH2 0xC15 JUMP JUMPDEST PUSH2 0x857 SWAP2 SWAP1 PUSH2 0xBF5 JUMP JUMPDEST SWAP8 SWAP7 POP POP POP POP POP POP POP JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH20 0x0 PUSH4 0xD573D615 PUSH2 0x88A DUP13 DUP13 DUP13 PUSH2 0x5BD JUMP JUMPDEST DUP10 DUP9 DUP11 DUP10 DUP10 PUSH1 0x40 MLOAD DUP8 PUSH4 0xFFFFFFFF AND PUSH1 0xE0 SHL DUP2 MSTORE PUSH1 0x4 ADD PUSH2 0x8B0 SWAP7 SWAP6 SWAP5 SWAP4 SWAP3 SWAP2 SWAP1 PUSH2 0xBB1 JUMP JUMPDEST PUSH1 0x20 PUSH1 0x40 MLOAD DUP1 DUP4 SUB DUP2 DUP7 DUP1 EXTCODESIZE ISZERO DUP1 ISZERO PUSH2 0x8C8 JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP GAS DELEGATECALL ISZERO DUP1 ISZERO PUSH2 0x8DC JUMPI RETURNDATASIZE PUSH1 0x0 DUP1 RETURNDATACOPY RETURNDATASIZE PUSH1 0x0 REVERT JUMPDEST POP POP POP POP PUSH1 0x40 MLOAD RETURNDATASIZE PUSH1 0x1F NOT PUSH1 0x1F DUP3 ADD AND DUP3 ADD DUP1 PUSH1 0x40 MSTORE POP DUP2 ADD SWAP1 PUSH2 0x900 SWAP2 SWAP1 PUSH2 0xA10 JUMP JUMPDEST SWAP1 POP DUP5 PUSH2 0x90D DUP12 DUP4 PUSH2 0xC15 JUMP JUMPDEST PUSH2 0x917 SWAP2 SWAP1 PUSH2 0xBF5 JUMP JUMPDEST SWAP11 SWAP10 POP POP POP POP POP POP POP POP POP POP JUMP JUMPDEST DUP1 CALLDATALOAD DUP1 ISZERO ISZERO DUP2 EQ PUSH2 0x935 JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST SWAP2 SWAP1 POP JUMP JUMPDEST DUP1 CALLDATALOAD PUSH2 0x935 DUP2 PUSH2 0xC61 JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH1 0x0 DUP1 PUSH1 0x0 DUP6 DUP8 SUB PUSH2 0x120 DUP2 SLT ISZERO PUSH2 0x95E JUMPI DUP2 DUP3 REVERT JUMPDEST PUSH1 0xA0 DUP2 SLT ISZERO PUSH2 0x96B JUMPI DUP2 DUP3 REVERT JUMPDEST POP PUSH1 0x40 MLOAD PUSH1 0xA0 DUP2 ADD PUSH1 0x1 PUSH1 0x1 PUSH1 0x40 SHL SUB DUP2 GT DUP3 DUP3 LT OR ISZERO PUSH2 0x99A JUMPI PUSH4 0x4E487B71 PUSH1 0xE0 SHL DUP4 MSTORE PUSH1 0x41 PUSH1 0x4 MSTORE PUSH1 0x24 DUP4 REVERT JUMPDEST DUP1 PUSH1 0x40 MSTORE POP DUP7 CALLDATALOAD DUP2 MSTORE PUSH1 0x20 DUP8 ADD CALLDATALOAD PUSH1 0x20 DUP3 ADD MSTORE PUSH1 0x40 DUP8 ADD CALLDATALOAD PUSH1 0x40 DUP3 ADD MSTORE PUSH2 0x9C3 PUSH1 0x60 DUP9 ADD PUSH2 0x925 JUMP JUMPDEST PUSH1 0x60 DUP3 ADD MSTORE PUSH2 0x9D4 PUSH1 0x80 DUP9 ADD PUSH2 0x925 JUMP JUMPDEST PUSH1 0x80 DUP3 ADD MSTORE SWAP5 POP PUSH1 0xA0 DUP7 ADD CALLDATALOAD SWAP4 POP PUSH1 0xC0 DUP7 ADD CALLDATALOAD SWAP3 POP PUSH2 0x9F5 PUSH1 0xE0 DUP8 ADD PUSH2 0x93A JUMP JUMPDEST SWAP2 POP PUSH2 0xA04 PUSH2 0x100 DUP8 ADD PUSH2 0x93A JUMP JUMPDEST SWAP1 POP SWAP3 SWAP6 POP SWAP3 SWAP6 SWAP1 SWAP4 POP JUMP JUMPDEST PUSH1 0x0 PUSH1 0x20 DUP3 DUP5 SUB SLT ISZERO PUSH2 0xA21 JUMPI DUP1 DUP2 REVERT JUMPDEST POP MLOAD SWAP2 SWAP1 POP JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH1 0x40 DUP4 DUP6 SUB SLT ISZERO PUSH2 0xA3A JUMPI DUP2 DUP3 REVERT JUMPDEST DUP3 CALLDATALOAD SWAP2 POP PUSH1 0x20 DUP4 ADD CALLDATALOAD PUSH2 0xA4C DUP2 PUSH2 0xC61 JUMP JUMPDEST DUP1 SWAP2 POP POP SWAP3 POP SWAP3 SWAP1 POP JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH1 0x0 PUSH1 0x60 DUP5 DUP7 SUB SLT ISZERO PUSH2 0xA6B JUMPI DUP3 DUP4 REVERT JUMPDEST DUP4 CALLDATALOAD SWAP3 POP PUSH1 0x20 DUP5 ADD CALLDATALOAD PUSH2 0xA7D DUP2 PUSH2 0xC61 JUMP JUMPDEST SWAP2 POP PUSH1 0x40 DUP5 ADD CALLDATALOAD PUSH2 0xA8D DUP2 PUSH2 0xC61 JUMP JUMPDEST DUP1 SWAP2 POP POP SWAP3 POP SWAP3 POP SWAP3 JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH1 0x0 DUP1 PUSH1 0x0 DUP1 PUSH1 0x0 DUP1 PUSH2 0x100 DUP10 DUP12 SUB SLT ISZERO PUSH2 0xAB4 JUMPI DUP3 DUP4 REVERT JUMPDEST DUP9 CALLDATALOAD SWAP8 POP PUSH1 0x20 DUP10 ADD CALLDATALOAD SWAP7 POP PUSH1 0x40 DUP10 ADD CALLDATALOAD SWAP6 POP PUSH2 0xAD2 PUSH1 0x60 DUP11 ADD PUSH2 0x925 JUMP JUMPDEST SWAP5 POP PUSH2 0xAE0 PUSH1 0x80 DUP11 ADD PUSH2 0x925 JUMP JUMPDEST SWAP4 POP PUSH1 0xA0 DUP10 ADD CALLDATALOAD SWAP3 POP PUSH1 0xC0 DUP10 ADD CALLDATALOAD PUSH2 0xAF7 DUP2 PUSH2 0xC61 JUMP JUMPDEST SWAP2 POP PUSH1 0xE0 DUP10 ADD CALLDATALOAD PUSH2 0xB07 DUP2 PUSH2 0xC61 JUMP JUMPDEST DUP1 SWAP2 POP POP SWAP3 SWAP6 SWAP9 POP SWAP3 SWAP6 SWAP9 SWAP1 SWAP4 SWAP7 POP JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH1 0x0 DUP1 PUSH1 0x0 DUP1 PUSH1 0x0 PUSH1 0xE0 DUP9 DUP11 SUB SLT ISZERO PUSH2 0xB32 JUMPI DUP3 DUP4 REVERT JUMPDEST DUP8 CALLDATALOAD SWAP7 POP PUSH1 0x20 DUP9 ADD CALLDATALOAD SWAP6 POP PUSH1 0x40 DUP9 ADD CALLDATALOAD SWAP5 POP PUSH1 0x60 DUP9 ADD CALLDATALOAD PUSH1 0x3 DUP2 LT PUSH2 0xB55 JUMPI DUP4 DUP5 REVERT JUMPDEST SWAP4 POP PUSH1 0x80 DUP9 ADD CALLDATALOAD SWAP3 POP PUSH1 0xA0 DUP9 ADD CALLDATALOAD PUSH2 0xB6C DUP2 PUSH2 0xC61 JUMP JUMPDEST SWAP2 POP PUSH1 0xC0 DUP9 ADD CALLDATALOAD PUSH2 0xB7C DUP2 PUSH2 0xC61 JUMP JUMPDEST DUP1 SWAP2 POP POP SWAP3 SWAP6 SWAP9 SWAP2 SWAP5 SWAP8 POP SWAP3 SWAP6 POP JUMP JUMPDEST SWAP5 DUP6 MSTORE PUSH1 0x20 DUP6 ADD SWAP4 SWAP1 SWAP4 MSTORE PUSH1 0x40 DUP5 ADD SWAP2 SWAP1 SWAP2 MSTORE PUSH1 0x60 DUP4 ADD MSTORE ISZERO ISZERO PUSH1 0x80 DUP3 ADD MSTORE PUSH1 0xA0 ADD SWAP1 JUMP JUMPDEST SWAP6 DUP7 MSTORE PUSH1 0x20 DUP7 ADD SWAP5 SWAP1 SWAP5 MSTORE PUSH1 0x40 DUP6 ADD SWAP3 SWAP1 SWAP3 MSTORE PUSH1 0x60 DUP5 ADD MSTORE ISZERO ISZERO PUSH1 0x80 DUP4 ADD MSTORE ISZERO ISZERO PUSH1 0xA0 DUP3 ADD MSTORE PUSH1 0xC0 ADD SWAP1 JUMP JUMPDEST PUSH1 0x0 DUP3 NOT DUP3 GT ISZERO PUSH2 0xBF0 JUMPI PUSH2 0xBF0 PUSH2 0xC4B JUMP JUMPDEST POP ADD SWAP1 JUMP JUMPDEST PUSH1 0x0 DUP3 PUSH2 0xC10 JUMPI PUSH4 0x4E487B71 PUSH1 0xE0 SHL DUP2 MSTORE PUSH1 0x12 PUSH1 0x4 MSTORE PUSH1 0x24 DUP2 REVERT JUMPDEST POP DIV SWAP1 JUMP JUMPDEST PUSH1 0x0 DUP2 PUSH1 0x0 NOT DIV DUP4 GT DUP3 ISZERO ISZERO AND ISZERO PUSH2 0xC2F JUMPI PUSH2 0xC2F PUSH2 0xC4B JUMP JUMPDEST POP MUL SWAP1 JUMP JUMPDEST PUSH1 0x0 DUP3 DUP3 LT ISZERO PUSH2 0xC46 JUMPI PUSH2 0xC46 PUSH2 0xC4B JUMP JUMPDEST POP SUB SWAP1 JUMP JUMPDEST PUSH4 0x4E487B71 PUSH1 0xE0 SHL PUSH1 0x0 MSTORE PUSH1 0x11 PUSH1 0x4 MSTORE PUSH1 0x24 PUSH1 0x0 REVERT JUMPDEST PUSH1 0x1 PUSH1 0x1 PUSH1 0xA0 SHL SUB DUP2 AND DUP2 EQ PUSH2 0xC76 JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP JUMP INVALID LOG2 PUSH5 0x6970667358 0x22 SLT KECCAK256 0xC5 0x2B SSTORE PUSH32 0x7156E4C160987FD3CDE3D8DF9C1B8A58F06610CC5E9BA482563C761464736F6C PUSH4 0x43000804 STOP CALLER ", "sha1": "cf2f6701407e4f2d5f64182b9d3e8132aca78a5d", "source": "// SPDX-License-Identifier: BUSL-1.1\n\npragma solidity ^0.8.0;\n\n/**\n * Smart contract library of mathematical functions operating with signed\n * 64.64-bit fixed point numbers.  Signed 64.64-bit fixed point number is\n * basically a simple fraction whose numerator is signed 128-bit integer and\n * denominator is 2^64.  As long as denominator is always the same, there is no\n * need to store it, thus in Solidity signed 64.64-bit fixed point numbers are\n * represented by int128 type holding only the numerator.\n */\nimport \"../Libraries/OptionMath.sol\";\nimport \"../OptionsUtils/OptionConfigUnintialized.sol\";\nimport \"../Interfaces/Interfaces.sol\";\nimport \"../Pool/BufferEpocPoolV2Unintialized.sol\";\n\nlibrary FeeCalculator {\n    /**\n     * @notice Calculate the current Utilisation\n     * @param amount Option amount\n     * @param pool The pool selling the option\n     * @return utilization Current utilization\n     */\n    function getNewUtilisation(\n        uint256 amount,\n        BufferEpocPoolV2Unintialized pool\n    ) public view returns (uint256 utilization) {\n        uint256 poolBalance = pool.totalTokenXBalance();\n        require(poolBalance > 0, \"O8\");\n\n        utilization = ((pool.lockedAmount() + amount) * 100e8) / poolBalance;\n    }\n\n    /**\n     * @notice Calculate the Utilisation adjusted ImpliedVol for the pool according to https://www.desmos.com/calculator/xdmhn97opd\n     * @param amount Option amount\n     * @param pool The pool selling the option\n     * @param config The option configuration\n     * @return iv The adjusted ImpliedVol\n     */\n    function currentImpliedVolatility(\n        uint256 amount,\n        BufferEpocPoolV2Unintialized pool,\n        OptionConfigUnintialized config\n    ) public view returns (uint256 iv) {\n        iv = config.impliedVolRate();\n        uint256 utilization = getNewUtilisation(amount, pool);\n        if (utilization > 40e8) {\n            iv += (iv * (utilization - 40e8)) / config.utilizationRate();\n        }\n    }\n\n    /**\n     * @notice Used for getting the price for Options in tokenX\n     * @param period Option period in seconds (1 days <= period <= 4 weeks)\n     * @param amount Option amount\n     * @param strike Strike price of the option\n     * @param optionType Type of the Option\n     * @param currentPrice Current price of the underlying asset\n     * @param config The option configuration\n     * @param pool The pool selling the option\n     * @return total Total price to be paid\n     * @return settlementFee Amount to be distributed to the Buffer token holders\n     * @return premium Amount that covers the price difference in the ITM options\n     */\n    function fees(\n        uint256 period,\n        uint256 amount,\n        uint256 strike,\n        IOptions.OptionType optionType,\n        uint256 currentPrice,\n        OptionConfigUnintialized config,\n        BufferEpocPoolV2Unintialized pool\n    )\n        public\n        view\n        returns (\n            uint256 total,\n            uint256 settlementFee,\n            uint256 premium\n        )\n    {\n        // usdPremium per amount is USD Price of the option in 1e8\n        uint256 usdPremium = OptionMath.blackScholesPrice(\n            currentImpliedVolatility(amount, pool, config),\n            strike,\n            currentPrice,\n            period,\n            optionType == IOptions.OptionType.Call\n        );\n        premium = (usdPremium * amount) / currentPrice;\n        settlementFee = getSettlementFee(amount, config);\n        total = settlementFee + premium;\n    }\n\n    /**\n     * @notice Used for getting the price for Options in tokenX\n     * @param period Option period in seconds (1 days <= period <= 4 weeks)\n     * @param amount Option amount\n     * @param strike Strike price of the option\n     * @param optionType Type of the Option\n     * @param currentPrice Current price of the underlying asset\n     * @param config The option configuration\n     * @param pool The pool selling the option\n     * @return total Total price to be paid\n     * @return settlementFee Amount to be distributed to the Buffer token holders\n     * @return premium Amount that covers the price difference in the ITM options\n     */\n    function feesSuccessOptions(\n        uint256 period,\n        uint256 amount,\n        uint256 strike,\n        IOptions.OptionType optionType,\n        uint256 currentPrice,\n        OptionConfigUnintialized config,\n        BufferEpocPoolV2Unintialized pool\n    )\n        public\n        view\n        returns (\n            uint256 total,\n            uint256 settlementFee,\n            uint256 premium\n        )\n    {\n        // usdPremium per amount is USD Price of the option in 1e8\n        uint256 usdPremium = OptionMath.blackScholesPrice(\n            currentImpliedVolatility(amount, pool, config),\n            strike,\n            currentPrice,\n            period,\n            optionType == IOptions.OptionType.Call\n        );\n        premium = ((usdPremium + currentPrice) * amount) / currentPrice;\n        settlementFee = getSettlementFee(amount, config);\n        total = settlementFee + premium;\n    }\n\n    /**\n     * @notice Used for getting the price for Options in USD\n     * @param period Option period in seconds (1 days <= period <= 4 weeks)\n     * @param amount Option amount\n     * @param strike Strike price of the option\n     * @param optionType Type of the Option\n     * @param currentPrice Current price of the underlying asset\n     * @param config The option configuration\n     * @param pool The pool selling the option\n     * @return total Total price to be paid in USD\n     * @return settlementFee Amount to be distributed to the Buffer token holders in USD\n     * @return premium Amount that covers the price difference in the ITM options in USD\n     */\n    function feesUsd(\n        uint256 period,\n        uint256 amount,\n        uint256 strike,\n        IOptions.OptionType optionType,\n        uint256 currentPrice,\n        OptionConfigUnintialized config,\n        BufferEpocPoolV2Unintialized pool\n    )\n        public\n        view\n        returns (\n            uint256 total,\n            uint256 settlementFee,\n            uint256 premium\n        )\n    {\n        // usdPremium per asset amount is USD Price of the option in 1e8\n        uint256 usdPremium = OptionMath.blackScholesPrice(\n            currentImpliedVolatility(amount, pool, config),\n            strike,\n            currentPrice,\n            period,\n            optionType == IOptions.OptionType.Call\n        );\n        settlementFee = getSettlementFee(amount, config);\n        premium = (usdPremium * amount) / currentPrice;\n        total = settlementFee + premium;\n    }\n\n    /**\n     * @notice Used for getting the price for Binary Options\n     * @param period Option period in seconds (1 days <= period <= 4 weeks)\n     * @param amount Option amount\n     * @param strike Strike price of the option\n     * @param isYes whether the option isAbove or not\n     * @param isAbove whether the price will stay above this strike or not\n     * @param currentPrice Current price of the underlying asset\n     * @param config The option configuration\n     * @param pool The pool selling the option\n     * @return total Total price to be paid\n     * @return settlementFee Amount to be distributed to the Buffer token holders\n     * @return premium Amount that covers the price difference in the ITM options\n     */\n    function feesBinary(\n        uint256 period,\n        uint256 amount,\n        uint256 strike,\n        bool isYes,\n        bool isAbove,\n        uint256 currentPrice,\n        OptionConfigUnintialized config,\n        BufferEpocPoolV2Unintialized pool\n    )\n        external\n        view\n        returns (\n            uint256 total,\n            uint256 settlementFee,\n            uint256 premium\n        )\n    {\n        premium = getPremium(\n            amount,\n            pool,\n            config,\n            strike,\n            period,\n            currentPrice,\n            isYes,\n            isAbove\n        );\n        settlementFee = getSettlementFee(amount, config);\n        total = settlementFee + premium;\n    }\n\n    /**\n     * @notice Used for getting the price for Binary KPI Options\n     * @param optionDetails Details of the option to be priced\n     * @param currentPrice Current price of the tokenX\n     * @param KPI KPI value for option\n     * @param config Option config\n     * @param pool pool contract\n     * @return total Total price to be paid\n     * @return settlementFee Amount to be distributed to the Buffer token holders\n     * @return premium Amount that covers the price difference in the ITM options\n     */\n    function feesKPIBinary(\n        IOptions.OptionDetails memory optionDetails,\n        uint256 currentPrice,\n        uint256 KPI,\n        OptionConfigUnintialized config,\n        BufferEpocPoolV2Unintialized pool\n    )\n        external\n        view\n        returns (\n            uint256 total,\n            uint256 settlementFee,\n            uint256 premium\n        )\n    {\n        premium = getPremiumBinary(\n            optionDetails,\n            pool,\n            config,\n            currentPrice,\n            KPI\n        );\n        settlementFee = getSettlementFee(optionDetails.amount, config);\n        total = settlementFee + premium;\n    }\n\n    /**\n     * @notice Calculates settlementFee\n     * @param amount Option amount\n     * @return fee Settlement fee amount\n     */\n    function getSettlementFee(uint256 amount, OptionConfigUnintialized config)\n        internal\n        view\n        returns (uint256 fee)\n    {\n        return (amount * config.settlementFeePercentage()) / 100;\n    }\n\n    function getPremium(\n        uint256 amount,\n        BufferEpocPoolV2Unintialized pool,\n        OptionConfigUnintialized config,\n        uint256 strike,\n        uint256 period,\n        uint256 currentPrice,\n        bool isYes,\n        bool isAbove\n    ) internal view returns (uint256 premium) {\n        // usdPremium per amount is USD Price of the option in 1e8\n        uint256 usdPremium = OptionMath.blackScholesPriceBinary(\n            currentImpliedVolatility(amount, pool, config),\n            strike,\n            currentPrice,\n            period,\n            isYes,\n            isAbove\n        );\n        premium = (usdPremium * amount) / currentPrice;\n    }\n\n    function getPremiumBinary(\n        IOptions.OptionDetails memory optionDetails,\n        BufferEpocPoolV2Unintialized pool,\n        OptionConfigUnintialized config,\n        uint256 currentPrice,\n        uint256 KPI\n    ) internal view returns (uint256 premium) {\n        // TODO : check unit\n        // usdPremium per amount is USD Price of the option in 1e8\n        uint256 usdPremium = OptionMath.blackScholesPriceBinary(\n            currentImpliedVolatility(optionDetails.amount, pool, config),\n            optionDetails.strike,\n            KPI,\n            optionDetails.period,\n            optionDetails.isYes,\n            optionDetails.isAbove\n        );\n        premium = (usdPremium * optionDetails.amount) / 1e8;\n    }\n}\n", "sourceMap": "697:10288:21:-:0;;;;;;;;;;;;;;;-1:-1:-1;;;697:10288:21;;;;;;;;;;;;;;;;;", "sourcePath": "contracts/Libraries/OptionFeeCalculator.sol", "deployment": {"address": "0xc1F1f4Fdf25D26C9dD78759fA1eE6D379143BeD4", "chainid": "97", "blockHeight": 20652052}}