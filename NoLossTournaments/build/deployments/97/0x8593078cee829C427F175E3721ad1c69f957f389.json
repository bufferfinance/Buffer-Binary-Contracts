{"allSourcePaths": {"21": "contracts/Libraries/OptionFeeCalculator.sol", "22": "contracts/Libraries/OptionMath.sol", "25": "contracts/Pool/BufferEpocPoolV2Unintialized.sol", "13": "/home/lenovo/.brownie/packages/OpenZeppelin/openzeppelin-contracts@4.3.2/contracts/utils/Context.sol", "4": "/home/lenovo/.brownie/packages/OpenZeppelin/openzeppelin-contracts@4.3.2/contracts/token/ERC20/ERC20.sol", "5": "/home/lenovo/.brownie/packages/OpenZeppelin/openzeppelin-contracts@4.3.2/contracts/token/ERC20/IERC20.sol", "6": "/home/lenovo/.brownie/packages/OpenZeppelin/openzeppelin-contracts@4.3.2/contracts/token/ERC20/extensions/IERC20Metadata.sol", "24": "contracts/OptionsUtils/OptionConfigUnintialized.sol"}, "bytecode": "610bb461003a600b82828239805160001a60731461002d57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe730000000000000000000000000000000000000000301460806040526004361061006c5760003560e01c8063351f62a0146100715780634fe8c640146100a4578063934ce3d6146100c5578063d69bde77146100d8578063dbfa5dd6146100eb578063fbef1d55146100fe575b600080fd5b61008461007f366004610a1d565b610111565b604080519384526020840192909252908201526060015b60405180910390f35b6100b76100b236600461092d565b610211565b60405190815260200161009b565b6100846100d336600461099d565b61035e565b6100b76100e636600461095c565b61039b565b6100846100f936600461084a565b6104d2565b61008461010c366004610a1d565b61050d565b60008060008073__OptionMath____________________________632c607c3b61013c8c888a61039b565b8b8a8f60028e600281111561016157634e487b7160e01b600052602160045260246000fd5b146040518663ffffffff1660e01b8152600401610182959493929190610a91565b60206040518083038186803b15801561019a57600080fd5b505af41580156101ae573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d29190610915565b90506101de8a876105fd565b9250866101eb8b83610b1a565b6101f59190610afa565b91506102018284610ae2565b9350509750975097945050505050565b600080826001600160a01b031663d9ac10d96040518163ffffffff1660e01b815260040160206040518083038186803b15801561024d57600080fd5b505afa158015610261573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102859190610915565b9050600081116102c05760405162461bcd60e51b815260206004820152600260248201526109e760f31b604482015260640160405180910390fd5b8084846001600160a01b0316636ab28bc86040518163ffffffff1660e01b815260040160206040518083038186803b1580156102fb57600080fd5b505afa15801561030f573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906103339190610915565b61033d9190610ae2565b61034c906402540be400610b1a565b6103569190610afa565b949350505050565b60008060006103738a85878c8f8b8e8e61068d565b905061037f8a866105fd565b915061038b8183610ae2565b9250985098509895505050505050565b6000816001600160a01b03166318f88e5b6040518163ffffffff1660e01b815260040160206040518083038186803b1580156103d657600080fd5b505afa1580156103ea573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061040e9190610915565b9050600061041c8585610211565b905063ee6b28008111156104ca57826001600160a01b0316636c321c8a6040518163ffffffff1660e01b815260040160206040518083038186803b15801561046357600080fd5b505afa158015610477573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061049b9190610915565b6104a963ee6b280083610b39565b6104b39084610b1a565b6104bd9190610afa565b6104c79083610ae2565b91505b509392505050565b60008060006104e48885878a8a610750565b90506104f48860200151866105fd565b91506105008183610ae2565b9250955095509592505050565b60008060008073__OptionMath____________________________632c607c3b6105388c888a61039b565b8b8a8f60028e600281111561055d57634e487b7160e01b600052602160045260246000fd5b146040518663ffffffff1660e01b815260040161057e959493929190610a91565b60206040518083038186803b15801561059657600080fd5b505af41580156105aa573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906105ce9190610915565b9050866105db8b83610b1a565b6105e59190610afa565b91506105f18a876105fd565b92506102018284610ae2565b60006064826001600160a01b031663f3fa34956040518163ffffffff1660e01b815260040160206040518083038186803b15801561063a57600080fd5b505afa15801561064e573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906106729190610915565b61067c9085610b1a565b6106869190610afa565b9392505050565b60008073__OptionMath____________________________63d573d6156106b58c8c8c61039b565b89888a89896040518763ffffffff1660e01b81526004016106db96959493929190610ab6565b60206040518083038186803b1580156106f357600080fd5b505af4158015610707573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061072b9190610915565b9050846107388b83610b1a565b6107429190610afa565b9a9950505050505050505050565b60008073__OptionMath____________________________63d573d61561077c8960200151898961039b565b6040808b01518b5160608d015160808e015193516001600160e01b031960e088901b1681526107b295948b939291600401610ab6565b60206040518083038186803b1580156107ca57600080fd5b505af41580156107de573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108029190610915565b9050838760200151826108159190610b1a565b61081f9190610afa565b979650505050505050565b8035801515811461083a57600080fd5b919050565b803561083a81610b66565b6000806000806000858703610120811215610863578182fd5b60a0811215610870578182fd5b5060405160a081016001600160401b038111828210171561089f57634e487b7160e01b83526041600452602483fd5b80604052508635815260208701356020820152604087013560408201526108c86060880161082a565b60608201526108d96080880161082a565b6080820152945060a0860135935060c086013592506108fa60e0870161083f565b9150610909610100870161083f565b90509295509295909350565b600060208284031215610926578081fd5b5051919050565b6000806040838503121561093f578182fd5b82359150602083013561095181610b66565b809150509250929050565b600080600060608486031215610970578283fd5b83359250602084013561098281610b66565b9150604084013561099281610b66565b809150509250925092565b600080600080600080600080610100898b0312156109b9578283fd5b8835975060208901359650604089013595506109d760608a0161082a565b94506109e560808a0161082a565b935060a0890135925060c08901356109fc81610b66565b915060e0890135610a0c81610b66565b809150509295985092959890939650565b600080600080600080600060e0888a031215610a37578283fd5b873596506020880135955060408801359450606088013560038110610a5a578384fd5b93506080880135925060a0880135610a7181610b66565b915060c0880135610a8181610b66565b8091505092959891949750929550565b9485526020850193909352604084019190915260608301521515608082015260a00190565b95865260208601949094526040850192909252606084015215156080830152151560a082015260c00190565b60008219821115610af557610af5610b50565b500190565b600082610b1557634e487b7160e01b81526012600452602481fd5b500490565b6000816000190483118215151615610b3457610b34610b50565b500290565b600082821015610b4b57610b4b610b50565b500390565b634e487b7160e01b600052601160045260246000fd5b6001600160a01b0381168114610b7b57600080fd5b5056fea264697066735822122004a02867ff727e25093a9a010a5f1634f310210a5cfa62e03390f398932e164f64736f6c63430008040033", "bytecodeSha1": "718069576b0d9ecd9a08b432b2af552c4d591c8e", "coverageMap": {"statements": {"21": {"FeeCalculator.feesUsd": {"0": [4928, 4976], "1": [4986, 5032], "2": [5042, 5073]}, "FeeCalculator.getNewUtilisation": {"3": [1128, 1158], "4": [1169, 1237]}, "FeeCalculator.feesBinary": {"5": [6233, 6427], "6": [6437, 6485], "7": [6495, 6526]}, "FeeCalculator.currentImpliedVolatility": {"8": [1759, 1787], "9": [1898, 1958]}, "FeeCalculator.feesKPIBinary": {"10": [7438, 7582], "11": [7592, 7654], "12": [7664, 7695]}, "FeeCalculator.fees": {"13": [3362, 3408], "14": [3418, 3466], "15": [3476, 3507]}, "FeeCalculator.getSettlementFee": {"16": [7989, 8045]}, "FeeCalculator.getPremium": {"17": [8670, 8716]}, "FeeCalculator.getPremiumBinary": {"18": [9403, 9463]}}, "22": {}, "25": {}, "13": {}, "4": {}, "5": {}, "6": {}, "24": {}}, "branches": {"21": {"FeeCalculator.getNewUtilisation": {"19": [1136, 1151, true]}, "FeeCalculator.currentImpliedVolatility": {"20": [1864, 1882, false]}}, "22": {}, "25": {}, "13": {}, "4": {}, "5": {}, "6": {}, "24": {}}}, "dependencies": ["ABDKMath64x64", "BufferEpocPoolV2Unintialized", "OpenZeppelin/openzeppelin-contracts@4.3.2/Context", "OpenZeppelin/openzeppelin-contracts@4.3.2/ERC20", "OpenZeppelin/openzeppelin-contracts@4.3.2/IERC20", "OpenZeppelin/openzeppelin-contracts@4.3.2/IERC20Metadata", "OptionConfigUnintialized", "OptionMath"], "offset": [697, 9472], "type": "library", "abi": [{"inputs": [{"internalType": "uint256", "name": "amount", "type": "uint256"}, {"internalType": "contract BufferEpocPoolV2Unintialized", "name": "pool", "type": "BufferEpocPoolV2Unintialized"}, {"internalType": "contract OptionConfigUnintialized", "name": "config", "type": "OptionConfigUnintialized"}], "name": "currentImpliedVolatility", "outputs": [{"internalType": "uint256", "name": "iv", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "period", "type": "uint256"}, {"internalType": "uint256", "name": "amount", "type": "uint256"}, {"internalType": "uint256", "name": "strike", "type": "uint256"}, {"internalType": "enum IBufferOptions.OptionType", "name": "optionType", "type": "IBufferOptions.OptionType"}, {"internalType": "uint256", "name": "currentPrice", "type": "uint256"}, {"internalType": "contract OptionConfigUnintialized", "name": "config", "type": "OptionConfigUnintialized"}, {"internalType": "contract BufferEpocPoolV2Unintialized", "name": "pool", "type": "BufferEpocPoolV2Unintialized"}], "name": "fees", "outputs": [{"internalType": "uint256", "name": "total", "type": "uint256"}, {"internalType": "uint256", "name": "settlementFee", "type": "uint256"}, {"internalType": "uint256", "name": "premium", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "period", "type": "uint256"}, {"internalType": "uint256", "name": "amount", "type": "uint256"}, {"internalType": "uint256", "name": "strike", "type": "uint256"}, {"internalType": "bool", "name": "isYes", "type": "bool"}, {"internalType": "bool", "name": "isAbove", "type": "bool"}, {"internalType": "uint256", "name": "currentPrice", "type": "uint256"}, {"internalType": "contract OptionConfigUnintialized", "name": "config", "type": "OptionConfigUnintialized"}, {"internalType": "contract BufferEpocPoolV2Unintialized", "name": "pool", "type": "BufferEpocPoolV2Unintialized"}], "name": "feesBinary", "outputs": [{"internalType": "uint256", "name": "total", "type": "uint256"}, {"internalType": "uint256", "name": "settlementFee", "type": "uint256"}, {"internalType": "uint256", "name": "premium", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"components": [{"internalType": "uint256", "name": "period", "type": "uint256"}, {"internalType": "uint256", "name": "amount", "type": "uint256"}, {"internalType": "uint256", "name": "strike", "type": "uint256"}, {"internalType": "bool", "name": "isYes", "type": "bool"}, {"internalType": "bool", "name": "isAbove", "type": "bool"}], "internalType": "struct IBufferOptions.OptionDetails", "name": "optionDetails", "type": "tuple"}, {"internalType": "uint256", "name": "currentPrice", "type": "uint256"}, {"internalType": "uint256", "name": "KPI", "type": "uint256"}, {"internalType": "contract OptionConfigUnintialized", "name": "config", "type": "OptionConfigUnintialized"}, {"internalType": "contract BufferEpocPoolV2Unintialized", "name": "pool", "type": "BufferEpocPoolV2Unintialized"}], "name": "feesKPIBinary", "outputs": [{"internalType": "uint256", "name": "total", "type": "uint256"}, {"internalType": "uint256", "name": "settlementFee", "type": "uint256"}, {"internalType": "uint256", "name": "premium", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "period", "type": "uint256"}, {"internalType": "uint256", "name": "amount", "type": "uint256"}, {"internalType": "uint256", "name": "strike", "type": "uint256"}, {"internalType": "enum IBufferOptions.OptionType", "name": "optionType", "type": "IBufferOptions.OptionType"}, {"internalType": "uint256", "name": "currentPrice", "type": "uint256"}, {"internalType": "contract OptionConfigUnintialized", "name": "config", "type": "OptionConfigUnintialized"}, {"internalType": "contract BufferEpocPoolV2Unintialized", "name": "pool", "type": "BufferEpocPoolV2Unintialized"}], "name": "feesUsd", "outputs": [{"internalType": "uint256", "name": "total", "type": "uint256"}, {"internalType": "uint256", "name": "settlementFee", "type": "uint256"}, {"internalType": "uint256", "name": "premium", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "amount", "type": "uint256"}, {"internalType": "contract BufferEpocPoolV2Unintialized", "name": "pool", "type": "BufferEpocPoolV2Unintialized"}], "name": "getNewUtilisation", "outputs": [{"internalType": "uint256", "name": "utilization", "type": "uint256"}], "stateMutability": "view", "type": "function"}], "ast": {"absolutePath": "contracts/Libraries/OptionFeeCalculator.sol", "exportedSymbols": {"ABDKMath64x64": [16512], "AccessControl": [17320], "AggregatorV3Interface": [13479], "BufferEpocPoolV2Unintialized": [7468], "Context": [12948], "ERC165": [19163], "ERC20": [4597], "FeeCalculator": [5051], "IAccessControl": [18936], "IBufferOptions": [13339], "IERC165": [19633], "IERC20": [13026], "IERC20Metadata": [13051], "ILiquidityPool": [13183], "INFTCore": [13579], "INFTReceiver": [13355], "IOptionWindowCreator": [13428], "IOptionsConfig": [13408], "IPancakePair": [13063], "IPriceProvider": [13518], "ISlidingWindowOracle": [13617], "ISlidingWindowOracleV1": [13598], "OptionConfigUnintialized": [6254], "OptionMath": [17013], "Ownable": [4011], "Strings": [19139]}, "id": 5052, "license": "BUSL-1.1", "nodeType": "SourceUnit", "nodes": [{"id": 4599, "literals": ["solidity", "^", "0.8", ".0"], "nodeType": "PragmaDirective", "src": "38:23:21"}, {"absolutePath": "contracts/Libraries/OptionMath.sol", "file": "../Libraries/OptionMath.sol", "id": 4600, "nameLocation": "-1:-1:-1", "nodeType": "ImportDirective", "scope": 5052, "sourceUnit": 17014, "src": "513:37:21", "symbolAliases": [], "unitAlias": ""}, {"absolutePath": "contracts/OptionsUtils/OptionConfigUnintialized.sol", "file": "../OptionsUtils/OptionConfigUnintialized.sol", "id": 4601, "nameLocation": "-1:-1:-1", "nodeType": "ImportDirective", "scope": 5052, "sourceUnit": 6255, "src": "551:54:21", "symbolAliases": [], "unitAlias": ""}, {"absolutePath": "contracts/Interfaces/Interfaces.sol", "file": "../Interfaces/Interfaces.sol", "id": 4602, "nameLocation": "-1:-1:-1", "nodeType": "ImportDirective", "scope": 5052, "sourceUnit": 13618, "src": "606:38:21", "symbolAliases": [], "unitAlias": ""}, {"absolutePath": "contracts/Pool/BufferEpocPoolV2Unintialized.sol", "file": "../Pool/BufferEpocPoolV2Unintialized.sol", "id": 4603, "nameLocation": "-1:-1:-1", "nodeType": "ImportDirective", "scope": 5052, "sourceUnit": 7469, "src": "645:50:21", "symbolAliases": [], "unitAlias": ""}, {"abstract": false, "baseContracts": [], "contractDependencies": [], "contractKind": "library", "fullyImplemented": true, "id": 5051, "linearizedBaseContracts": [5051], "name": "FeeCalculator", "nameLocation": "705:13:21", "nodeType": "ContractDefinition", "nodes": [{"body": {"id": 4641, "nodeType": "Block", "src": "1061:183:21", "statements": [{"assignments": [4615], "declarations": [{"constant": false, "id": 4615, "mutability": "mutable", "name": "poolBalance", "nameLocation": "1079:11:21", "nodeType": "VariableDeclaration", "scope": 4641, "src": "1071:19:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4614, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "1071:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "id": 4619, "initialValue": {"arguments": [], "expression": {"argumentTypes": [], "expression": {"id": 4616, "name": "pool", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4609, "src": "1093:4:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7468", "typeString": "contract BufferEpocPoolV2Unintialized"}}, "id": 4617, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "totalTokenXBalance", "nodeType": "MemberAccess", "referencedDeclaration": 7431, "src": "1093:23:21", "typeDescriptions": {"typeIdentifier": "t_function_external_view$__$returns$_t_uint256_$", "typeString": "function () view external returns (uint256)"}}, "id": 4618, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "1093:25:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "VariableDeclarationStatement", "src": "1071:47:21"}, {"expression": {"arguments": [{"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4623, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4621, "name": "poolBalance", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4615, "src": "1136:11:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": ">", "rightExpression": {"hexValue": "30", "id": 4622, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "1150:1:21", "typeDescriptions": {"typeIdentifier": "t_rational_0_by_1", "typeString": "int_const 0"}, "value": "0"}, "src": "1136:15:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}, {"hexValue": "4f38", "id": 4624, "isConstant": false, "isLValue": false, "isPure": true, "kind": "string", "lValueRequested": false, "nodeType": "Literal", "src": "1153:4:21", "typeDescriptions": {"typeIdentifier": "t_stringliteral_694eb040654db27d285bc1da6a2956b58ad679956ab6c2a13bdd9499d1faacb7", "typeString": "literal_string \"O8\""}, "value": "O8"}], "expression": {"argumentTypes": [{"typeIdentifier": "t_bool", "typeString": "bool"}, {"typeIdentifier": "t_stringliteral_694eb040654db27d285bc1da6a2956b58ad679956ab6c2a13bdd9499d1faacb7", "typeString": "literal_string \"O8\""}], "id": 4620, "name": "require", "nodeType": "Identifier", "overloadedDeclarations": [-18, -18], "referencedDeclaration": -18, "src": "1128:7:21", "typeDescriptions": {"typeIdentifier": "t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$", "typeString": "function (bool,string memory) pure"}}, "id": 4625, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "1128:30:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_tuple$__$", "typeString": "tuple()"}}, "id": 4626, "nodeType": "ExpressionStatement", "src": "1128:30:21"}, {"expression": {"id": 4639, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4627, "name": "utilization", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4612, "src": "1169:11:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4638, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"components": [{"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4635, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"components": [{"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4632, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"arguments": [], "expression": {"argumentTypes": [], "expression": {"id": 4628, "name": "pool", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4609, "src": "1185:4:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7468", "typeString": "contract BufferEpocPoolV2Unintialized"}}, "id": 4629, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "lockedAmount", "nodeType": "MemberAccess", "referencedDeclaration": 6280, "src": "1185:17:21", "typeDescriptions": {"typeIdentifier": "t_function_external_view$__$returns$_t_uint256_$", "typeString": "function () view external returns (uint256)"}}, "id": 4630, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "1185:19:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "+", "rightExpression": {"id": 4631, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4606, "src": "1207:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "1185:28:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "id": 4633, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "1184:30:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "*", "rightExpression": {"hexValue": "3130306538", "id": 4634, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "1217:5:21", "typeDescriptions": {"typeIdentifier": "t_rational_10000000000_by_1", "typeString": "int_const 10000000000"}, "value": "100e8"}, "src": "1184:38:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "id": 4636, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "1183:40:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "/", "rightExpression": {"id": 4637, "name": "poolBalance", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4615, "src": "1226:11:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "1183:54:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "1169:68:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4640, "nodeType": "ExpressionStatement", "src": "1169:68:21"}]}, "documentation": {"id": 4604, "nodeType": "StructuredDocumentation", "src": "725:189:21", "text": " @notice Calculate the current Utilisation\n @param amount Option amount\n @param pool The pool selling the option\n @return utilization Current utilization"}, "functionSelector": "4fe8c640", "id": 4642, "implemented": true, "kind": "function", "modifiers": [], "name": "getNewUtilisation", "nameLocation": "928:17:21", "nodeType": "FunctionDefinition", "parameters": {"id": 4610, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4606, "mutability": "mutable", "name": "amount", "nameLocation": "963:6:21", "nodeType": "VariableDeclaration", "scope": 4642, "src": "955:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4605, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "955:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4609, "mutability": "mutable", "name": "pool", "nameLocation": "1008:4:21", "nodeType": "VariableDeclaration", "scope": 4642, "src": "979:33:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7468", "typeString": "contract BufferEpocPoolV2Unintialized"}, "typeName": {"id": 4608, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4607, "name": "BufferEpocPoolV2Unintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 7468, "src": "979:28:21"}, "referencedDeclaration": 7468, "src": "979:28:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7468", "typeString": "contract BufferEpocPoolV2Unintialized"}}, "visibility": "internal"}], "src": "945:73:21"}, "returnParameters": {"id": 4613, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4612, "mutability": "mutable", "name": "utilization", "nameLocation": "1048:11:21", "nodeType": "VariableDeclaration", "scope": 4642, "src": "1040:19:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4611, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "1040:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "src": "1039:21:21"}, "scope": 5051, "src": "919:325:21", "stateMutability": "view", "virtual": false, "visibility": "public"}, {"body": {"id": 4688, "nodeType": "Block", "src": "1749:226:21", "statements": [{"expression": {"id": 4660, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4656, "name": "iv", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4654, "src": "1759:2:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"arguments": [], "expression": {"argumentTypes": [], "expression": {"id": 4657, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4651, "src": "1764:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6254", "typeString": "contract OptionConfigUnintialized"}}, "id": 4658, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "impliedVolRate", "nodeType": "MemberAccess", "referencedDeclaration": 5951, "src": "1764:21:21", "typeDescriptions": {"typeIdentifier": "t_function_external_view$__$returns$_t_uint256_$", "typeString": "function () view external returns (uint256)"}}, "id": 4659, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "1764:23:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "1759:28:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4661, "nodeType": "ExpressionStatement", "src": "1759:28:21"}, {"assignments": [4663], "declarations": [{"constant": false, "id": 4663, "mutability": "mutable", "name": "utilization", "nameLocation": "1805:11:21", "nodeType": "VariableDeclaration", "scope": 4688, "src": "1797:19:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4662, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "1797:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "id": 4668, "initialValue": {"arguments": [{"id": 4665, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4645, "src": "1837:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4666, "name": "pool", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4648, "src": "1845:4:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7468", "typeString": "contract BufferEpocPoolV2Unintialized"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7468", "typeString": "contract BufferEpocPoolV2Unintialized"}], "id": 4664, "name": "getNewUtilisation", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4642, "src": "1819:17:21", "typeDescriptions": {"typeIdentifier": "t_function_internal_view$_t_uint256_$_t_contract$_BufferEpocPoolV2Unintialized_$7468_$returns$_t_uint256_$", "typeString": "function (uint256,contract BufferEpocPoolV2Unintialized) view returns (uint256)"}}, "id": 4667, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "1819:31:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "VariableDeclarationStatement", "src": "1797:53:21"}, {"condition": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4671, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4669, "name": "utilization", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4663, "src": "1864:11:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": ">", "rightExpression": {"hexValue": "34306538", "id": 4670, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "1878:4:21", "typeDescriptions": {"typeIdentifier": "t_rational_4000000000_by_1", "typeString": "int_const 4000000000"}, "value": "40e8"}, "src": "1864:18:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}, "id": 4687, "nodeType": "IfStatement", "src": "1860:109:21", "trueBody": {"id": 4686, "nodeType": "Block", "src": "1884:85:21", "statements": [{"expression": {"id": 4684, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4672, "name": "iv", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4654, "src": "1898:2:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "+=", "rightHandSide": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4683, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"components": [{"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4678, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4673, "name": "iv", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4654, "src": "1905:2:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "*", "rightExpression": {"components": [{"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4676, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4674, "name": "utilization", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4663, "src": "1911:11:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "-", "rightExpression": {"hexValue": "34306538", "id": 4675, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "1925:4:21", "typeDescriptions": {"typeIdentifier": "t_rational_4000000000_by_1", "typeString": "int_const 4000000000"}, "value": "40e8"}, "src": "1911:18:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "id": 4677, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "1910:20:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "1905:25:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "id": 4679, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "1904:27:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "/", "rightExpression": {"arguments": [], "expression": {"argumentTypes": [], "expression": {"id": 4680, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4651, "src": "1934:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6254", "typeString": "contract OptionConfigUnintialized"}}, "id": 4681, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "utilizationRate", "nodeType": "MemberAccess", "referencedDeclaration": 5966, "src": "1934:22:21", "typeDescriptions": {"typeIdentifier": "t_function_external_view$__$returns$_t_uint256_$", "typeString": "function () view external returns (uint256)"}}, "id": 4682, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "1934:24:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "1904:54:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "1898:60:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4685, "nodeType": "ExpressionStatement", "src": "1898:60:21"}]}}]}, "documentation": {"id": 4643, "nodeType": "StructuredDocumentation", "src": "1250:313:21", "text": " @notice Calculate the Utilisation adjusted ImpliedVol for the pool according to https://www.desmos.com/calculator/xdmhn97opd\n @param amount Option amount\n @param pool The pool selling the option\n @param config The option configuration\n @return iv The adjusted ImpliedVol"}, "functionSelector": "d69bde77", "id": 4689, "implemented": true, "kind": "function", "modifiers": [], "name": "currentImpliedVolatility", "nameLocation": "1577:24:21", "nodeType": "FunctionDefinition", "parameters": {"id": 4652, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4645, "mutability": "mutable", "name": "amount", "nameLocation": "1619:6:21", "nodeType": "VariableDeclaration", "scope": 4689, "src": "1611:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4644, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "1611:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4648, "mutability": "mutable", "name": "pool", "nameLocation": "1664:4:21", "nodeType": "VariableDeclaration", "scope": 4689, "src": "1635:33:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7468", "typeString": "contract BufferEpocPoolV2Unintialized"}, "typeName": {"id": 4647, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4646, "name": "BufferEpocPoolV2Unintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 7468, "src": "1635:28:21"}, "referencedDeclaration": 7468, "src": "1635:28:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7468", "typeString": "contract BufferEpocPoolV2Unintialized"}}, "visibility": "internal"}, {"constant": false, "id": 4651, "mutability": "mutable", "name": "config", "nameLocation": "1703:6:21", "nodeType": "VariableDeclaration", "scope": 4689, "src": "1678:31:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6254", "typeString": "contract OptionConfigUnintialized"}, "typeName": {"id": 4650, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4649, "name": "OptionConfigUnintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 6254, "src": "1678:24:21"}, "referencedDeclaration": 6254, "src": "1678:24:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6254", "typeString": "contract OptionConfigUnintialized"}}, "visibility": "internal"}], "src": "1601:114:21"}, "returnParameters": {"id": 4655, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4654, "mutability": "mutable", "name": "iv", "nameLocation": "1745:2:21", "nodeType": "VariableDeclaration", "scope": 4689, "src": "1737:10:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4653, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "1737:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "src": "1736:12:21"}, "scope": 5051, "src": "1568:407:21", "stateMutability": "view", "virtual": false, "visibility": "public"}, {"body": {"id": 4757, "nodeType": "Block", "src": "3032:482:21", "statements": [{"assignments": [4717], "declarations": [{"constant": false, "id": 4717, "mutability": "mutable", "name": "usdPremium", "nameLocation": "3117:10:21", "nodeType": "VariableDeclaration", "scope": 4757, "src": "3109:18:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4716, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "3109:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "id": 4734, "initialValue": {"arguments": [{"arguments": [{"id": 4721, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4694, "src": "3197:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4722, "name": "pool", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4707, "src": "3205:4:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7468", "typeString": "contract BufferEpocPoolV2Unintialized"}}, {"id": 4723, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4704, "src": "3211:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6254", "typeString": "contract OptionConfigUnintialized"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7468", "typeString": "contract BufferEpocPoolV2Unintialized"}, {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6254", "typeString": "contract OptionConfigUnintialized"}], "id": 4720, "name": "currentImpliedVolatility", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4689, "src": "3172:24:21", "typeDescriptions": {"typeIdentifier": "t_function_internal_view$_t_uint256_$_t_contract$_BufferEpocPoolV2Unintialized_$7468_$_t_contract$_OptionConfigUnintialized_$6254_$returns$_t_uint256_$", "typeString": "function (uint256,contract BufferEpocPoolV2Unintialized,contract OptionConfigUnintialized) view returns (uint256)"}}, "id": 4724, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "3172:46:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4725, "name": "strike", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4696, "src": "3232:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4726, "name": "currentPrice", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4701, "src": "3252:12:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4727, "name": "period", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4692, "src": "3278:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"commonType": {"typeIdentifier": "t_enum$_OptionType_$13234", "typeString": "enum IBufferOptions.OptionType"}, "id": 4732, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4728, "name": "optionType", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4699, "src": "3298:10:21", "typeDescriptions": {"typeIdentifier": "t_enum$_OptionType_$13234", "typeString": "enum IBufferOptions.OptionType"}}, "nodeType": "BinaryOperation", "operator": "==", "rightExpression": {"expression": {"expression": {"id": 4729, "name": "IBufferOptions", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 13339, "src": "3312:14:21", "typeDescriptions": {"typeIdentifier": "t_type$_t_contract$_IBufferOptions_$13339_$", "typeString": "type(contract IBufferOptions)"}}, "id": 4730, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "OptionType", "nodeType": "MemberAccess", "referencedDeclaration": 13234, "src": "3312:25:21", "typeDescriptions": {"typeIdentifier": "t_type$_t_enum$_OptionType_$13234_$", "typeString": "type(enum IBufferOptions.OptionType)"}}, "id": 4731, "isConstant": false, "isLValue": false, "isPure": true, "lValueRequested": false, "memberName": "Call", "nodeType": "MemberAccess", "referencedDeclaration": 13233, "src": "3312:30:21", "typeDescriptions": {"typeIdentifier": "t_enum$_OptionType_$13234", "typeString": "enum IBufferOptions.OptionType"}}, "src": "3298:44:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_bool", "typeString": "bool"}], "expression": {"id": 4718, "name": "OptionMath", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 17013, "src": "3130:10:21", "typeDescriptions": {"typeIdentifier": "t_type$_t_contract$_OptionMath_$17013_$", "typeString": "type(library OptionMath)"}}, "id": 4719, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "blackScholesPrice", "nodeType": "MemberAccess", "referencedDeclaration": 16717, "src": "3130:28:21", "typeDescriptions": {"typeIdentifier": "t_function_delegatecall_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_bool_$returns$_t_uint256_$", "typeString": "function (uint256,uint256,uint256,uint256,bool) pure returns (uint256)"}}, "id": 4733, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "3130:222:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "VariableDeclarationStatement", "src": "3109:243:21"}, {"expression": {"id": 4742, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4735, "name": "premium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4714, "src": "3362:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4741, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"components": [{"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4738, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4736, "name": "usdPremium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4717, "src": "3373:10:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "*", "rightExpression": {"id": 4737, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4694, "src": "3386:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "3373:19:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "id": 4739, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "3372:21:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "/", "rightExpression": {"id": 4740, "name": "currentPrice", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4701, "src": "3396:12:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "3372:36:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "3362:46:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4743, "nodeType": "ExpressionStatement", "src": "3362:46:21"}, {"expression": {"id": 4749, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4744, "name": "settlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4712, "src": "3418:13:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"arguments": [{"id": 4746, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4694, "src": "3451:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4747, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4704, "src": "3459:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6254", "typeString": "contract OptionConfigUnintialized"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6254", "typeString": "contract OptionConfigUnintialized"}], "id": 4745, "name": "getSettlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4951, "src": "3434:16:21", "typeDescriptions": {"typeIdentifier": "t_function_internal_view$_t_uint256_$_t_contract$_OptionConfigUnintialized_$6254_$returns$_t_uint256_$", "typeString": "function (uint256,contract OptionConfigUnintialized) view returns (uint256)"}}, "id": 4748, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "3434:32:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "3418:48:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4750, "nodeType": "ExpressionStatement", "src": "3418:48:21"}, {"expression": {"id": 4755, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4751, "name": "total", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4710, "src": "3476:5:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4754, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4752, "name": "settlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4712, "src": "3484:13:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "+", "rightExpression": {"id": 4753, "name": "premium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4714, "src": "3500:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "3484:23:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "3476:31:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4756, "nodeType": "ExpressionStatement", "src": "3476:31:21"}]}, "documentation": {"id": 4690, "nodeType": "StructuredDocumentation", "src": "1981:644:21", "text": " @notice Used for getting the price for Options in tokenX\n @param period Option period in seconds (1 days <= period <= 4 weeks)\n @param amount Option amount\n @param strike Strike price of the option\n @param optionType Type of the Option\n @param currentPrice Current price of the underlying asset\n @param config The option configuration\n @param pool The pool selling the option\n @return total Total price to be paid\n @return settlementFee Amount to be distributed to the Buffer token holders\n @return premium Amount that covers the price difference in the ITM options"}, "functionSelector": "fbef1d55", "id": 4758, "implemented": true, "kind": "function", "modifiers": [], "name": "fees", "nameLocation": "2639:4:21", "nodeType": "FunctionDefinition", "parameters": {"id": 4708, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4692, "mutability": "mutable", "name": "period", "nameLocation": "2661:6:21", "nodeType": "VariableDeclaration", "scope": 4758, "src": "2653:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4691, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "2653:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4694, "mutability": "mutable", "name": "amount", "nameLocation": "2685:6:21", "nodeType": "VariableDeclaration", "scope": 4758, "src": "2677:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4693, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "2677:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4696, "mutability": "mutable", "name": "strike", "nameLocation": "2709:6:21", "nodeType": "VariableDeclaration", "scope": 4758, "src": "2701:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4695, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "2701:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4699, "mutability": "mutable", "name": "optionType", "nameLocation": "2751:10:21", "nodeType": "VariableDeclaration", "scope": 4758, "src": "2725:36:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_enum$_OptionType_$13234", "typeString": "enum IBufferOptions.OptionType"}, "typeName": {"id": 4698, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4697, "name": "IBufferOptions.OptionType", "nodeType": "IdentifierPath", "referencedDeclaration": 13234, "src": "2725:25:21"}, "referencedDeclaration": 13234, "src": "2725:25:21", "typeDescriptions": {"typeIdentifier": "t_enum$_OptionType_$13234", "typeString": "enum IBufferOptions.OptionType"}}, "visibility": "internal"}, {"constant": false, "id": 4701, "mutability": "mutable", "name": "currentPrice", "nameLocation": "2779:12:21", "nodeType": "VariableDeclaration", "scope": 4758, "src": "2771:20:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4700, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "2771:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4704, "mutability": "mutable", "name": "config", "nameLocation": "2826:6:21", "nodeType": "VariableDeclaration", "scope": 4758, "src": "2801:31:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6254", "typeString": "contract OptionConfigUnintialized"}, "typeName": {"id": 4703, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4702, "name": "OptionConfigUnintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 6254, "src": "2801:24:21"}, "referencedDeclaration": 6254, "src": "2801:24:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6254", "typeString": "contract OptionConfigUnintialized"}}, "visibility": "internal"}, {"constant": false, "id": 4707, "mutability": "mutable", "name": "pool", "nameLocation": "2871:4:21", "nodeType": "VariableDeclaration", "scope": 4758, "src": "2842:33:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7468", "typeString": "contract BufferEpocPoolV2Unintialized"}, "typeName": {"id": 4706, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4705, "name": "BufferEpocPoolV2Unintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 7468, "src": "2842:28:21"}, "referencedDeclaration": 7468, "src": "2842:28:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7468", "typeString": "contract BufferEpocPoolV2Unintialized"}}, "visibility": "internal"}], "src": "2643:238:21"}, "returnParameters": {"id": 4715, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4710, "mutability": "mutable", "name": "total", "nameLocation": "2948:5:21", "nodeType": "VariableDeclaration", "scope": 4758, "src": "2940:13:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4709, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "2940:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4712, "mutability": "mutable", "name": "settlementFee", "nameLocation": "2975:13:21", "nodeType": "VariableDeclaration", "scope": 4758, "src": "2967:21:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4711, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "2967:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4714, "mutability": "mutable", "name": "premium", "nameLocation": "3010:7:21", "nodeType": "VariableDeclaration", "scope": 4758, "src": "3002:15:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4713, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "3002:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "src": "2926:101:21"}, "scope": 5051, "src": "2630:884:21", "stateMutability": "view", "virtual": false, "visibility": "public"}, {"body": {"id": 4826, "nodeType": "Block", "src": "4592:488:21", "statements": [{"assignments": [4786], "declarations": [{"constant": false, "id": 4786, "mutability": "mutable", "name": "usdPremium", "nameLocation": "4683:10:21", "nodeType": "VariableDeclaration", "scope": 4826, "src": "4675:18:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4785, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4675:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "id": 4803, "initialValue": {"arguments": [{"arguments": [{"id": 4790, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4763, "src": "4763:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4791, "name": "pool", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4776, "src": "4771:4:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7468", "typeString": "contract BufferEpocPoolV2Unintialized"}}, {"id": 4792, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4773, "src": "4777:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6254", "typeString": "contract OptionConfigUnintialized"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7468", "typeString": "contract BufferEpocPoolV2Unintialized"}, {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6254", "typeString": "contract OptionConfigUnintialized"}], "id": 4789, "name": "currentImpliedVolatility", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4689, "src": "4738:24:21", "typeDescriptions": {"typeIdentifier": "t_function_internal_view$_t_uint256_$_t_contract$_BufferEpocPoolV2Unintialized_$7468_$_t_contract$_OptionConfigUnintialized_$6254_$returns$_t_uint256_$", "typeString": "function (uint256,contract BufferEpocPoolV2Unintialized,contract OptionConfigUnintialized) view returns (uint256)"}}, "id": 4793, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "4738:46:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4794, "name": "strike", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4765, "src": "4798:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4795, "name": "currentPrice", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4770, "src": "4818:12:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4796, "name": "period", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4761, "src": "4844:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"commonType": {"typeIdentifier": "t_enum$_OptionType_$13234", "typeString": "enum IBufferOptions.OptionType"}, "id": 4801, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4797, "name": "optionType", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4768, "src": "4864:10:21", "typeDescriptions": {"typeIdentifier": "t_enum$_OptionType_$13234", "typeString": "enum IBufferOptions.OptionType"}}, "nodeType": "BinaryOperation", "operator": "==", "rightExpression": {"expression": {"expression": {"id": 4798, "name": "IBufferOptions", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 13339, "src": "4878:14:21", "typeDescriptions": {"typeIdentifier": "t_type$_t_contract$_IBufferOptions_$13339_$", "typeString": "type(contract IBufferOptions)"}}, "id": 4799, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "OptionType", "nodeType": "MemberAccess", "referencedDeclaration": 13234, "src": "4878:25:21", "typeDescriptions": {"typeIdentifier": "t_type$_t_enum$_OptionType_$13234_$", "typeString": "type(enum IBufferOptions.OptionType)"}}, "id": 4800, "isConstant": false, "isLValue": false, "isPure": true, "lValueRequested": false, "memberName": "Call", "nodeType": "MemberAccess", "referencedDeclaration": 13233, "src": "4878:30:21", "typeDescriptions": {"typeIdentifier": "t_enum$_OptionType_$13234", "typeString": "enum IBufferOptions.OptionType"}}, "src": "4864:44:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_bool", "typeString": "bool"}], "expression": {"id": 4787, "name": "OptionMath", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 17013, "src": "4696:10:21", "typeDescriptions": {"typeIdentifier": "t_type$_t_contract$_OptionMath_$17013_$", "typeString": "type(library OptionMath)"}}, "id": 4788, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "blackScholesPrice", "nodeType": "MemberAccess", "referencedDeclaration": 16717, "src": "4696:28:21", "typeDescriptions": {"typeIdentifier": "t_function_delegatecall_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_bool_$returns$_t_uint256_$", "typeString": "function (uint256,uint256,uint256,uint256,bool) pure returns (uint256)"}}, "id": 4802, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "4696:222:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "VariableDeclarationStatement", "src": "4675:243:21"}, {"expression": {"id": 4809, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4804, "name": "settlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4781, "src": "4928:13:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"arguments": [{"id": 4806, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4763, "src": "4961:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4807, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4773, "src": "4969:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6254", "typeString": "contract OptionConfigUnintialized"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6254", "typeString": "contract OptionConfigUnintialized"}], "id": 4805, "name": "getSettlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4951, "src": "4944:16:21", "typeDescriptions": {"typeIdentifier": "t_function_internal_view$_t_uint256_$_t_contract$_OptionConfigUnintialized_$6254_$returns$_t_uint256_$", "typeString": "function (uint256,contract OptionConfigUnintialized) view returns (uint256)"}}, "id": 4808, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "4944:32:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "4928:48:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4810, "nodeType": "ExpressionStatement", "src": "4928:48:21"}, {"expression": {"id": 4818, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4811, "name": "premium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4783, "src": "4986:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4817, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"components": [{"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4814, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4812, "name": "usdPremium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4786, "src": "4997:10:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "*", "rightExpression": {"id": 4813, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4763, "src": "5010:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "4997:19:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "id": 4815, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "4996:21:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "/", "rightExpression": {"id": 4816, "name": "currentPrice", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4770, "src": "5020:12:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "4996:36:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "4986:46:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4819, "nodeType": "ExpressionStatement", "src": "4986:46:21"}, {"expression": {"id": 4824, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4820, "name": "total", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4779, "src": "5042:5:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4823, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4821, "name": "settlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4781, "src": "5050:13:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "+", "rightExpression": {"id": 4822, "name": "premium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4783, "src": "5066:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "5050:23:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "5042:31:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4825, "nodeType": "ExpressionStatement", "src": "5042:31:21"}]}, "documentation": {"id": 4759, "nodeType": "StructuredDocumentation", "src": "3520:662:21", "text": " @notice Used for getting the price for Options in USD\n @param period Option period in seconds (1 days <= period <= 4 weeks)\n @param amount Option amount\n @param strike Strike price of the option\n @param optionType Type of the Option\n @param currentPrice Current price of the underlying asset\n @param config The option configuration\n @param pool The pool selling the option\n @return total Total price to be paid in USD\n @return settlementFee Amount to be distributed to the Buffer token holders in USD\n @return premium Amount that covers the price difference in the ITM options in USD"}, "functionSelector": "351f62a0", "id": 4827, "implemented": true, "kind": "function", "modifiers": [], "name": "feesUsd", "nameLocation": "4196:7:21", "nodeType": "FunctionDefinition", "parameters": {"id": 4777, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4761, "mutability": "mutable", "name": "period", "nameLocation": "4221:6:21", "nodeType": "VariableDeclaration", "scope": 4827, "src": "4213:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4760, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4213:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4763, "mutability": "mutable", "name": "amount", "nameLocation": "4245:6:21", "nodeType": "VariableDeclaration", "scope": 4827, "src": "4237:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4762, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4237:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4765, "mutability": "mutable", "name": "strike", "nameLocation": "4269:6:21", "nodeType": "VariableDeclaration", "scope": 4827, "src": "4261:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4764, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4261:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4768, "mutability": "mutable", "name": "optionType", "nameLocation": "4311:10:21", "nodeType": "VariableDeclaration", "scope": 4827, "src": "4285:36:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_enum$_OptionType_$13234", "typeString": "enum IBufferOptions.OptionType"}, "typeName": {"id": 4767, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4766, "name": "IBufferOptions.OptionType", "nodeType": "IdentifierPath", "referencedDeclaration": 13234, "src": "4285:25:21"}, "referencedDeclaration": 13234, "src": "4285:25:21", "typeDescriptions": {"typeIdentifier": "t_enum$_OptionType_$13234", "typeString": "enum IBufferOptions.OptionType"}}, "visibility": "internal"}, {"constant": false, "id": 4770, "mutability": "mutable", "name": "currentPrice", "nameLocation": "4339:12:21", "nodeType": "VariableDeclaration", "scope": 4827, "src": "4331:20:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4769, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4331:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4773, "mutability": "mutable", "name": "config", "nameLocation": "4386:6:21", "nodeType": "VariableDeclaration", "scope": 4827, "src": "4361:31:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6254", "typeString": "contract OptionConfigUnintialized"}, "typeName": {"id": 4772, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4771, "name": "OptionConfigUnintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 6254, "src": "4361:24:21"}, "referencedDeclaration": 6254, "src": "4361:24:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6254", "typeString": "contract OptionConfigUnintialized"}}, "visibility": "internal"}, {"constant": false, "id": 4776, "mutability": "mutable", "name": "pool", "nameLocation": "4431:4:21", "nodeType": "VariableDeclaration", "scope": 4827, "src": "4402:33:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7468", "typeString": "contract BufferEpocPoolV2Unintialized"}, "typeName": {"id": 4775, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4774, "name": "BufferEpocPoolV2Unintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 7468, "src": "4402:28:21"}, "referencedDeclaration": 7468, "src": "4402:28:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7468", "typeString": "contract BufferEpocPoolV2Unintialized"}}, "visibility": "internal"}], "src": "4203:238:21"}, "returnParameters": {"id": 4784, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4779, "mutability": "mutable", "name": "total", "nameLocation": "4508:5:21", "nodeType": "VariableDeclaration", "scope": 4827, "src": "4500:13:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4778, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4500:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4781, "mutability": "mutable", "name": "settlementFee", "nameLocation": "4535:13:21", "nodeType": "VariableDeclaration", "scope": 4827, "src": "4527:21:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4780, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4527:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4783, "mutability": "mutable", "name": "premium", "nameLocation": "4570:7:21", "nodeType": "VariableDeclaration", "scope": 4827, "src": "4562:15:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4782, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4562:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "src": "4486:101:21"}, "scope": 5051, "src": "4187:893:21", "stateMutability": "view", "virtual": false, "visibility": "public"}, {"body": {"id": 4881, "nodeType": "Block", "src": "6223:310:21", "statements": [{"expression": {"id": 4866, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4855, "name": "premium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4853, "src": "6233:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"arguments": [{"id": 4857, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4832, "src": "6267:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4858, "name": "pool", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4846, "src": "6287:4:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7468", "typeString": "contract BufferEpocPoolV2Unintialized"}}, {"id": 4859, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4843, "src": "6305:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6254", "typeString": "contract OptionConfigUnintialized"}}, {"id": 4860, "name": "strike", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4834, "src": "6325:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4861, "name": "period", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4830, "src": "6345:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4862, "name": "currentPrice", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4840, "src": "6365:12:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4863, "name": "isYes", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4836, "src": "6391:5:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}, {"id": 4864, "name": "isAbove", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4838, "src": "6410:7:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7468", "typeString": "contract BufferEpocPoolV2Unintialized"}, {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6254", "typeString": "contract OptionConfigUnintialized"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_bool", "typeString": "bool"}, {"typeIdentifier": "t_bool", "typeString": "bool"}], "id": 4856, "name": "getPremium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5000, "src": "6243:10:21", "typeDescriptions": {"typeIdentifier": "t_function_internal_view$_t_uint256_$_t_contract$_BufferEpocPoolV2Unintialized_$7468_$_t_contract$_OptionConfigUnintialized_$6254_$_t_uint256_$_t_uint256_$_t_uint256_$_t_bool_$_t_bool_$returns$_t_uint256_$", "typeString": "function (uint256,contract BufferEpocPoolV2Unintialized,contract OptionConfigUnintialized,uint256,uint256,uint256,bool,bool) view returns (uint256)"}}, "id": 4865, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "6243:184:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "6233:194:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4867, "nodeType": "ExpressionStatement", "src": "6233:194:21"}, {"expression": {"id": 4873, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4868, "name": "settlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4851, "src": "6437:13:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"arguments": [{"id": 4870, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4832, "src": "6470:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4871, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4843, "src": "6478:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6254", "typeString": "contract OptionConfigUnintialized"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6254", "typeString": "contract OptionConfigUnintialized"}], "id": 4869, "name": "getSettlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4951, "src": "6453:16:21", "typeDescriptions": {"typeIdentifier": "t_function_internal_view$_t_uint256_$_t_contract$_OptionConfigUnintialized_$6254_$returns$_t_uint256_$", "typeString": "function (uint256,contract OptionConfigUnintialized) view returns (uint256)"}}, "id": 4872, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "6453:32:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "6437:48:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4874, "nodeType": "ExpressionStatement", "src": "6437:48:21"}, {"expression": {"id": 4879, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4875, "name": "total", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4849, "src": "6495:5:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4878, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4876, "name": "settlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4851, "src": "6503:13:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "+", "rightExpression": {"id": 4877, "name": "premium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4853, "src": "6519:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "6503:23:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "6495:31:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4880, "nodeType": "ExpressionStatement", "src": "6495:31:21"}]}, "documentation": {"id": 4828, "nodeType": "StructuredDocumentation", "src": "5086:726:21", "text": " @notice Used for getting the price for Binary Options\n @param period Option period in seconds (1 days <= period <= 4 weeks)\n @param amount Option amount\n @param strike Strike price of the option\n @param isYes whether the option isAbove or not\n @param isAbove whether the price will stay above this strike or not\n @param currentPrice Current price of the underlying asset\n @param config The option configuration\n @param pool The pool selling the option\n @return total Total price to be paid\n @return settlementFee Amount to be distributed to the Buffer token holders\n @return premium Amount that covers the price difference in the ITM options"}, "functionSelector": "934ce3d6", "id": 4882, "implemented": true, "kind": "function", "modifiers": [], "name": "feesBinary", "nameLocation": "5826:10:21", "nodeType": "FunctionDefinition", "parameters": {"id": 4847, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4830, "mutability": "mutable", "name": "period", "nameLocation": "5854:6:21", "nodeType": "VariableDeclaration", "scope": 4882, "src": "5846:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4829, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "5846:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4832, "mutability": "mutable", "name": "amount", "nameLocation": "5878:6:21", "nodeType": "VariableDeclaration", "scope": 4882, "src": "5870:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4831, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "5870:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4834, "mutability": "mutable", "name": "strike", "nameLocation": "5902:6:21", "nodeType": "VariableDeclaration", "scope": 4882, "src": "5894:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4833, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "5894:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4836, "mutability": "mutable", "name": "isYes", "nameLocation": "5923:5:21", "nodeType": "VariableDeclaration", "scope": 4882, "src": "5918:10:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}, "typeName": {"id": 4835, "name": "bool", "nodeType": "ElementaryTypeName", "src": "5918:4:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}, "visibility": "internal"}, {"constant": false, "id": 4838, "mutability": "mutable", "name": "isAbove", "nameLocation": "5943:7:21", "nodeType": "VariableDeclaration", "scope": 4882, "src": "5938:12:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}, "typeName": {"id": 4837, "name": "bool", "nodeType": "ElementaryTypeName", "src": "5938:4:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}, "visibility": "internal"}, {"constant": false, "id": 4840, "mutability": "mutable", "name": "currentPrice", "nameLocation": "5968:12:21", "nodeType": "VariableDeclaration", "scope": 4882, "src": "5960:20:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4839, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "5960:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4843, "mutability": "mutable", "name": "config", "nameLocation": "6015:6:21", "nodeType": "VariableDeclaration", "scope": 4882, "src": "5990:31:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6254", "typeString": "contract OptionConfigUnintialized"}, "typeName": {"id": 4842, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4841, "name": "OptionConfigUnintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 6254, "src": "5990:24:21"}, "referencedDeclaration": 6254, "src": "5990:24:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6254", "typeString": "contract OptionConfigUnintialized"}}, "visibility": "internal"}, {"constant": false, "id": 4846, "mutability": "mutable", "name": "pool", "nameLocation": "6060:4:21", "nodeType": "VariableDeclaration", "scope": 4882, "src": "6031:33:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7468", "typeString": "contract BufferEpocPoolV2Unintialized"}, "typeName": {"id": 4845, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4844, "name": "BufferEpocPoolV2Unintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 7468, "src": "6031:28:21"}, "referencedDeclaration": 7468, "src": "6031:28:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7468", "typeString": "contract BufferEpocPoolV2Unintialized"}}, "visibility": "internal"}], "src": "5836:234:21"}, "returnParameters": {"id": 4854, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4849, "mutability": "mutable", "name": "total", "nameLocation": "6139:5:21", "nodeType": "VariableDeclaration", "scope": 4882, "src": "6131:13:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4848, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "6131:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4851, "mutability": "mutable", "name": "settlementFee", "nameLocation": "6166:13:21", "nodeType": "VariableDeclaration", "scope": 4882, "src": "6158:21:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4850, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "6158:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4853, "mutability": "mutable", "name": "premium", "nameLocation": "6201:7:21", "nodeType": "VariableDeclaration", "scope": 4882, "src": "6193:15:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4852, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "6193:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "src": "6117:101:21"}, "scope": 5051, "src": "5817:716:21", "stateMutability": "view", "virtual": false, "visibility": "external"}, {"body": {"id": 4929, "nodeType": "Block", "src": "7428:274:21", "statements": [{"expression": {"id": 4913, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4905, "name": "premium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4903, "src": "7438:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"arguments": [{"id": 4907, "name": "optionDetails", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4886, "src": "7478:13:21", "typeDescriptions": {"typeIdentifier": "t_struct$_OptionDetails_$13298_memory_ptr", "typeString": "struct IBufferOptions.OptionDetails memory"}}, {"id": 4908, "name": "pool", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4896, "src": "7505:4:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7468", "typeString": "contract BufferEpocPoolV2Unintialized"}}, {"id": 4909, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4893, "src": "7523:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6254", "typeString": "contract OptionConfigUnintialized"}}, {"id": 4910, "name": "currentPrice", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4888, "src": "7543:12:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4911, "name": "KPI", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4890, "src": "7569:3:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_struct$_OptionDetails_$13298_memory_ptr", "typeString": "struct IBufferOptions.OptionDetails memory"}, {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7468", "typeString": "contract BufferEpocPoolV2Unintialized"}, {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6254", "typeString": "contract OptionConfigUnintialized"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}], "id": 4906, "name": "getPremiumBinary", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5050, "src": "7448:16:21", "typeDescriptions": {"typeIdentifier": "t_function_internal_view$_t_struct$_OptionDetails_$13298_memory_ptr_$_t_contract$_BufferEpocPoolV2Unintialized_$7468_$_t_contract$_OptionConfigUnintialized_$6254_$_t_uint256_$_t_uint256_$returns$_t_uint256_$", "typeString": "function (struct IBufferOptions.OptionDetails memory,contract BufferEpocPoolV2Unintialized,contract OptionConfigUnintialized,uint256,uint256) view returns (uint256)"}}, "id": 4912, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "7448:134:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "7438:144:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4914, "nodeType": "ExpressionStatement", "src": "7438:144:21"}, {"expression": {"id": 4921, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4915, "name": "settlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4901, "src": "7592:13:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"arguments": [{"expression": {"id": 4917, "name": "optionDetails", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4886, "src": "7625:13:21", "typeDescriptions": {"typeIdentifier": "t_struct$_OptionDetails_$13298_memory_ptr", "typeString": "struct IBufferOptions.OptionDetails memory"}}, "id": 4918, "isConstant": false, "isLValue": true, "isPure": false, "lValueRequested": false, "memberName": "amount", "nodeType": "MemberAccess", "referencedDeclaration": 13291, "src": "7625:20:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4919, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4893, "src": "7647:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6254", "typeString": "contract OptionConfigUnintialized"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6254", "typeString": "contract OptionConfigUnintialized"}], "id": 4916, "name": "getSettlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4951, "src": "7608:16:21", "typeDescriptions": {"typeIdentifier": "t_function_internal_view$_t_uint256_$_t_contract$_OptionConfigUnintialized_$6254_$returns$_t_uint256_$", "typeString": "function (uint256,contract OptionConfigUnintialized) view returns (uint256)"}}, "id": 4920, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "7608:46:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "7592:62:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4922, "nodeType": "ExpressionStatement", "src": "7592:62:21"}, {"expression": {"id": 4927, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4923, "name": "total", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4899, "src": "7664:5:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4926, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4924, "name": "settlementFee", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4901, "src": "7672:13:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "+", "rightExpression": {"id": 4925, "name": "premium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4903, "src": "7688:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "7672:23:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "7664:31:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4928, "nodeType": "ExpressionStatement", "src": "7664:31:21"}]}, "documentation": {"id": 4883, "nodeType": "StructuredDocumentation", "src": "6539:509:21", "text": " @notice Used for getting the price for Binary KPI Options\n @param optionDetails Details of the option to be priced\n @param currentPrice Current price of the tokenX\n @param KPI KPI value for option\n @param config Option config\n @param pool pool contract\n @return total Total price to be paid\n @return settlementFee Amount to be distributed to the Buffer token holders\n @return premium Amount that covers the price difference in the ITM options"}, "functionSelector": "dbfa5dd6", "id": 4930, "implemented": true, "kind": "function", "modifiers": [], "name": "feesKPIBinary", "nameLocation": "7062:13:21", "nodeType": "FunctionDefinition", "parameters": {"id": 4897, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4886, "mutability": "mutable", "name": "optionDetails", "nameLocation": "7121:13:21", "nodeType": "VariableDeclaration", "scope": 4930, "src": "7085:49:21", "stateVariable": false, "storageLocation": "memory", "typeDescriptions": {"typeIdentifier": "t_struct$_OptionDetails_$13298_memory_ptr", "typeString": "struct IBufferOptions.OptionDetails"}, "typeName": {"id": 4885, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4884, "name": "IBufferOptions.OptionDetails", "nodeType": "IdentifierPath", "referencedDeclaration": 13298, "src": "7085:28:21"}, "referencedDeclaration": 13298, "src": "7085:28:21", "typeDescriptions": {"typeIdentifier": "t_struct$_OptionDetails_$13298_storage_ptr", "typeString": "struct IBufferOptions.OptionDetails"}}, "visibility": "internal"}, {"constant": false, "id": 4888, "mutability": "mutable", "name": "currentPrice", "nameLocation": "7152:12:21", "nodeType": "VariableDeclaration", "scope": 4930, "src": "7144:20:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4887, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "7144:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4890, "mutability": "mutable", "name": "KPI", "nameLocation": "7182:3:21", "nodeType": "VariableDeclaration", "scope": 4930, "src": "7174:11:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4889, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "7174:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4893, "mutability": "mutable", "name": "config", "nameLocation": "7220:6:21", "nodeType": "VariableDeclaration", "scope": 4930, "src": "7195:31:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6254", "typeString": "contract OptionConfigUnintialized"}, "typeName": {"id": 4892, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4891, "name": "OptionConfigUnintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 6254, "src": "7195:24:21"}, "referencedDeclaration": 6254, "src": "7195:24:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6254", "typeString": "contract OptionConfigUnintialized"}}, "visibility": "internal"}, {"constant": false, "id": 4896, "mutability": "mutable", "name": "pool", "nameLocation": "7265:4:21", "nodeType": "VariableDeclaration", "scope": 4930, "src": "7236:33:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7468", "typeString": "contract BufferEpocPoolV2Unintialized"}, "typeName": {"id": 4895, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4894, "name": "BufferEpocPoolV2Unintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 7468, "src": "7236:28:21"}, "referencedDeclaration": 7468, "src": "7236:28:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7468", "typeString": "contract BufferEpocPoolV2Unintialized"}}, "visibility": "internal"}], "src": "7075:200:21"}, "returnParameters": {"id": 4904, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4899, "mutability": "mutable", "name": "total", "nameLocation": "7344:5:21", "nodeType": "VariableDeclaration", "scope": 4930, "src": "7336:13:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4898, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "7336:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4901, "mutability": "mutable", "name": "settlementFee", "nameLocation": "7371:13:21", "nodeType": "VariableDeclaration", "scope": 4930, "src": "7363:21:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4900, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "7363:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4903, "mutability": "mutable", "name": "premium", "nameLocation": "7406:7:21", "nodeType": "VariableDeclaration", "scope": 4930, "src": "7398:15:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4902, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "7398:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "src": "7322:101:21"}, "scope": 5051, "src": "7053:649:21", "stateMutability": "view", "virtual": false, "visibility": "external"}, {"body": {"id": 4950, "nodeType": "Block", "src": "7979:73:21", "statements": [{"expression": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4948, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"components": [{"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4945, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4941, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4933, "src": "7997:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "*", "rightExpression": {"arguments": [], "expression": {"argumentTypes": [], "expression": {"id": 4942, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4936, "src": "8006:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6254", "typeString": "contract OptionConfigUnintialized"}}, "id": 4943, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "settlementFeePercentage", "nodeType": "MemberAccess", "referencedDeclaration": 5957, "src": "8006:30:21", "typeDescriptions": {"typeIdentifier": "t_function_external_view$__$returns$_t_uint256_$", "typeString": "function () view external returns (uint256)"}}, "id": 4944, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "8006:32:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "7997:41:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "id": 4946, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "7996:43:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "/", "rightExpression": {"hexValue": "313030", "id": 4947, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "8042:3:21", "typeDescriptions": {"typeIdentifier": "t_rational_100_by_1", "typeString": "int_const 100"}, "value": "100"}, "src": "7996:49:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "functionReturnParameters": 4940, "id": 4949, "nodeType": "Return", "src": "7989:56:21"}]}, "documentation": {"id": 4931, "nodeType": "StructuredDocumentation", "src": "7708:127:21", "text": " @notice Calculates settlementFee\n @param amount Option amount\n @return fee Settlement fee amount"}, "id": 4951, "implemented": true, "kind": "function", "modifiers": [], "name": "getSettlementFee", "nameLocation": "7849:16:21", "nodeType": "FunctionDefinition", "parameters": {"id": 4937, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4933, "mutability": "mutable", "name": "amount", "nameLocation": "7874:6:21", "nodeType": "VariableDeclaration", "scope": 4951, "src": "7866:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4932, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "7866:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4936, "mutability": "mutable", "name": "config", "nameLocation": "7907:6:21", "nodeType": "VariableDeclaration", "scope": 4951, "src": "7882:31:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6254", "typeString": "contract OptionConfigUnintialized"}, "typeName": {"id": 4935, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4934, "name": "OptionConfigUnintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 6254, "src": "7882:24:21"}, "referencedDeclaration": 6254, "src": "7882:24:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6254", "typeString": "contract OptionConfigUnintialized"}}, "visibility": "internal"}], "src": "7865:49:21"}, "returnParameters": {"id": 4940, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4939, "mutability": "mutable", "name": "fee", "nameLocation": "7970:3:21", "nodeType": "VariableDeclaration", "scope": 4951, "src": "7962:11:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4938, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "7962:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "src": "7961:13:21"}, "scope": 5051, "src": "7840:212:21", "stateMutability": "view", "virtual": false, "visibility": "internal"}, {"body": {"id": 4999, "nodeType": "Block", "src": "8352:371:21", "statements": [{"assignments": [4975], "declarations": [{"constant": false, "id": 4975, "mutability": "mutable", "name": "usdPremium", "nameLocation": "8437:10:21", "nodeType": "VariableDeclaration", "scope": 4999, "src": "8429:18:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4974, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "8429:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "id": 4989, "initialValue": {"arguments": [{"arguments": [{"id": 4979, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4953, "src": "8523:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4980, "name": "pool", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4956, "src": "8531:4:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7468", "typeString": "contract BufferEpocPoolV2Unintialized"}}, {"id": 4981, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4959, "src": "8537:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6254", "typeString": "contract OptionConfigUnintialized"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7468", "typeString": "contract BufferEpocPoolV2Unintialized"}, {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6254", "typeString": "contract OptionConfigUnintialized"}], "id": 4978, "name": "currentImpliedVolatility", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4689, "src": "8498:24:21", "typeDescriptions": {"typeIdentifier": "t_function_internal_view$_t_uint256_$_t_contract$_BufferEpocPoolV2Unintialized_$7468_$_t_contract$_OptionConfigUnintialized_$6254_$returns$_t_uint256_$", "typeString": "function (uint256,contract BufferEpocPoolV2Unintialized,contract OptionConfigUnintialized) view returns (uint256)"}}, "id": 4982, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "8498:46:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4983, "name": "strike", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4961, "src": "8558:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4984, "name": "currentPrice", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4965, "src": "8578:12:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4985, "name": "period", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4963, "src": "8604:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 4986, "name": "isYes", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4967, "src": "8624:5:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}, {"id": 4987, "name": "isAbove", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4969, "src": "8643:7:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_bool", "typeString": "bool"}, {"typeIdentifier": "t_bool", "typeString": "bool"}], "expression": {"id": 4976, "name": "OptionMath", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 17013, "src": "8450:10:21", "typeDescriptions": {"typeIdentifier": "t_type$_t_contract$_OptionMath_$17013_$", "typeString": "type(library OptionMath)"}}, "id": 4977, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "blackScholesPriceBinary", "nodeType": "MemberAccess", "referencedDeclaration": 16914, "src": "8450:34:21", "typeDescriptions": {"typeIdentifier": "t_function_delegatecall_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_bool_$_t_bool_$returns$_t_uint256_$", "typeString": "function (uint256,uint256,uint256,uint256,bool,bool) pure returns (uint256)"}}, "id": 4988, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "8450:210:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "VariableDeclarationStatement", "src": "8429:231:21"}, {"expression": {"id": 4997, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 4990, "name": "premium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4972, "src": "8670:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4996, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"components": [{"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 4993, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 4991, "name": "usdPremium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4975, "src": "8681:10:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "*", "rightExpression": {"id": 4992, "name": "amount", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4953, "src": "8694:6:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "8681:19:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "id": 4994, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "8680:21:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "/", "rightExpression": {"id": 4995, "name": "currentPrice", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4965, "src": "8704:12:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "8680:36:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "8670:46:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 4998, "nodeType": "ExpressionStatement", "src": "8670:46:21"}]}, "id": 5000, "implemented": true, "kind": "function", "modifiers": [], "name": "getPremium", "nameLocation": "8067:10:21", "nodeType": "FunctionDefinition", "parameters": {"id": 4970, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4953, "mutability": "mutable", "name": "amount", "nameLocation": "8095:6:21", "nodeType": "VariableDeclaration", "scope": 5000, "src": "8087:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4952, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "8087:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4956, "mutability": "mutable", "name": "pool", "nameLocation": "8140:4:21", "nodeType": "VariableDeclaration", "scope": 5000, "src": "8111:33:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7468", "typeString": "contract BufferEpocPoolV2Unintialized"}, "typeName": {"id": 4955, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4954, "name": "BufferEpocPoolV2Unintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 7468, "src": "8111:28:21"}, "referencedDeclaration": 7468, "src": "8111:28:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7468", "typeString": "contract BufferEpocPoolV2Unintialized"}}, "visibility": "internal"}, {"constant": false, "id": 4959, "mutability": "mutable", "name": "config", "nameLocation": "8179:6:21", "nodeType": "VariableDeclaration", "scope": 5000, "src": "8154:31:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6254", "typeString": "contract OptionConfigUnintialized"}, "typeName": {"id": 4958, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 4957, "name": "OptionConfigUnintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 6254, "src": "8154:24:21"}, "referencedDeclaration": 6254, "src": "8154:24:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6254", "typeString": "contract OptionConfigUnintialized"}}, "visibility": "internal"}, {"constant": false, "id": 4961, "mutability": "mutable", "name": "strike", "nameLocation": "8203:6:21", "nodeType": "VariableDeclaration", "scope": 5000, "src": "8195:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4960, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "8195:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4963, "mutability": "mutable", "name": "period", "nameLocation": "8227:6:21", "nodeType": "VariableDeclaration", "scope": 5000, "src": "8219:14:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4962, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "8219:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4965, "mutability": "mutable", "name": "currentPrice", "nameLocation": "8251:12:21", "nodeType": "VariableDeclaration", "scope": 5000, "src": "8243:20:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4964, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "8243:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 4967, "mutability": "mutable", "name": "isYes", "nameLocation": "8278:5:21", "nodeType": "VariableDeclaration", "scope": 5000, "src": "8273:10:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}, "typeName": {"id": 4966, "name": "bool", "nodeType": "ElementaryTypeName", "src": "8273:4:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}, "visibility": "internal"}, {"constant": false, "id": 4969, "mutability": "mutable", "name": "isAbove", "nameLocation": "8298:7:21", "nodeType": "VariableDeclaration", "scope": 5000, "src": "8293:12:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}, "typeName": {"id": 4968, "name": "bool", "nodeType": "ElementaryTypeName", "src": "8293:4:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}, "visibility": "internal"}], "src": "8077:234:21"}, "returnParameters": {"id": 4973, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 4972, "mutability": "mutable", "name": "premium", "nameLocation": "8343:7:21", "nodeType": "VariableDeclaration", "scope": 5000, "src": "8335:15:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 4971, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "8335:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "src": "8334:17:21"}, "scope": 5051, "src": "8058:665:21", "stateMutability": "view", "virtual": false, "visibility": "internal"}, {"body": {"id": 5049, "nodeType": "Block", "src": "8995:475:21", "statements": [{"assignments": [5019], "declarations": [{"constant": false, "id": 5019, "mutability": "mutable", "name": "usdPremium", "nameLocation": "9109:10:21", "nodeType": "VariableDeclaration", "scope": 5049, "src": "9101:18:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 5018, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "9101:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "id": 5038, "initialValue": {"arguments": [{"arguments": [{"expression": {"id": 5023, "name": "optionDetails", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5003, "src": "9195:13:21", "typeDescriptions": {"typeIdentifier": "t_struct$_OptionDetails_$13298_memory_ptr", "typeString": "struct IBufferOptions.OptionDetails memory"}}, "id": 5024, "isConstant": false, "isLValue": true, "isPure": false, "lValueRequested": false, "memberName": "amount", "nodeType": "MemberAccess", "referencedDeclaration": 13291, "src": "9195:20:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 5025, "name": "pool", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5006, "src": "9217:4:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7468", "typeString": "contract BufferEpocPoolV2Unintialized"}}, {"id": 5026, "name": "config", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5009, "src": "9223:6:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6254", "typeString": "contract OptionConfigUnintialized"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7468", "typeString": "contract BufferEpocPoolV2Unintialized"}, {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6254", "typeString": "contract OptionConfigUnintialized"}], "id": 5022, "name": "currentImpliedVolatility", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 4689, "src": "9170:24:21", "typeDescriptions": {"typeIdentifier": "t_function_internal_view$_t_uint256_$_t_contract$_BufferEpocPoolV2Unintialized_$7468_$_t_contract$_OptionConfigUnintialized_$6254_$returns$_t_uint256_$", "typeString": "function (uint256,contract BufferEpocPoolV2Unintialized,contract OptionConfigUnintialized) view returns (uint256)"}}, "id": 5027, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "9170:60:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"expression": {"id": 5028, "name": "optionDetails", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5003, "src": "9244:13:21", "typeDescriptions": {"typeIdentifier": "t_struct$_OptionDetails_$13298_memory_ptr", "typeString": "struct IBufferOptions.OptionDetails memory"}}, "id": 5029, "isConstant": false, "isLValue": true, "isPure": false, "lValueRequested": false, "memberName": "strike", "nodeType": "MemberAccess", "referencedDeclaration": 13293, "src": "9244:20:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 5030, "name": "KPI", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5013, "src": "9278:3:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"expression": {"id": 5031, "name": "optionDetails", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5003, "src": "9295:13:21", "typeDescriptions": {"typeIdentifier": "t_struct$_OptionDetails_$13298_memory_ptr", "typeString": "struct IBufferOptions.OptionDetails memory"}}, "id": 5032, "isConstant": false, "isLValue": true, "isPure": false, "lValueRequested": false, "memberName": "period", "nodeType": "MemberAccess", "referencedDeclaration": 13289, "src": "9295:20:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"expression": {"id": 5033, "name": "optionDetails", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5003, "src": "9329:13:21", "typeDescriptions": {"typeIdentifier": "t_struct$_OptionDetails_$13298_memory_ptr", "typeString": "struct IBufferOptions.OptionDetails memory"}}, "id": 5034, "isConstant": false, "isLValue": true, "isPure": false, "lValueRequested": false, "memberName": "isYes", "nodeType": "MemberAccess", "referencedDeclaration": 13295, "src": "9329:19:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}, {"expression": {"id": 5035, "name": "optionDetails", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5003, "src": "9362:13:21", "typeDescriptions": {"typeIdentifier": "t_struct$_OptionDetails_$13298_memory_ptr", "typeString": "struct IBufferOptions.OptionDetails memory"}}, "id": 5036, "isConstant": false, "isLValue": true, "isPure": false, "lValueRequested": false, "memberName": "isAbove", "nodeType": "MemberAccess", "referencedDeclaration": 13297, "src": "9362:21:21", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_bool", "typeString": "bool"}, {"typeIdentifier": "t_bool", "typeString": "bool"}], "expression": {"id": 5020, "name": "OptionMath", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 17013, "src": "9122:10:21", "typeDescriptions": {"typeIdentifier": "t_type$_t_contract$_OptionMath_$17013_$", "typeString": "type(library OptionMath)"}}, "id": 5021, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "blackScholesPriceBinary", "nodeType": "MemberAccess", "referencedDeclaration": 16914, "src": "9122:34:21", "typeDescriptions": {"typeIdentifier": "t_function_delegatecall_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_bool_$_t_bool_$returns$_t_uint256_$", "typeString": "function (uint256,uint256,uint256,uint256,bool,bool) pure returns (uint256)"}}, "id": 5037, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "9122:271:21", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "VariableDeclarationStatement", "src": "9101:292:21"}, {"expression": {"id": 5047, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 5039, "name": "premium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5016, "src": "9403:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 5046, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"components": [{"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 5043, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 5040, "name": "usdPremium", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5019, "src": "9414:10:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "*", "rightExpression": {"expression": {"id": 5041, "name": "optionDetails", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5003, "src": "9427:13:21", "typeDescriptions": {"typeIdentifier": "t_struct$_OptionDetails_$13298_memory_ptr", "typeString": "struct IBufferOptions.OptionDetails memory"}}, "id": 5042, "isConstant": false, "isLValue": true, "isPure": false, "lValueRequested": false, "memberName": "amount", "nodeType": "MemberAccess", "referencedDeclaration": 13291, "src": "9427:20:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "9414:33:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "id": 5044, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "9413:35:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "/", "rightExpression": {"id": 5045, "name": "currentPrice", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 5011, "src": "9451:12:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "9413:50:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "9403:60:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 5048, "nodeType": "ExpressionStatement", "src": "9403:60:21"}]}, "id": 5050, "implemented": true, "kind": "function", "modifiers": [], "name": "getPremiumBinary", "nameLocation": "8738:16:21", "nodeType": "FunctionDefinition", "parameters": {"id": 5014, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 5003, "mutability": "mutable", "name": "optionDetails", "nameLocation": "8800:13:21", "nodeType": "VariableDeclaration", "scope": 5050, "src": "8764:49:21", "stateVariable": false, "storageLocation": "memory", "typeDescriptions": {"typeIdentifier": "t_struct$_OptionDetails_$13298_memory_ptr", "typeString": "struct IBufferOptions.OptionDetails"}, "typeName": {"id": 5002, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 5001, "name": "IBufferOptions.OptionDetails", "nodeType": "IdentifierPath", "referencedDeclaration": 13298, "src": "8764:28:21"}, "referencedDeclaration": 13298, "src": "8764:28:21", "typeDescriptions": {"typeIdentifier": "t_struct$_OptionDetails_$13298_storage_ptr", "typeString": "struct IBufferOptions.OptionDetails"}}, "visibility": "internal"}, {"constant": false, "id": 5006, "mutability": "mutable", "name": "pool", "nameLocation": "8852:4:21", "nodeType": "VariableDeclaration", "scope": 5050, "src": "8823:33:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7468", "typeString": "contract BufferEpocPoolV2Unintialized"}, "typeName": {"id": 5005, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 5004, "name": "BufferEpocPoolV2Unintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 7468, "src": "8823:28:21"}, "referencedDeclaration": 7468, "src": "8823:28:21", "typeDescriptions": {"typeIdentifier": "t_contract$_BufferEpocPoolV2Unintialized_$7468", "typeString": "contract BufferEpocPoolV2Unintialized"}}, "visibility": "internal"}, {"constant": false, "id": 5009, "mutability": "mutable", "name": "config", "nameLocation": "8891:6:21", "nodeType": "VariableDeclaration", "scope": 5050, "src": "8866:31:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6254", "typeString": "contract OptionConfigUnintialized"}, "typeName": {"id": 5008, "nodeType": "UserDefinedTypeName", "pathNode": {"id": 5007, "name": "OptionConfigUnintialized", "nodeType": "IdentifierPath", "referencedDeclaration": 6254, "src": "8866:24:21"}, "referencedDeclaration": 6254, "src": "8866:24:21", "typeDescriptions": {"typeIdentifier": "t_contract$_OptionConfigUnintialized_$6254", "typeString": "contract OptionConfigUnintialized"}}, "visibility": "internal"}, {"constant": false, "id": 5011, "mutability": "mutable", "name": "currentPrice", "nameLocation": "8915:12:21", "nodeType": "VariableDeclaration", "scope": 5050, "src": "8907:20:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 5010, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "8907:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 5013, "mutability": "mutable", "name": "KPI", "nameLocation": "8945:3:21", "nodeType": "VariableDeclaration", "scope": 5050, "src": "8937:11:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 5012, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "8937:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "src": "8754:200:21"}, "returnParameters": {"id": 5017, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 5016, "mutability": "mutable", "name": "premium", "nameLocation": "8986:7:21", "nodeType": "VariableDeclaration", "scope": 5050, "src": "8978:15:21", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 5015, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "8978:7:21", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "src": "8977:17:21"}, "scope": 5051, "src": "8729:741:21", "stateMutability": "view", "virtual": false, "visibility": "internal"}], "scope": 5052, "src": "697:8775:21", "usedErrors": []}], "src": "38:9435:21"}, "compiler": {"version": "0.8.4+commit.c7e474f2", "evm_version": "istanbul", "optimizer": {"enabled": true, "runs": 1}}, "contractName": "FeeCalculator", "deployedBytecode": "730000000000000000000000000000000000000000301460806040526004361061006c5760003560e01c8063351f62a0146100715780634fe8c640146100a4578063934ce3d6146100c5578063d69bde77146100d8578063dbfa5dd6146100eb578063fbef1d55146100fe575b600080fd5b61008461007f366004610a1d565b610111565b604080519384526020840192909252908201526060015b60405180910390f35b6100b76100b236600461092d565b610211565b60405190815260200161009b565b6100846100d336600461099d565b61035e565b6100b76100e636600461095c565b61039b565b6100846100f936600461084a565b6104d2565b61008461010c366004610a1d565b61050d565b60008060008073__$21a7d244ba8ae9c6f13b9eaa6b054f8aee$__632c607c3b61013c8c888a61039b565b8b8a8f60028e600281111561016157634e487b7160e01b600052602160045260246000fd5b146040518663ffffffff1660e01b8152600401610182959493929190610a91565b60206040518083038186803b15801561019a57600080fd5b505af41580156101ae573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d29190610915565b90506101de8a876105fd565b9250866101eb8b83610b1a565b6101f59190610afa565b91506102018284610ae2565b9350509750975097945050505050565b600080826001600160a01b031663d9ac10d96040518163ffffffff1660e01b815260040160206040518083038186803b15801561024d57600080fd5b505afa158015610261573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102859190610915565b9050600081116102c05760405162461bcd60e51b815260206004820152600260248201526109e760f31b604482015260640160405180910390fd5b8084846001600160a01b0316636ab28bc86040518163ffffffff1660e01b815260040160206040518083038186803b1580156102fb57600080fd5b505afa15801561030f573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906103339190610915565b61033d9190610ae2565b61034c906402540be400610b1a565b6103569190610afa565b949350505050565b60008060006103738a85878c8f8b8e8e61068d565b905061037f8a866105fd565b915061038b8183610ae2565b9250985098509895505050505050565b6000816001600160a01b03166318f88e5b6040518163ffffffff1660e01b815260040160206040518083038186803b1580156103d657600080fd5b505afa1580156103ea573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061040e9190610915565b9050600061041c8585610211565b905063ee6b28008111156104ca57826001600160a01b0316636c321c8a6040518163ffffffff1660e01b815260040160206040518083038186803b15801561046357600080fd5b505afa158015610477573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061049b9190610915565b6104a963ee6b280083610b39565b6104b39084610b1a565b6104bd9190610afa565b6104c79083610ae2565b91505b509392505050565b60008060006104e48885878a8a610750565b90506104f48860200151866105fd565b91506105008183610ae2565b9250955095509592505050565b60008060008073__$21a7d244ba8ae9c6f13b9eaa6b054f8aee$__632c607c3b6105388c888a61039b565b8b8a8f60028e600281111561055d57634e487b7160e01b600052602160045260246000fd5b146040518663ffffffff1660e01b815260040161057e959493929190610a91565b60206040518083038186803b15801561059657600080fd5b505af41580156105aa573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906105ce9190610915565b9050866105db8b83610b1a565b6105e59190610afa565b91506105f18a876105fd565b92506102018284610ae2565b60006064826001600160a01b031663f3fa34956040518163ffffffff1660e01b815260040160206040518083038186803b15801561063a57600080fd5b505afa15801561064e573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906106729190610915565b61067c9085610b1a565b6106869190610afa565b9392505050565b60008073__$21a7d244ba8ae9c6f13b9eaa6b054f8aee$__63d573d6156106b58c8c8c61039b565b89888a89896040518763ffffffff1660e01b81526004016106db96959493929190610ab6565b60206040518083038186803b1580156106f357600080fd5b505af4158015610707573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061072b9190610915565b9050846107388b83610b1a565b6107429190610afa565b9a9950505050505050505050565b60008073__$21a7d244ba8ae9c6f13b9eaa6b054f8aee$__63d573d61561077c8960200151898961039b565b6040808b01518b5160608d015160808e015193516001600160e01b031960e088901b1681526107b295948b939291600401610ab6565b60206040518083038186803b1580156107ca57600080fd5b505af41580156107de573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108029190610915565b9050838760200151826108159190610b1a565b61081f9190610afa565b979650505050505050565b8035801515811461083a57600080fd5b919050565b803561083a81610b66565b6000806000806000858703610120811215610863578182fd5b60a0811215610870578182fd5b5060405160a081016001600160401b038111828210171561089f57634e487b7160e01b83526041600452602483fd5b80604052508635815260208701356020820152604087013560408201526108c86060880161082a565b60608201526108d96080880161082a565b6080820152945060a0860135935060c086013592506108fa60e0870161083f565b9150610909610100870161083f565b90509295509295909350565b600060208284031215610926578081fd5b5051919050565b6000806040838503121561093f578182fd5b82359150602083013561095181610b66565b809150509250929050565b600080600060608486031215610970578283fd5b83359250602084013561098281610b66565b9150604084013561099281610b66565b809150509250925092565b600080600080600080600080610100898b0312156109b9578283fd5b8835975060208901359650604089013595506109d760608a0161082a565b94506109e560808a0161082a565b935060a0890135925060c08901356109fc81610b66565b915060e0890135610a0c81610b66565b809150509295985092959890939650565b600080600080600080600060e0888a031215610a37578283fd5b873596506020880135955060408801359450606088013560038110610a5a578384fd5b93506080880135925060a0880135610a7181610b66565b915060c0880135610a8181610b66565b8091505092959891949750929550565b9485526020850193909352604084019190915260608301521515608082015260a00190565b95865260208601949094526040850192909252606084015215156080830152151560a082015260c00190565b60008219821115610af557610af5610b50565b500190565b600082610b1557634e487b7160e01b81526012600452602481fd5b500490565b6000816000190483118215151615610b3457610b34610b50565b500290565b600082821015610b4b57610b4b610b50565b500390565b634e487b7160e01b600052601160045260246000fd5b6001600160a01b0381168114610b7b57600080fd5b5056fea264697066735822122004a02867ff727e25093a9a010a5f1634f310210a5cfa62e03390f398932e164f64736f6c63430008040033", "deployedSourceMap": "697:8775:21:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;4187:893;;;;;;:::i;:::-;;:::i;:::-;;;;5570:25:32;;;5626:2;5611:18;;5604:34;;;;5654:18;;;5647:34;5558:2;5543:18;4187:893:21;;;;;;;;919:325;;;;;;:::i;:::-;;:::i;:::-;;;5324:25:32;;;5312:2;5297:18;919:325:21;5279:76:32;5817:716:21;;;;;;:::i;:::-;;:::i;1568:407::-;;;;;;:::i;:::-;;:::i;7053:649::-;;;;;;:::i;:::-;;:::i;2630:884::-;;;;;;:::i;:::-;;:::i;4187:893::-;4500:13;4527:21;4562:15;4675:18;4696:10;:28;4738:46;4763:6;4771:4;4777:6;4738:24;:46::i;:::-;4798:6;4818:12;4844:6;4878:30;4864:10;:44;;;;;;-1:-1:-1;;;4864:44:21;;;;;;;;;;4696:222;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;4675:243;;4944:32;4961:6;4969;4944:16;:32::i;:::-;4928:48;-1:-1:-1;5020:12:21;4997:19;5010:6;4997:10;:19;:::i;:::-;4996:36;;;;:::i;:::-;4986:46;-1:-1:-1;5050:23:21;4986:46;5050:13;:23;:::i;:::-;5042:31;;4187:893;;;;;;;;;;;;:::o;919:325::-;1040:19;1071;1093:4;-1:-1:-1;;;;;1093:23:21;;:25;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;1071:47;;1150:1;1136:11;:15;1128:30;;;;-1:-1:-1;;;1128:30:21;;5042:2:32;1128:30:21;;;5024:21:32;5081:1;5061:18;;;5054:29;-1:-1:-1;;;5099:18:32;;;5092:32;5141:18;;1128:30:21;;;;;;;;1226:11;1207:6;1185:4;-1:-1:-1;;;;;1185:17:21;;:19;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;:28;;;;:::i;:::-;1184:38;;1217:5;1184:38;:::i;:::-;1183:54;;;;:::i;:::-;1169:68;919:325;-1:-1:-1;;;;919:325:21:o;5817:716::-;6131:13;6158:21;6193:15;6243:184;6267:6;6287:4;6305:6;6325;6345;6365:12;6391:5;6410:7;6243:10;:184::i;:::-;6233:194;;6453:32;6470:6;6478;6453:16;:32::i;:::-;6437:48;-1:-1:-1;6503:23:21;6519:7;6437:48;6503:23;:::i;:::-;6495:31;;5817:716;;;;;;;;;;;;:::o;1568:407::-;1737:10;1764:6;-1:-1:-1;;;;;1764:21:21;;:23;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;1759:28;;1797:19;1819:31;1837:6;1845:4;1819:17;:31::i;:::-;1797:53;;1878:4;1864:11;:18;1860:109;;;1934:6;-1:-1:-1;;;;;1934:22:21;;:24;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;1911:18;1925:4;1911:11;:18;:::i;:::-;1905:25;;:2;:25;:::i;:::-;1904:54;;;;:::i;:::-;1898:60;;;;:::i;:::-;;;1860:109;1568:407;;;;;;:::o;7053:649::-;7336:13;7363:21;7398:15;7448:134;7478:13;7505:4;7523:6;7543:12;7569:3;7448:16;:134::i;:::-;7438:144;;7608:46;7625:13;:20;;;7647:6;7608:16;:46::i;:::-;7592:62;-1:-1:-1;7672:23:21;7688:7;7592:62;7672:23;:::i;:::-;7664:31;;7053:649;;;;;;;;;:::o;2630:884::-;2940:13;2967:21;3002:15;3109:18;3130:10;:28;3172:46;3197:6;3205:4;3211:6;3172:24;:46::i;:::-;3232:6;3252:12;3278:6;3312:30;3298:10;:44;;;;;;-1:-1:-1;;;3298:44:21;;;;;;;;;;3130:222;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;3109:243;-1:-1:-1;3396:12:21;3373:19;3386:6;3109:243;3373:19;:::i;:::-;3372:36;;;;:::i;:::-;3362:46;;3434:32;3451:6;3459;3434:16;:32::i;:::-;3418:48;-1:-1:-1;3484:23:21;3500:7;3418:48;3484:23;:::i;7840:212::-;7962:11;8042:3;8006:6;-1:-1:-1;;;;;8006:30:21;;:32;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;7997:41;;:6;:41;:::i;:::-;7996:49;;;;:::i;:::-;7989:56;7840:212;-1:-1:-1;;;7840:212:21:o;8058:665::-;8335:15;8429:18;8450:10;:34;8498:46;8523:6;8531:4;8537:6;8498:24;:46::i;:::-;8558:6;8578:12;8604:6;8624:5;8643:7;8450:210;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;8429:231;-1:-1:-1;8704:12:21;8681:19;8694:6;8429:231;8681:19;:::i;:::-;8680:36;;;;:::i;:::-;8670:46;8058:665;-1:-1:-1;;;;;;;;;;8058:665:21:o;8729:741::-;8978:15;9101:18;9122:10;:34;9170:60;9195:13;:20;;;9217:4;9223:6;9170:24;:60::i;:::-;9244:20;;;;;9295;;9329:19;;;;9362:21;;;;9122:271;;-1:-1:-1;;;;;;9122:271:21;;;;;;;;;;9278:3;;9295:20;9329:19;9122:271;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;9101:292;;9451:12;9427:13;:20;;;9414:10;:33;;;;:::i;:::-;9413:50;;;;:::i;:::-;9403:60;8729:741;-1:-1:-1;;;;;;;8729:741:21:o;14:160:32:-;79:20;;135:13;;128:21;118:32;;108:2;;164:1;161;154:12;108:2;60:114;;;:::o;179:194::-;277:20;;306:61;277:20;306:61;:::i;378:1329::-;575:6;583;591;599;607;651:9;642:7;638:23;681:3;677:2;673:12;670:2;;;703:6;695;688:22;670:2;732:4;728:2;724:13;721:2;;;755:6;747;740:22;721:2;-1:-1:-1;793:2:32;787:9;835:4;823:17;;-1:-1:-1;;;;;855:34:32;;891:22;;;852:62;849:2;;;-1:-1:-1;;;937:36:32;;996:4;993:1;986:15;1029:4;944:6;1014:20;849:2;1064:10;1060:2;1053:22;;1112:9;1099:23;1091:6;1084:39;1184:2;1173:9;1169:18;1156:32;1151:2;1143:6;1139:15;1132:57;1250:2;1239:9;1235:18;1222:32;1217:2;1209:6;1205:15;1198:57;1288:35;1319:2;1308:9;1304:18;1288:35;:::i;:::-;1283:2;1275:6;1271:15;1264:60;1358:36;1389:3;1378:9;1374:19;1358:36;:::i;:::-;1352:3;1340:16;;1333:62;1344:6;-1:-1:-1;1467:4:32;1452:20;;1439:34;;-1:-1:-1;1520:3:32;1505:19;;1492:33;;-1:-1:-1;1544:69:32;1608:3;1593:19;;1544:69;:::i;:::-;1534:79;;1632:69;1696:3;1685:9;1681:19;1632:69;:::i;:::-;1622:79;;618:1089;;;;;;;;:::o;1712:194::-;1782:6;1835:2;1823:9;1814:7;1810:23;1806:32;1803:2;;;1856:6;1848;1841:22;1803:2;-1:-1:-1;1884:16:32;;1793:113;-1:-1:-1;1793:113:32:o;1911:392::-;2016:6;2024;2077:2;2065:9;2056:7;2052:23;2048:32;2045:2;;;2098:6;2090;2083:22;2045:2;2139:9;2126:23;2116:33;;2199:2;2188:9;2184:18;2171:32;2212:61;2267:5;2212:61;:::i;:::-;2292:5;2282:15;;;2035:268;;;;;:::o;2308:596::-;2455:6;2463;2471;2524:2;2512:9;2503:7;2499:23;2495:32;2492:2;;;2545:6;2537;2530:22;2492:2;2586:9;2573:23;2563:33;;2646:2;2635:9;2631:18;2618:32;2659:61;2714:5;2659:61;:::i;:::-;2739:5;-1:-1:-1;2796:2:32;2781:18;;2768:32;2809:63;2768:32;2809:63;:::i;:::-;2891:7;2881:17;;;2482:422;;;;;:::o;2909:941::-;3095:6;3103;3111;3119;3127;3135;3143;3151;3204:3;3192:9;3183:7;3179:23;3175:33;3172:2;;;3226:6;3218;3211:22;3172:2;3267:9;3254:23;3244:33;;3324:2;3313:9;3309:18;3296:32;3286:42;;3375:2;3364:9;3360:18;3347:32;3337:42;;3398:35;3429:2;3418:9;3414:18;3398:35;:::i;:::-;3388:45;;3452:36;3483:3;3472:9;3468:19;3452:36;:::i;:::-;3442:46;;3535:3;3524:9;3520:19;3507:33;3497:43;;3590:3;3579:9;3575:19;3562:33;3604:61;3659:5;3604:61;:::i;:::-;3684:5;-1:-1:-1;3741:3:32;3726:19;;3713:33;3755:63;3713:33;3755:63;:::i;:::-;3837:7;3827:17;;;3162:688;;;;;;;;;;;:::o;3855:980::-;4054:6;4062;4070;4078;4086;4094;4102;4155:3;4143:9;4134:7;4130:23;4126:33;4123:2;;;4177:6;4169;4162:22;4123:2;4218:9;4205:23;4195:33;;4275:2;4264:9;4260:18;4247:32;4237:42;;4326:2;4315:9;4311:18;4298:32;4288:42;;4380:2;4369:9;4365:18;4352:32;4413:1;4406:5;4403:12;4393:2;;4434:6;4426;4419:22;4393:2;4462:5;-1:-1:-1;4514:3:32;4499:19;;4486:33;;-1:-1:-1;4571:3:32;4556:19;;4543:33;4585:63;4543:33;4585:63;:::i;:::-;4667:7;-1:-1:-1;4726:3:32;4711:19;;4698:33;4740:63;4698:33;4740:63;:::i;:::-;4822:7;4812:17;;;4113:722;;;;;;;;;;:::o;5692:481::-;5953:25;;;6009:2;5994:18;;5987:34;;;;6052:2;6037:18;;6030:34;;;;6095:2;6080:18;;6073:34;6151:14;6144:22;6138:3;6123:19;;6116:51;5940:3;5925:19;;5907:266::o;6178:563::-;6461:25;;;6517:2;6502:18;;6495:34;;;;6560:2;6545:18;;6538:34;;;;6603:2;6588:18;;6581:34;6659:14;6652:22;6646:3;6631:19;;6624:51;6719:14;6712:22;6706:3;6691:19;;6684:51;6448:3;6433:19;;6415:326::o;6746:128::-;6786:3;6817:1;6813:6;6810:1;6807:13;6804:2;;;6823:18;;:::i;:::-;-1:-1:-1;6859:9:32;;6794:80::o;6879:217::-;6919:1;6945;6935:2;;-1:-1:-1;;;6970:31:32;;7024:4;7021:1;7014:15;7052:4;6977:1;7042:15;6935:2;-1:-1:-1;7081:9:32;;6925:171::o;7101:168::-;7141:7;7207:1;7203;7199:6;7195:14;7192:1;7189:21;7184:1;7177:9;7170:17;7166:45;7163:2;;;7214:18;;:::i;:::-;-1:-1:-1;7254:9:32;;7153:116::o;7274:125::-;7314:4;7342:1;7339;7336:8;7333:2;;;7347:18;;:::i;:::-;-1:-1:-1;7384:9:32;;7323:76::o;7404:127::-;7465:10;7460:3;7456:20;7453:1;7446:31;7496:4;7493:1;7486:15;7520:4;7517:1;7510:15;7536:161;-1:-1:-1;;;;;7641:31:32;;7631:42;;7621:2;;7687:1;7684;7677:12;7621:2;7611:86;:::o", "language": "Solidity", "natspec": {"methods": {"currentImpliedVolatility(uint256,BufferEpocPoolV2Unintialized,OptionConfigUnintialized)": {"notice": "Calculate the Utilisation adjusted ImpliedVol for the pool according to https://www.desmos.com/calculator/xdmhn97opd", "params": {"amount": "Option amount", "config": "The option configuration", "pool": "The pool selling the option"}, "returns": {"iv": "The adjusted ImpliedVol"}}, "fees(uint256,uint256,uint256,IBufferOptions.OptionType,uint256,OptionConfigUnintialized,BufferEpocPoolV2Unintialized)": {"notice": "Used for getting the price for Options in tokenX", "params": {"amount": "Option amount", "config": "The option configuration", "currentPrice": "Current price of the underlying asset", "optionType": "Type of the Option", "period": "Option period in seconds (1 days <= period <= 4 weeks)", "pool": "The pool selling the option", "strike": "Strike price of the option"}, "returns": {"premium": "Amount that covers the price difference in the ITM options", "settlementFee": "Amount to be distributed to the Buffer token holders", "total": "Total price to be paid"}}, "feesBinary(uint256,uint256,uint256,bool,bool,uint256,OptionConfigUnintialized,BufferEpocPoolV2Unintialized)": {"notice": "Used for getting the price for Binary Options", "params": {"amount": "Option amount", "config": "The option configuration", "currentPrice": "Current price of the underlying asset", "isAbove": "whether the price will stay above this strike or not", "isYes": "whether the option isAbove or not", "period": "Option period in seconds (1 days <= period <= 4 weeks)", "pool": "The pool selling the option", "strike": "Strike price of the option"}, "returns": {"premium": "Amount that covers the price difference in the ITM options", "settlementFee": "Amount to be distributed to the Buffer token holders", "total": "Total price to be paid"}}, "feesKPIBinary(IBufferOptions.OptionDetails,uint256,uint256,OptionConfigUnintialized,BufferEpocPoolV2Unintialized)": {"notice": "Used for getting the price for Binary KPI Options", "params": {"KPI": "KPI value for option", "config": "Option config", "currentPrice": "Current price of the tokenX", "optionDetails": "Details of the option to be priced", "pool": "pool contract"}, "returns": {"premium": "Amount that covers the price difference in the ITM options", "settlementFee": "Amount to be distributed to the Buffer token holders", "total": "Total price to be paid"}}, "feesUsd(uint256,uint256,uint256,IBufferOptions.OptionType,uint256,OptionConfigUnintialized,BufferEpocPoolV2Unintialized)": {"notice": "Used for getting the price for Options in USD", "params": {"amount": "Option amount", "config": "The option configuration", "currentPrice": "Current price of the underlying asset", "optionType": "Type of the Option", "period": "Option period in seconds (1 days <= period <= 4 weeks)", "pool": "The pool selling the option", "strike": "Strike price of the option"}, "returns": {"premium": "Amount that covers the price difference in the ITM options in USD", "settlementFee": "Amount to be distributed to the Buffer token holders in USD", "total": "Total price to be paid in USD"}}, "getNewUtilisation(uint256,BufferEpocPoolV2Unintialized)": {"notice": "Calculate the current Utilisation", "params": {"amount": "Option amount", "pool": "The pool selling the option"}, "returns": {"utilization": "Current utilization"}}}, "kind": "dev", "version": 1}, "opcodes": "PUSH20 0x0 ADDRESS EQ PUSH1 0x80 PUSH1 0x40 MSTORE PUSH1 0x4 CALLDATASIZE LT PUSH2 0x6C JUMPI PUSH1 0x0 CALLDATALOAD PUSH1 0xE0 SHR DUP1 PUSH4 0x351F62A0 EQ PUSH2 0x71 JUMPI DUP1 PUSH4 0x4FE8C640 EQ PUSH2 0xA4 JUMPI DUP1 PUSH4 0x934CE3D6 EQ PUSH2 0xC5 JUMPI DUP1 PUSH4 0xD69BDE77 EQ PUSH2 0xD8 JUMPI DUP1 PUSH4 0xDBFA5DD6 EQ PUSH2 0xEB JUMPI DUP1 PUSH4 0xFBEF1D55 EQ PUSH2 0xFE JUMPI JUMPDEST PUSH1 0x0 DUP1 REVERT JUMPDEST PUSH2 0x84 PUSH2 0x7F CALLDATASIZE PUSH1 0x4 PUSH2 0xA1D JUMP JUMPDEST PUSH2 0x111 JUMP JUMPDEST PUSH1 0x40 DUP1 MLOAD SWAP4 DUP5 MSTORE PUSH1 0x20 DUP5 ADD SWAP3 SWAP1 SWAP3 MSTORE SWAP1 DUP3 ADD MSTORE PUSH1 0x60 ADD JUMPDEST PUSH1 0x40 MLOAD DUP1 SWAP2 SUB SWAP1 RETURN JUMPDEST PUSH2 0xB7 PUSH2 0xB2 CALLDATASIZE PUSH1 0x4 PUSH2 0x92D JUMP JUMPDEST PUSH2 0x211 JUMP JUMPDEST PUSH1 0x40 MLOAD SWAP1 DUP2 MSTORE PUSH1 0x20 ADD PUSH2 0x9B JUMP JUMPDEST PUSH2 0x84 PUSH2 0xD3 CALLDATASIZE PUSH1 0x4 PUSH2 0x99D JUMP JUMPDEST PUSH2 0x35E JUMP JUMPDEST PUSH2 0xB7 PUSH2 0xE6 CALLDATASIZE PUSH1 0x4 PUSH2 0x95C JUMP JUMPDEST PUSH2 0x39B JUMP JUMPDEST PUSH2 0x84 PUSH2 0xF9 CALLDATASIZE PUSH1 0x4 PUSH2 0x84A JUMP JUMPDEST PUSH2 0x4D2 JUMP JUMPDEST PUSH2 0x84 PUSH2 0x10C CALLDATASIZE PUSH1 0x4 PUSH2 0xA1D JUMP JUMPDEST PUSH2 0x50D JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH1 0x0 DUP1 PUSH20 0x0 PUSH4 0x2C607C3B PUSH2 0x13C DUP13 DUP9 DUP11 PUSH2 0x39B JUMP JUMPDEST DUP12 DUP11 DUP16 PUSH1 0x2 DUP15 PUSH1 0x2 DUP2 GT ISZERO PUSH2 0x161 JUMPI PUSH4 0x4E487B71 PUSH1 0xE0 SHL PUSH1 0x0 MSTORE PUSH1 0x21 PUSH1 0x4 MSTORE PUSH1 0x24 PUSH1 0x0 REVERT JUMPDEST EQ PUSH1 0x40 MLOAD DUP7 PUSH4 0xFFFFFFFF AND PUSH1 0xE0 SHL DUP2 MSTORE PUSH1 0x4 ADD PUSH2 0x182 SWAP6 SWAP5 SWAP4 SWAP3 SWAP2 SWAP1 PUSH2 0xA91 JUMP JUMPDEST PUSH1 0x20 PUSH1 0x40 MLOAD DUP1 DUP4 SUB DUP2 DUP7 DUP1 EXTCODESIZE ISZERO DUP1 ISZERO PUSH2 0x19A JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP GAS DELEGATECALL ISZERO DUP1 ISZERO PUSH2 0x1AE JUMPI RETURNDATASIZE PUSH1 0x0 DUP1 RETURNDATACOPY RETURNDATASIZE PUSH1 0x0 REVERT JUMPDEST POP POP POP POP PUSH1 0x40 MLOAD RETURNDATASIZE PUSH1 0x1F NOT PUSH1 0x1F DUP3 ADD AND DUP3 ADD DUP1 PUSH1 0x40 MSTORE POP DUP2 ADD SWAP1 PUSH2 0x1D2 SWAP2 SWAP1 PUSH2 0x915 JUMP JUMPDEST SWAP1 POP PUSH2 0x1DE DUP11 DUP8 PUSH2 0x5FD JUMP JUMPDEST SWAP3 POP DUP7 PUSH2 0x1EB DUP12 DUP4 PUSH2 0xB1A JUMP JUMPDEST PUSH2 0x1F5 SWAP2 SWAP1 PUSH2 0xAFA JUMP JUMPDEST SWAP2 POP PUSH2 0x201 DUP3 DUP5 PUSH2 0xAE2 JUMP JUMPDEST SWAP4 POP POP SWAP8 POP SWAP8 POP SWAP8 SWAP5 POP POP POP POP POP JUMP JUMPDEST PUSH1 0x0 DUP1 DUP3 PUSH1 0x1 PUSH1 0x1 PUSH1 0xA0 SHL SUB AND PUSH4 0xD9AC10D9 PUSH1 0x40 MLOAD DUP2 PUSH4 0xFFFFFFFF AND PUSH1 0xE0 SHL DUP2 MSTORE PUSH1 0x4 ADD PUSH1 0x20 PUSH1 0x40 MLOAD DUP1 DUP4 SUB DUP2 DUP7 DUP1 EXTCODESIZE ISZERO DUP1 ISZERO PUSH2 0x24D JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP GAS STATICCALL ISZERO DUP1 ISZERO PUSH2 0x261 JUMPI RETURNDATASIZE PUSH1 0x0 DUP1 RETURNDATACOPY RETURNDATASIZE PUSH1 0x0 REVERT JUMPDEST POP POP POP POP PUSH1 0x40 MLOAD RETURNDATASIZE PUSH1 0x1F NOT PUSH1 0x1F DUP3 ADD AND DUP3 ADD DUP1 PUSH1 0x40 MSTORE POP DUP2 ADD SWAP1 PUSH2 0x285 SWAP2 SWAP1 PUSH2 0x915 JUMP JUMPDEST SWAP1 POP PUSH1 0x0 DUP2 GT PUSH2 0x2C0 JUMPI PUSH1 0x40 MLOAD PUSH3 0x461BCD PUSH1 0xE5 SHL DUP2 MSTORE PUSH1 0x20 PUSH1 0x4 DUP3 ADD MSTORE PUSH1 0x2 PUSH1 0x24 DUP3 ADD MSTORE PUSH2 0x9E7 PUSH1 0xF3 SHL PUSH1 0x44 DUP3 ADD MSTORE PUSH1 0x64 ADD PUSH1 0x40 MLOAD DUP1 SWAP2 SUB SWAP1 REVERT JUMPDEST DUP1 DUP5 DUP5 PUSH1 0x1 PUSH1 0x1 PUSH1 0xA0 SHL SUB AND PUSH4 0x6AB28BC8 PUSH1 0x40 MLOAD DUP2 PUSH4 0xFFFFFFFF AND PUSH1 0xE0 SHL DUP2 MSTORE PUSH1 0x4 ADD PUSH1 0x20 PUSH1 0x40 MLOAD DUP1 DUP4 SUB DUP2 DUP7 DUP1 EXTCODESIZE ISZERO DUP1 ISZERO PUSH2 0x2FB JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP GAS STATICCALL ISZERO DUP1 ISZERO PUSH2 0x30F JUMPI RETURNDATASIZE PUSH1 0x0 DUP1 RETURNDATACOPY RETURNDATASIZE PUSH1 0x0 REVERT JUMPDEST POP POP POP POP PUSH1 0x40 MLOAD RETURNDATASIZE PUSH1 0x1F NOT PUSH1 0x1F DUP3 ADD AND DUP3 ADD DUP1 PUSH1 0x40 MSTORE POP DUP2 ADD SWAP1 PUSH2 0x333 SWAP2 SWAP1 PUSH2 0x915 JUMP JUMPDEST PUSH2 0x33D SWAP2 SWAP1 PUSH2 0xAE2 JUMP JUMPDEST PUSH2 0x34C SWAP1 PUSH5 0x2540BE400 PUSH2 0xB1A JUMP JUMPDEST PUSH2 0x356 SWAP2 SWAP1 PUSH2 0xAFA JUMP JUMPDEST SWAP5 SWAP4 POP POP POP POP JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH1 0x0 PUSH2 0x373 DUP11 DUP6 DUP8 DUP13 DUP16 DUP12 DUP15 DUP15 PUSH2 0x68D JUMP JUMPDEST SWAP1 POP PUSH2 0x37F DUP11 DUP7 PUSH2 0x5FD JUMP JUMPDEST SWAP2 POP PUSH2 0x38B DUP2 DUP4 PUSH2 0xAE2 JUMP JUMPDEST SWAP3 POP SWAP9 POP SWAP9 POP SWAP9 SWAP6 POP POP POP POP POP POP JUMP JUMPDEST PUSH1 0x0 DUP2 PUSH1 0x1 PUSH1 0x1 PUSH1 0xA0 SHL SUB AND PUSH4 0x18F88E5B PUSH1 0x40 MLOAD DUP2 PUSH4 0xFFFFFFFF AND PUSH1 0xE0 SHL DUP2 MSTORE PUSH1 0x4 ADD PUSH1 0x20 PUSH1 0x40 MLOAD DUP1 DUP4 SUB DUP2 DUP7 DUP1 EXTCODESIZE ISZERO DUP1 ISZERO PUSH2 0x3D6 JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP GAS STATICCALL ISZERO DUP1 ISZERO PUSH2 0x3EA JUMPI RETURNDATASIZE PUSH1 0x0 DUP1 RETURNDATACOPY RETURNDATASIZE PUSH1 0x0 REVERT JUMPDEST POP POP POP POP PUSH1 0x40 MLOAD RETURNDATASIZE PUSH1 0x1F NOT PUSH1 0x1F DUP3 ADD AND DUP3 ADD DUP1 PUSH1 0x40 MSTORE POP DUP2 ADD SWAP1 PUSH2 0x40E SWAP2 SWAP1 PUSH2 0x915 JUMP JUMPDEST SWAP1 POP PUSH1 0x0 PUSH2 0x41C DUP6 DUP6 PUSH2 0x211 JUMP JUMPDEST SWAP1 POP PUSH4 0xEE6B2800 DUP2 GT ISZERO PUSH2 0x4CA JUMPI DUP3 PUSH1 0x1 PUSH1 0x1 PUSH1 0xA0 SHL SUB AND PUSH4 0x6C321C8A PUSH1 0x40 MLOAD DUP2 PUSH4 0xFFFFFFFF AND PUSH1 0xE0 SHL DUP2 MSTORE PUSH1 0x4 ADD PUSH1 0x20 PUSH1 0x40 MLOAD DUP1 DUP4 SUB DUP2 DUP7 DUP1 EXTCODESIZE ISZERO DUP1 ISZERO PUSH2 0x463 JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP GAS STATICCALL ISZERO DUP1 ISZERO PUSH2 0x477 JUMPI RETURNDATASIZE PUSH1 0x0 DUP1 RETURNDATACOPY RETURNDATASIZE PUSH1 0x0 REVERT JUMPDEST POP POP POP POP PUSH1 0x40 MLOAD RETURNDATASIZE PUSH1 0x1F NOT PUSH1 0x1F DUP3 ADD AND DUP3 ADD DUP1 PUSH1 0x40 MSTORE POP DUP2 ADD SWAP1 PUSH2 0x49B SWAP2 SWAP1 PUSH2 0x915 JUMP JUMPDEST PUSH2 0x4A9 PUSH4 0xEE6B2800 DUP4 PUSH2 0xB39 JUMP JUMPDEST PUSH2 0x4B3 SWAP1 DUP5 PUSH2 0xB1A JUMP JUMPDEST PUSH2 0x4BD SWAP2 SWAP1 PUSH2 0xAFA JUMP JUMPDEST PUSH2 0x4C7 SWAP1 DUP4 PUSH2 0xAE2 JUMP JUMPDEST SWAP2 POP JUMPDEST POP SWAP4 SWAP3 POP POP POP JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH1 0x0 PUSH2 0x4E4 DUP9 DUP6 DUP8 DUP11 DUP11 PUSH2 0x750 JUMP JUMPDEST SWAP1 POP PUSH2 0x4F4 DUP9 PUSH1 0x20 ADD MLOAD DUP7 PUSH2 0x5FD JUMP JUMPDEST SWAP2 POP PUSH2 0x500 DUP2 DUP4 PUSH2 0xAE2 JUMP JUMPDEST SWAP3 POP SWAP6 POP SWAP6 POP SWAP6 SWAP3 POP POP POP JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH1 0x0 DUP1 PUSH20 0x0 PUSH4 0x2C607C3B PUSH2 0x538 DUP13 DUP9 DUP11 PUSH2 0x39B JUMP JUMPDEST DUP12 DUP11 DUP16 PUSH1 0x2 DUP15 PUSH1 0x2 DUP2 GT ISZERO PUSH2 0x55D JUMPI PUSH4 0x4E487B71 PUSH1 0xE0 SHL PUSH1 0x0 MSTORE PUSH1 0x21 PUSH1 0x4 MSTORE PUSH1 0x24 PUSH1 0x0 REVERT JUMPDEST EQ PUSH1 0x40 MLOAD DUP7 PUSH4 0xFFFFFFFF AND PUSH1 0xE0 SHL DUP2 MSTORE PUSH1 0x4 ADD PUSH2 0x57E SWAP6 SWAP5 SWAP4 SWAP3 SWAP2 SWAP1 PUSH2 0xA91 JUMP JUMPDEST PUSH1 0x20 PUSH1 0x40 MLOAD DUP1 DUP4 SUB DUP2 DUP7 DUP1 EXTCODESIZE ISZERO DUP1 ISZERO PUSH2 0x596 JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP GAS DELEGATECALL ISZERO DUP1 ISZERO PUSH2 0x5AA JUMPI RETURNDATASIZE PUSH1 0x0 DUP1 RETURNDATACOPY RETURNDATASIZE PUSH1 0x0 REVERT JUMPDEST POP POP POP POP PUSH1 0x40 MLOAD RETURNDATASIZE PUSH1 0x1F NOT PUSH1 0x1F DUP3 ADD AND DUP3 ADD DUP1 PUSH1 0x40 MSTORE POP DUP2 ADD SWAP1 PUSH2 0x5CE SWAP2 SWAP1 PUSH2 0x915 JUMP JUMPDEST SWAP1 POP DUP7 PUSH2 0x5DB DUP12 DUP4 PUSH2 0xB1A JUMP JUMPDEST PUSH2 0x5E5 SWAP2 SWAP1 PUSH2 0xAFA JUMP JUMPDEST SWAP2 POP PUSH2 0x5F1 DUP11 DUP8 PUSH2 0x5FD JUMP JUMPDEST SWAP3 POP PUSH2 0x201 DUP3 DUP5 PUSH2 0xAE2 JUMP JUMPDEST PUSH1 0x0 PUSH1 0x64 DUP3 PUSH1 0x1 PUSH1 0x1 PUSH1 0xA0 SHL SUB AND PUSH4 0xF3FA3495 PUSH1 0x40 MLOAD DUP2 PUSH4 0xFFFFFFFF AND PUSH1 0xE0 SHL DUP2 MSTORE PUSH1 0x4 ADD PUSH1 0x20 PUSH1 0x40 MLOAD DUP1 DUP4 SUB DUP2 DUP7 DUP1 EXTCODESIZE ISZERO DUP1 ISZERO PUSH2 0x63A JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP GAS STATICCALL ISZERO DUP1 ISZERO PUSH2 0x64E JUMPI RETURNDATASIZE PUSH1 0x0 DUP1 RETURNDATACOPY RETURNDATASIZE PUSH1 0x0 REVERT JUMPDEST POP POP POP POP PUSH1 0x40 MLOAD RETURNDATASIZE PUSH1 0x1F NOT PUSH1 0x1F DUP3 ADD AND DUP3 ADD DUP1 PUSH1 0x40 MSTORE POP DUP2 ADD SWAP1 PUSH2 0x672 SWAP2 SWAP1 PUSH2 0x915 JUMP JUMPDEST PUSH2 0x67C SWAP1 DUP6 PUSH2 0xB1A JUMP JUMPDEST PUSH2 0x686 SWAP2 SWAP1 PUSH2 0xAFA JUMP JUMPDEST SWAP4 SWAP3 POP POP POP JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH20 0x0 PUSH4 0xD573D615 PUSH2 0x6B5 DUP13 DUP13 DUP13 PUSH2 0x39B JUMP JUMPDEST DUP10 DUP9 DUP11 DUP10 DUP10 PUSH1 0x40 MLOAD DUP8 PUSH4 0xFFFFFFFF AND PUSH1 0xE0 SHL DUP2 MSTORE PUSH1 0x4 ADD PUSH2 0x6DB SWAP7 SWAP6 SWAP5 SWAP4 SWAP3 SWAP2 SWAP1 PUSH2 0xAB6 JUMP JUMPDEST PUSH1 0x20 PUSH1 0x40 MLOAD DUP1 DUP4 SUB DUP2 DUP7 DUP1 EXTCODESIZE ISZERO DUP1 ISZERO PUSH2 0x6F3 JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP GAS DELEGATECALL ISZERO DUP1 ISZERO PUSH2 0x707 JUMPI RETURNDATASIZE PUSH1 0x0 DUP1 RETURNDATACOPY RETURNDATASIZE PUSH1 0x0 REVERT JUMPDEST POP POP POP POP PUSH1 0x40 MLOAD RETURNDATASIZE PUSH1 0x1F NOT PUSH1 0x1F DUP3 ADD AND DUP3 ADD DUP1 PUSH1 0x40 MSTORE POP DUP2 ADD SWAP1 PUSH2 0x72B SWAP2 SWAP1 PUSH2 0x915 JUMP JUMPDEST SWAP1 POP DUP5 PUSH2 0x738 DUP12 DUP4 PUSH2 0xB1A JUMP JUMPDEST PUSH2 0x742 SWAP2 SWAP1 PUSH2 0xAFA JUMP JUMPDEST SWAP11 SWAP10 POP POP POP POP POP POP POP POP POP POP JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH20 0x0 PUSH4 0xD573D615 PUSH2 0x77C DUP10 PUSH1 0x20 ADD MLOAD DUP10 DUP10 PUSH2 0x39B JUMP JUMPDEST PUSH1 0x40 DUP1 DUP12 ADD MLOAD DUP12 MLOAD PUSH1 0x60 DUP14 ADD MLOAD PUSH1 0x80 DUP15 ADD MLOAD SWAP4 MLOAD PUSH1 0x1 PUSH1 0x1 PUSH1 0xE0 SHL SUB NOT PUSH1 0xE0 DUP9 SWAP1 SHL AND DUP2 MSTORE PUSH2 0x7B2 SWAP6 SWAP5 DUP12 SWAP4 SWAP3 SWAP2 PUSH1 0x4 ADD PUSH2 0xAB6 JUMP JUMPDEST PUSH1 0x20 PUSH1 0x40 MLOAD DUP1 DUP4 SUB DUP2 DUP7 DUP1 EXTCODESIZE ISZERO DUP1 ISZERO PUSH2 0x7CA JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP GAS DELEGATECALL ISZERO DUP1 ISZERO PUSH2 0x7DE JUMPI RETURNDATASIZE PUSH1 0x0 DUP1 RETURNDATACOPY RETURNDATASIZE PUSH1 0x0 REVERT JUMPDEST POP POP POP POP PUSH1 0x40 MLOAD RETURNDATASIZE PUSH1 0x1F NOT PUSH1 0x1F DUP3 ADD AND DUP3 ADD DUP1 PUSH1 0x40 MSTORE POP DUP2 ADD SWAP1 PUSH2 0x802 SWAP2 SWAP1 PUSH2 0x915 JUMP JUMPDEST SWAP1 POP DUP4 DUP8 PUSH1 0x20 ADD MLOAD DUP3 PUSH2 0x815 SWAP2 SWAP1 PUSH2 0xB1A JUMP JUMPDEST PUSH2 0x81F SWAP2 SWAP1 PUSH2 0xAFA JUMP JUMPDEST SWAP8 SWAP7 POP POP POP POP POP POP POP JUMP JUMPDEST DUP1 CALLDATALOAD DUP1 ISZERO ISZERO DUP2 EQ PUSH2 0x83A JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST SWAP2 SWAP1 POP JUMP JUMPDEST DUP1 CALLDATALOAD PUSH2 0x83A DUP2 PUSH2 0xB66 JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH1 0x0 DUP1 PUSH1 0x0 DUP6 DUP8 SUB PUSH2 0x120 DUP2 SLT ISZERO PUSH2 0x863 JUMPI DUP2 DUP3 REVERT JUMPDEST PUSH1 0xA0 DUP2 SLT ISZERO PUSH2 0x870 JUMPI DUP2 DUP3 REVERT JUMPDEST POP PUSH1 0x40 MLOAD PUSH1 0xA0 DUP2 ADD PUSH1 0x1 PUSH1 0x1 PUSH1 0x40 SHL SUB DUP2 GT DUP3 DUP3 LT OR ISZERO PUSH2 0x89F JUMPI PUSH4 0x4E487B71 PUSH1 0xE0 SHL DUP4 MSTORE PUSH1 0x41 PUSH1 0x4 MSTORE PUSH1 0x24 DUP4 REVERT JUMPDEST DUP1 PUSH1 0x40 MSTORE POP DUP7 CALLDATALOAD DUP2 MSTORE PUSH1 0x20 DUP8 ADD CALLDATALOAD PUSH1 0x20 DUP3 ADD MSTORE PUSH1 0x40 DUP8 ADD CALLDATALOAD PUSH1 0x40 DUP3 ADD MSTORE PUSH2 0x8C8 PUSH1 0x60 DUP9 ADD PUSH2 0x82A JUMP JUMPDEST PUSH1 0x60 DUP3 ADD MSTORE PUSH2 0x8D9 PUSH1 0x80 DUP9 ADD PUSH2 0x82A JUMP JUMPDEST PUSH1 0x80 DUP3 ADD MSTORE SWAP5 POP PUSH1 0xA0 DUP7 ADD CALLDATALOAD SWAP4 POP PUSH1 0xC0 DUP7 ADD CALLDATALOAD SWAP3 POP PUSH2 0x8FA PUSH1 0xE0 DUP8 ADD PUSH2 0x83F JUMP JUMPDEST SWAP2 POP PUSH2 0x909 PUSH2 0x100 DUP8 ADD PUSH2 0x83F JUMP JUMPDEST SWAP1 POP SWAP3 SWAP6 POP SWAP3 SWAP6 SWAP1 SWAP4 POP JUMP JUMPDEST PUSH1 0x0 PUSH1 0x20 DUP3 DUP5 SUB SLT ISZERO PUSH2 0x926 JUMPI DUP1 DUP2 REVERT JUMPDEST POP MLOAD SWAP2 SWAP1 POP JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH1 0x40 DUP4 DUP6 SUB SLT ISZERO PUSH2 0x93F JUMPI DUP2 DUP3 REVERT JUMPDEST DUP3 CALLDATALOAD SWAP2 POP PUSH1 0x20 DUP4 ADD CALLDATALOAD PUSH2 0x951 DUP2 PUSH2 0xB66 JUMP JUMPDEST DUP1 SWAP2 POP POP SWAP3 POP SWAP3 SWAP1 POP JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH1 0x0 PUSH1 0x60 DUP5 DUP7 SUB SLT ISZERO PUSH2 0x970 JUMPI DUP3 DUP4 REVERT JUMPDEST DUP4 CALLDATALOAD SWAP3 POP PUSH1 0x20 DUP5 ADD CALLDATALOAD PUSH2 0x982 DUP2 PUSH2 0xB66 JUMP JUMPDEST SWAP2 POP PUSH1 0x40 DUP5 ADD CALLDATALOAD PUSH2 0x992 DUP2 PUSH2 0xB66 JUMP JUMPDEST DUP1 SWAP2 POP POP SWAP3 POP SWAP3 POP SWAP3 JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH1 0x0 DUP1 PUSH1 0x0 DUP1 PUSH1 0x0 DUP1 PUSH2 0x100 DUP10 DUP12 SUB SLT ISZERO PUSH2 0x9B9 JUMPI DUP3 DUP4 REVERT JUMPDEST DUP9 CALLDATALOAD SWAP8 POP PUSH1 0x20 DUP10 ADD CALLDATALOAD SWAP7 POP PUSH1 0x40 DUP10 ADD CALLDATALOAD SWAP6 POP PUSH2 0x9D7 PUSH1 0x60 DUP11 ADD PUSH2 0x82A JUMP JUMPDEST SWAP5 POP PUSH2 0x9E5 PUSH1 0x80 DUP11 ADD PUSH2 0x82A JUMP JUMPDEST SWAP4 POP PUSH1 0xA0 DUP10 ADD CALLDATALOAD SWAP3 POP PUSH1 0xC0 DUP10 ADD CALLDATALOAD PUSH2 0x9FC DUP2 PUSH2 0xB66 JUMP JUMPDEST SWAP2 POP PUSH1 0xE0 DUP10 ADD CALLDATALOAD PUSH2 0xA0C DUP2 PUSH2 0xB66 JUMP JUMPDEST DUP1 SWAP2 POP POP SWAP3 SWAP6 SWAP9 POP SWAP3 SWAP6 SWAP9 SWAP1 SWAP4 SWAP7 POP JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH1 0x0 DUP1 PUSH1 0x0 DUP1 PUSH1 0x0 PUSH1 0xE0 DUP9 DUP11 SUB SLT ISZERO PUSH2 0xA37 JUMPI DUP3 DUP4 REVERT JUMPDEST DUP8 CALLDATALOAD SWAP7 POP PUSH1 0x20 DUP9 ADD CALLDATALOAD SWAP6 POP PUSH1 0x40 DUP9 ADD CALLDATALOAD SWAP5 POP PUSH1 0x60 DUP9 ADD CALLDATALOAD PUSH1 0x3 DUP2 LT PUSH2 0xA5A JUMPI DUP4 DUP5 REVERT JUMPDEST SWAP4 POP PUSH1 0x80 DUP9 ADD CALLDATALOAD SWAP3 POP PUSH1 0xA0 DUP9 ADD CALLDATALOAD PUSH2 0xA71 DUP2 PUSH2 0xB66 JUMP JUMPDEST SWAP2 POP PUSH1 0xC0 DUP9 ADD CALLDATALOAD PUSH2 0xA81 DUP2 PUSH2 0xB66 JUMP JUMPDEST DUP1 SWAP2 POP POP SWAP3 SWAP6 SWAP9 SWAP2 SWAP5 SWAP8 POP SWAP3 SWAP6 POP JUMP JUMPDEST SWAP5 DUP6 MSTORE PUSH1 0x20 DUP6 ADD SWAP4 SWAP1 SWAP4 MSTORE PUSH1 0x40 DUP5 ADD SWAP2 SWAP1 SWAP2 MSTORE PUSH1 0x60 DUP4 ADD MSTORE ISZERO ISZERO PUSH1 0x80 DUP3 ADD MSTORE PUSH1 0xA0 ADD SWAP1 JUMP JUMPDEST SWAP6 DUP7 MSTORE PUSH1 0x20 DUP7 ADD SWAP5 SWAP1 SWAP5 MSTORE PUSH1 0x40 DUP6 ADD SWAP3 SWAP1 SWAP3 MSTORE PUSH1 0x60 DUP5 ADD MSTORE ISZERO ISZERO PUSH1 0x80 DUP4 ADD MSTORE ISZERO ISZERO PUSH1 0xA0 DUP3 ADD MSTORE PUSH1 0xC0 ADD SWAP1 JUMP JUMPDEST PUSH1 0x0 DUP3 NOT DUP3 GT ISZERO PUSH2 0xAF5 JUMPI PUSH2 0xAF5 PUSH2 0xB50 JUMP JUMPDEST POP ADD SWAP1 JUMP JUMPDEST PUSH1 0x0 DUP3 PUSH2 0xB15 JUMPI PUSH4 0x4E487B71 PUSH1 0xE0 SHL DUP2 MSTORE PUSH1 0x12 PUSH1 0x4 MSTORE PUSH1 0x24 DUP2 REVERT JUMPDEST POP DIV SWAP1 JUMP JUMPDEST PUSH1 0x0 DUP2 PUSH1 0x0 NOT DIV DUP4 GT DUP3 ISZERO ISZERO AND ISZERO PUSH2 0xB34 JUMPI PUSH2 0xB34 PUSH2 0xB50 JUMP JUMPDEST POP MUL SWAP1 JUMP JUMPDEST PUSH1 0x0 DUP3 DUP3 LT ISZERO PUSH2 0xB4B JUMPI PUSH2 0xB4B PUSH2 0xB50 JUMP JUMPDEST POP SUB SWAP1 JUMP JUMPDEST PUSH4 0x4E487B71 PUSH1 0xE0 SHL PUSH1 0x0 MSTORE PUSH1 0x11 PUSH1 0x4 MSTORE PUSH1 0x24 PUSH1 0x0 REVERT JUMPDEST PUSH1 0x1 PUSH1 0x1 PUSH1 0xA0 SHL SUB DUP2 AND DUP2 EQ PUSH2 0xB7B JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP JUMP INVALID LOG2 PUSH5 0x6970667358 0x22 SLT KECCAK256 DIV LOG0 0x28 PUSH8 0xFF727E25093A9A01 EXP 0x5F AND CALLVALUE RETURN LT 0x21 EXP 0x5C STATICCALL PUSH3 0xE03390 RETURN SWAP9 SWAP4 0x2E AND 0x4F PUSH5 0x736F6C6343 STOP ADDMOD DIV STOP CALLER ", "sha1": "72a52097c389cb86eb5e3364ba3cc43fe25e051a", "source": "// SPDX-License-Identifier: BUSL-1.1\n\npragma solidity ^0.8.0;\n\n/**\n * Smart contract library of mathematical functions operating with signed\n * 64.64-bit fixed point numbers.  Signed 64.64-bit fixed point number is\n * basically a simple fraction whose numerator is signed 128-bit integer and\n * denominator is 2^64.  As long as denominator is always the same, there is no\n * need to store it, thus in Solidity signed 64.64-bit fixed point numbers are\n * represented by int128 type holding only the numerator.\n */\nimport \"../Libraries/OptionMath.sol\";\nimport \"../OptionsUtils/OptionConfigUnintialized.sol\";\nimport \"../Interfaces/Interfaces.sol\";\nimport \"../Pool/BufferEpocPoolV2Unintialized.sol\";\n\nlibrary FeeCalculator {\n    /**\n     * @notice Calculate the current Utilisation\n     * @param amount Option amount\n     * @param pool The pool selling the option\n     * @return utilization Current utilization\n     */\n    function getNewUtilisation(\n        uint256 amount,\n        BufferEpocPoolV2Unintialized pool\n    ) public view returns (uint256 utilization) {\n        uint256 poolBalance = pool.totalTokenXBalance();\n        require(poolBalance > 0, \"O8\");\n\n        utilization = ((pool.lockedAmount() + amount) * 100e8) / poolBalance;\n    }\n\n    /**\n     * @notice Calculate the Utilisation adjusted ImpliedVol for the pool according to https://www.desmos.com/calculator/xdmhn97opd\n     * @param amount Option amount\n     * @param pool The pool selling the option\n     * @param config The option configuration\n     * @return iv The adjusted ImpliedVol\n     */\n    function currentImpliedVolatility(\n        uint256 amount,\n        BufferEpocPoolV2Unintialized pool,\n        OptionConfigUnintialized config\n    ) public view returns (uint256 iv) {\n        iv = config.impliedVolRate();\n        uint256 utilization = getNewUtilisation(amount, pool);\n        if (utilization > 40e8) {\n            iv += (iv * (utilization - 40e8)) / config.utilizationRate();\n        }\n    }\n\n    /**\n     * @notice Used for getting the price for Options in tokenX\n     * @param period Option period in seconds (1 days <= period <= 4 weeks)\n     * @param amount Option amount\n     * @param strike Strike price of the option\n     * @param optionType Type of the Option\n     * @param currentPrice Current price of the underlying asset\n     * @param config The option configuration\n     * @param pool The pool selling the option\n     * @return total Total price to be paid\n     * @return settlementFee Amount to be distributed to the Buffer token holders\n     * @return premium Amount that covers the price difference in the ITM options\n     */\n    function fees(\n        uint256 period,\n        uint256 amount,\n        uint256 strike,\n        IBufferOptions.OptionType optionType,\n        uint256 currentPrice,\n        OptionConfigUnintialized config,\n        BufferEpocPoolV2Unintialized pool\n    )\n        public\n        view\n        returns (\n            uint256 total,\n            uint256 settlementFee,\n            uint256 premium\n        )\n    {\n        // usdPremium per amount is USD Price of the option in 1e8\n        uint256 usdPremium = OptionMath.blackScholesPrice(\n            currentImpliedVolatility(amount, pool, config),\n            strike,\n            currentPrice,\n            period,\n            optionType == IBufferOptions.OptionType.Call\n        );\n        premium = (usdPremium * amount) / currentPrice;\n        settlementFee = getSettlementFee(amount, config);\n        total = settlementFee + premium;\n    }\n\n    /**\n     * @notice Used for getting the price for Options in USD\n     * @param period Option period in seconds (1 days <= period <= 4 weeks)\n     * @param amount Option amount\n     * @param strike Strike price of the option\n     * @param optionType Type of the Option\n     * @param currentPrice Current price of the underlying asset\n     * @param config The option configuration\n     * @param pool The pool selling the option\n     * @return total Total price to be paid in USD\n     * @return settlementFee Amount to be distributed to the Buffer token holders in USD\n     * @return premium Amount that covers the price difference in the ITM options in USD\n     */\n    function feesUsd(\n        uint256 period,\n        uint256 amount,\n        uint256 strike,\n        IBufferOptions.OptionType optionType,\n        uint256 currentPrice,\n        OptionConfigUnintialized config,\n        BufferEpocPoolV2Unintialized pool\n    )\n        public\n        view\n        returns (\n            uint256 total,\n            uint256 settlementFee,\n            uint256 premium\n        )\n    {\n        // usdPremium per asset amount is USD Price of the option in 1e8\n        uint256 usdPremium = OptionMath.blackScholesPrice(\n            currentImpliedVolatility(amount, pool, config),\n            strike,\n            currentPrice,\n            period,\n            optionType == IBufferOptions.OptionType.Call\n        );\n        settlementFee = getSettlementFee(amount, config);\n        premium = (usdPremium * amount) / currentPrice;\n        total = settlementFee + premium;\n    }\n\n    /**\n     * @notice Used for getting the price for Binary Options\n     * @param period Option period in seconds (1 days <= period <= 4 weeks)\n     * @param amount Option amount\n     * @param strike Strike price of the option\n     * @param isYes whether the option isAbove or not\n     * @param isAbove whether the price will stay above this strike or not\n     * @param currentPrice Current price of the underlying asset\n     * @param config The option configuration\n     * @param pool The pool selling the option\n     * @return total Total price to be paid\n     * @return settlementFee Amount to be distributed to the Buffer token holders\n     * @return premium Amount that covers the price difference in the ITM options\n     */\n    function feesBinary(\n        uint256 period,\n        uint256 amount,\n        uint256 strike,\n        bool isYes,\n        bool isAbove,\n        uint256 currentPrice,\n        OptionConfigUnintialized config,\n        BufferEpocPoolV2Unintialized pool\n    )\n        external\n        view\n        returns (\n            uint256 total,\n            uint256 settlementFee,\n            uint256 premium\n        )\n    {\n        premium = getPremium(\n            amount,\n            pool,\n            config,\n            strike,\n            period,\n            currentPrice,\n            isYes,\n            isAbove\n        );\n        settlementFee = getSettlementFee(amount, config);\n        total = settlementFee + premium;\n    }\n\n    /**\n     * @notice Used for getting the price for Binary KPI Options\n     * @param optionDetails Details of the option to be priced\n     * @param currentPrice Current price of the tokenX\n     * @param KPI KPI value for option\n     * @param config Option config\n     * @param pool pool contract\n     * @return total Total price to be paid\n     * @return settlementFee Amount to be distributed to the Buffer token holders\n     * @return premium Amount that covers the price difference in the ITM options\n     */\n    function feesKPIBinary(\n        IBufferOptions.OptionDetails memory optionDetails,\n        uint256 currentPrice,\n        uint256 KPI,\n        OptionConfigUnintialized config,\n        BufferEpocPoolV2Unintialized pool\n    )\n        external\n        view\n        returns (\n            uint256 total,\n            uint256 settlementFee,\n            uint256 premium\n        )\n    {\n        premium = getPremiumBinary(\n            optionDetails,\n            pool,\n            config,\n            currentPrice,\n            KPI\n        );\n        settlementFee = getSettlementFee(optionDetails.amount, config);\n        total = settlementFee + premium;\n    }\n\n    /**\n     * @notice Calculates settlementFee\n     * @param amount Option amount\n     * @return fee Settlement fee amount\n     */\n    function getSettlementFee(uint256 amount, OptionConfigUnintialized config)\n        internal\n        view\n        returns (uint256 fee)\n    {\n        return (amount * config.settlementFeePercentage()) / 100;\n    }\n\n    function getPremium(\n        uint256 amount,\n        BufferEpocPoolV2Unintialized pool,\n        OptionConfigUnintialized config,\n        uint256 strike,\n        uint256 period,\n        uint256 currentPrice,\n        bool isYes,\n        bool isAbove\n    ) internal view returns (uint256 premium) {\n        // usdPremium per amount is USD Price of the option in 1e8\n        uint256 usdPremium = OptionMath.blackScholesPriceBinary(\n            currentImpliedVolatility(amount, pool, config),\n            strike,\n            currentPrice,\n            period,\n            isYes,\n            isAbove\n        );\n        premium = (usdPremium * amount) / currentPrice;\n    }\n\n    function getPremiumBinary(\n        IBufferOptions.OptionDetails memory optionDetails,\n        BufferEpocPoolV2Unintialized pool,\n        OptionConfigUnintialized config,\n        uint256 currentPrice,\n        uint256 KPI\n    ) internal view returns (uint256 premium) {\n        // TODO : check unit\n        // usdPremium per amount is USD Price of the option in 1e8\n        uint256 usdPremium = OptionMath.blackScholesPriceBinary(\n            currentImpliedVolatility(optionDetails.amount, pool, config),\n            optionDetails.strike,\n            KPI,\n            optionDetails.period,\n            optionDetails.isYes,\n            optionDetails.isAbove\n        );\n        premium = (usdPremium * optionDetails.amount) / currentPrice;\n    }\n}\n", "sourceMap": "697:8775:21:-:0;;;;;;;;;;;;;;;-1:-1:-1;;;697:8775:21;;;;;;;;;;;;;;;;;", "sourcePath": "contracts/Libraries/OptionFeeCalculator.sol", "deployment": {"address": "0x8593078cee829C427F175E3721ad1c69f957f389", "chainid": "97", "blockHeight": 20152766}}